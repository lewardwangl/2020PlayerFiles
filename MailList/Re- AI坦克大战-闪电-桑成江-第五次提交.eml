Received: from BJMAIL11.sohu-inc.com (10.2.166.167) by BJMAIL11.sohu-inc.com
 (10.2.166.167) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1979.3 via Mailbox
 Transport; Fri, 23 Oct 2020 09:39:38 +0800
Received: from BJMAIL11.sohu-inc.com (10.2.166.167) by BJMAIL11.sohu-inc.com
 (10.2.166.167) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1979.3; Fri, 23
 Oct 2020 09:39:38 +0800
Received: from BJMAIL11.sohu-inc.com ([8.8.8.111]) by BJMAIL11.sohu-inc.com
 ([8.8.8.111]) with mapi id 15.01.1979.006; Fri, 23 Oct 2020 09:39:38 +0800
From: =?utf-8?B?U2FuZyBDaGVuZ0ppYW5nKOinhumikSk=?=
	<chengjiangsang116630@sohu-inc.com>
To: tdc-ppm <tdc-ppm@sohu-inc.com>
Subject: =?utf-8?B?UmU6IEFJ5Z2m5YWL5aSn5oiYLemXqueUtS3moZHmiJDmsZ8t56ys5LqU5qyh?=
 =?utf-8?B?5o+Q5Lqk?=
Thread-Topic: =?utf-8?B?QUnlnablhYvlpKfmiJgt6Zeq55S1LeahkeaIkOaxny3nrKzkupTmrKHmj5A=?=
 =?utf-8?B?5Lqk?=
Thread-Index: AQHWqN1etLb1FnMsT0iutKAjnQ51QQ==
Date: Fri, 23 Oct 2020 09:39:38 +0800
Message-ID: <1050656B-5648-4D4B-99C7-0A1E056EB33B@sohu-inc.com>
References: <A3E02C26-F8B7-4BC4-93F0-C6F41A246ADB@sohu-inc.com>
 <48BDEE67-A910-4B6B-BD11-33080BD6BAC9@sohu-inc.com>
 <B3EDC6DD-3691-4C5E-A4DE-C7CE1487274C@sohu-inc.com>
 <5F278CD3-925F-4550-B4FD-6388E6178227@sohu-inc.com>
In-Reply-To: <5F278CD3-925F-4550-B4FD-6388E6178227@sohu-inc.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: yes
X-MS-Exchange-Organization-SCL: -1
X-MS-TNEF-Correlator: <1050656B-5648-4D4B-99C7-0A1E056EB33B@sohu-inc.com>
x-mailer: Apple Mail (2.3445.9.1)
MIME-Version: 1.0
X-MS-Exchange-Organization-MessageDirectionality: Originating
X-MS-Exchange-Organization-AuthSource: BJMAIL11.sohu-inc.com
X-MS-Exchange-Organization-AuthAs: Internal
X-MS-Exchange-Organization-AuthMechanism: 04
X-Originating-IP: [10.11.157.8]
X-MS-Exchange-Organization-Network-Message-Id: d10be64d-964f-4cb9-2fa4-08d876f48129
Return-Path: chengjiangsang116630@sohu-inc.com
X-MS-Exchange-Transport-EndToEndLatency: 00:00:00.5001119
X-MS-Exchange-Processed-By-BccFoldering: 15.01.1979.006
Content-type: multipart/mixed;
	boundary="B_3686584859_2020502391"

> This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

--B_3686584859_2020502391
Content-type: multipart/alternative;
	boundary="B_3686584859_71879964"


--B_3686584859_71879964
Content-type: text/plain;
	charset="UTF-8"
Content-transfer-encoding: quoted-printable

=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=8C =E9=97=AA=E7=94=B5=E9=98=9F=E7=AC=AC=E4=BA=94=E6=AC=A1=E6=8F=90=E4=BA=A4=EF=BC=8C=E8=AF=B7=E6=9F=A5=E6=94=B6=20



=E6=A1=91=E6=88=90=E6=B1=9F=20
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89=20

=E5=9C=A8 2020=E5=B9=B410=E6=9C=8821=E6=97=A5=EF=BC=8C=E4=B8=8A=E5=8D=889:22=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91) <chengjiangsan=
g116630@sohu-inc.com> =E5=86=99=E9=81=93=EF=BC=9A

=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=8C=E9=97=AA=E7=94=B5=E9=98=9F=E7=AC=AC=E5=9B=9B=E6=AC=A1=E6=8F=90=E4=BA=A4=EF=BC=8C=E8=AF=B7=E6=9F=A5=E6=94=B6


=E6=A1=91=E6=88=90=E6=B1=9F=20
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89=20

=E5=9C=A8 2020=E5=B9=B410=E6=9C=8816=E6=97=A5=EF=BC=8C=E4=B8=8B=E5=8D=884:43=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91) <chengjiangsan=
g116630@sohu-inc.com> =E5=86=99=E9=81=93=EF=BC=9A

=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=8C
=E6=8C=89=E7=85=A7=E8=A7=84=E5=AE=9A=E4=BF=AE=E6=94=B9=E4=BA=86=E5=90=8D=E7=A7=B0=EF=BC=8C=E4=B8=94=E5=8F=AA=E5=8A=A0=E5=AF=86=E4=BA=86=E9=80=BB=E8=BE=91=E9=83=A8=E5=88=86


=E6=A1=91=E6=88=90=E6=B1=9F=20
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89=20

=E5=9C=A8 2020=E5=B9=B410=E6=9C=8816=E6=97=A5=EF=BC=8C=E4=B8=8B=E5=8D=884:13=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91) <chengjiangsan=
g116630@sohu-inc.com> =E5=86=99=E9=81=93=EF=BC=9A

=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=8C
=E6=8C=89=E7=85=A7=E5=BB=BA=E8=AE=AE=E6=8F=90=E4=BA=A4=E9=9D=9E=E5=8A=A0=E5=AF=86=E7=89=88=E6=9C=AC



=E6=A1=91=E6=88=90=E6=B1=9F=20
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89=20

=E5=9C=A8 2020=E5=B9=B410=E6=9C=8815=E6=97=A5=EF=BC=8C=E4=B8=8A=E5=8D=8811:48=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91) <chengjiangsa=
ng116630@sohu-inc.com> =E5=86=99=E9=81=93=EF=BC=9A

=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=8C
=E4=BB=A5=E4=B8=8B=E6=98=AF=E9=97=AA=E7=94=B5=E6=88=98=E9=98=9F=E7=9A=84=E7=AC=AC=E4=B8=80=E8=BD=AE=E4=BB=A3=E7=A0=81=E5=8F=8A=E5=BD=95=E5=83=8F=EF=BC=8C=E8=AF=B7=E6=9F=A5=E6=94=B6


=E6=A1=91=E6=88=90=E6=B1=9F=20
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89=20

<playerA.js><playerB.js><tank_battle.mp4>

<playerA.js><playerB.js><tank_battle.mp4>

<playerA.js><playerB.js><tank_battle.mp4>

<playerA.js><playerB.js>



--B_3686584859_71879964
Content-type: text/html;
	charset="UTF-8"
Content-transfer-encoding: quoted-printable

<html>
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf-8">
</head>
<body>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space"><f=
ont face=3D"PingFangSC-Regular" size=3D"4" class=3D"">=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=8C =E9=97=AA=E7=94=B5=E9=98=9F=E7=AC=AC=E4=BA=94=
=E6=AC=A1=E6=8F=90=E4=BA=A4=EF=BC=8C=E8=AF=B7=E6=9F=A5=E6=94=B6</font>
<div class=3D""><br class=3D"">
</div>
<div class=3D""></div>
</div>
<div style=3D"word-wrap:break-word; line-break:after-white-space">
<div></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
<div class=3D""><br class=3D"">
</div>
<div class=3D""><br class=3D"">
<div class=3D"">
<div style=3D"color:rgb(0,0,0); font-family:Helvetica; font-size:12px; font-s=
tyle:normal; font-weight:normal; letter-spacing:normal; orphans:auto; text-a=
lign:start; text-indent:0px; text-transform:none; white-space:normal; widows=
:auto; word-spacing:0px">
=E6=A1=91=E6=88=90=E6=B1=9F&nbsp;<br class=3D"">
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF<br class=3D"">
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313<br class=3D"">
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052<br class=3D"">
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89&nbsp;</div>
</div>
<div><br class=3D"">
<blockquote type=3D"cite" class=3D"">
<div class=3D"">=E5=9C=A8 2020=E5=B9=B410=E6=9C=8821=E6=97=A5=EF=BC=8C=E4=B8=8A=E5=8D=889:22=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91) =
&lt;<a href=3D"mailto:chengjiangsang116630@sohu-inc.com" class=3D"">chengjiangsa=
ng116630@sohu-inc.com</a>&gt; =E5=86=99=E9=81=93=EF=BC=9A</div>
<br class=3D"x_Apple-interchange-newline">
<div class=3D"">
<div class=3D"">
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""><font size=3D"4" face=3D"PingFangSC-Regular" class=3D"">=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=
=8C=E9=97=AA=E7=94=B5=E9=98=9F=E7=AC=AC=E5=9B=9B=E6=AC=A1=E6=8F=90=E4=BA=A4=EF=BC=8C=E8=AF=B7=E6=9F=A5=E6=94=B6</font></div>
<div class=3D""><br class=3D"">
</div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space"></=
div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""><br class=3D"">
<div class=3D"">
<div class=3D"" style=3D"font-family:Helvetica; font-size:12px; font-style:norm=
al; font-weight:normal; letter-spacing:normal; text-align:start; text-indent=
:0px; text-transform:none; white-space:normal; word-spacing:0px">
=E6=A1=91=E6=88=90=E6=B1=9F&nbsp;<br class=3D"">
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF<br class=3D"">
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313<br class=3D"">
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052<br class=3D"">
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89&nbsp;</div>
</div>
<div class=3D""><br class=3D"">
<blockquote type=3D"cite" class=3D"">
<div class=3D"">=E5=9C=A8 2020=E5=B9=B410=E6=9C=8816=E6=97=A5=EF=BC=8C=E4=B8=8B=E5=8D=884:43=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91) =
&lt;<a href=3D"mailto:chengjiangsang116630@sohu-inc.com" class=3D"">chengjiangsa=
ng116630@sohu-inc.com</a>&gt; =E5=86=99=E9=81=93=EF=BC=9A</div>
<br class=3D"x_x_Apple-interchange-newline">
<div class=3D"">
<div class=3D"">
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""><font size=3D"4" face=3D"PingFangSC-Regular" class=3D"">=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=
=8C</font></div>
<div class=3D""><font size=3D"4" face=3D"PingFangSC-Regular" class=3D""><span class=
=3D"x_x_x_Apple-tab-span" style=3D"white-space:pre"></span>=E6=8C=89=E7=85=A7=E8=A7=84=E5=AE=9A=E4=BF=AE=E6=94=B9=E4=BA=86=
=E5=90=8D=E7=A7=B0=EF=BC=8C=E4=B8=94=E5=8F=AA=E5=8A=A0=E5=AF=86=E4=BA=86=E9=80=BB=E8=BE=91=E9=83=A8=E5=88=86</font></div>
<div class=3D""><br class=3D"">
</div>
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
<br class=3D"">
<div class=3D"">
<div class=3D"" style=3D"font-family:Helvetica; font-size:12px; font-style:norm=
al; font-weight:normal; letter-spacing:normal; text-align:start; text-indent=
:0px; text-transform:none; white-space:normal; word-spacing:0px">
=E6=A1=91=E6=88=90=E6=B1=9F&nbsp;<br class=3D"">
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF<br class=3D"">
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313<br class=3D"">
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052<br class=3D"">
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89&nbsp;</div>
</div>
<div class=3D""><br class=3D"">
<blockquote type=3D"cite" class=3D"">
<div class=3D"">=E5=9C=A8 2020=E5=B9=B410=E6=9C=8816=E6=97=A5=EF=BC=8C=E4=B8=8B=E5=8D=884:13=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91) =
&lt;<a href=3D"mailto:chengjiangsang116630@sohu-inc.com" class=3D"">chengjiangsa=
ng116630@sohu-inc.com</a>&gt; =E5=86=99=E9=81=93=EF=BC=9A</div>
<br class=3D"x_x_x_Apple-interchange-newline">
<div class=3D"">
<div class=3D"">
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""><font size=3D"4" face=3D"PingFangSC-Regular" class=3D"">=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=
=8C</font></div>
<div class=3D""><font size=3D"4" face=3D"PingFangSC-Regular" class=3D""><span class=
=3D"x_x_x_x_Apple-tab-span" style=3D"white-space:pre"></span>=E6=8C=89=E7=85=A7=E5=BB=BA=E8=AE=AE=E6=8F=90=E4=BA=A4=E9=
=9D=9E=E5=8A=A0=E5=AF=86=E7=89=88=E6=9C=AC</font></div>
<div class=3D""><br class=3D"">
</div>
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
<div class=3D""><br class=3D"">
</div>
<br class=3D"">
<div class=3D"">
<div class=3D"" style=3D"font-family:Helvetica; font-size:12px; font-style:norm=
al; font-weight:normal; letter-spacing:normal; text-align:start; text-indent=
:0px; text-transform:none; white-space:normal; word-spacing:0px">
=E6=A1=91=E6=88=90=E6=B1=9F&nbsp;<br class=3D"">
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF<br class=3D"">
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313<br class=3D"">
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052<br class=3D"">
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89&nbsp;</div>
</div>
<div class=3D""><br class=3D"">
<blockquote type=3D"cite" class=3D"">
<div class=3D"">=E5=9C=A8 2020=E5=B9=B410=E6=9C=8815=E6=97=A5=EF=BC=8C=E4=B8=8A=E5=8D=8811:48=EF=BC=8CSang ChengJiang(=E8=A7=86=E9=A2=91)=
 &lt;<a href=3D"mailto:chengjiangsang116630@sohu-inc.com" class=3D"">chengjiangs=
ang116630@sohu-inc.com</a>&gt; =E5=86=99=E9=81=93=EF=BC=9A</div>
<br class=3D"x_x_x_x_Apple-interchange-newline">
<div class=3D"">
<div class=3D"">
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""><font face=3D"PingFangSC-Regular" size=3D"4" class=3D"">=E7=BB=84=E5=A7=94=E4=BC=9A=EF=BC=
=8C</font></div>
<div class=3D""><font face=3D"PingFangSC-Regular" size=3D"4" class=3D""><span class=
=3D"x_x_x_x_x_Apple-tab-span" style=3D"white-space:pre"></span>=E4=BB=A5=E4=B8=8B=E6=98=AF=E9=97=AA=E7=94=B5=E6=88=
=98=E9=98=9F=E7=9A=84=E7=AC=AC=E4=B8=80=E8=BD=AE=E4=BB=A3=E7=A0=81=E5=8F=8A=E5=BD=95=E5=83=8F=EF=BC=8C=E8=AF=B7=E6=9F=A5=E6=94=B6</font></div>
<div class=3D""><br class=3D"">
</div>
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
</div>
<div class=3D"" style=3D"word-wrap:break-word; line-break:after-white-space">
<div class=3D""></div>
<br class=3D"">
<div class=3D"">
<div class=3D"" style=3D"font-family:Helvetica; font-size:12px; font-style:norm=
al; font-weight:normal; letter-spacing:normal; text-align:start; text-indent=
:0px; text-transform:none; white-space:normal; word-spacing:0px">
=E6=A1=91=E6=88=90=E6=B1=9F&nbsp;<br class=3D"">
=E6=90=9C=E7=8B=90=E8=A7=86=E9=A2=91-Android=E5=AE=A2=E6=88=B7=E7=AB=AF<br class=3D"">
=E5=88=86=E6=9C=BA=EF=BC=9A=EF=BC=88010=EF=BC=892313<br class=3D"">
=E6=89=8B=E6=9C=BA=EF=BC=9A13810114052<br class=3D"">
=E5=9C=B0=E5=9D=80=EF=BC=9A=E5=8C=97=E4=BA=AC=E6=B5=B7=E6=B7=80=E5=8C=BA=E7=A7=91=E5=AD=A6=E9=99=A2=E5=8D=97=E8=B7=AF2=E5=8F=B7=E9=99=A23=E5=8F=B7=E6=A5=BC=E6=90=9C=E7=8B=90=E5=AA=92=E4=BD=93=E5=A4=A7=E5=8E=A6=EF=BC=881=
00190=EF=BC=89&nbsp;</div>
</div>
<br class=3D"">
</div>
</div>
<span id=3D"x_x_x_x_cid:552C2E879F640D42A41991DB016F7B28@sohu-inc.com" class=3D=
"">&lt;playerA.js&gt;</span><span id=3D"x_x_x_x_cid:841F27E560005A46BFDAD98EC6=
979E34@sohu-inc.com" class=3D"">&lt;playerB.js&gt;</span><span id=3D"x_x_x_x_cid=
:6EAC207B62939F43A55F710352C21E0B@sohu-inc.com" class=3D"">&lt;tank_battle.mp4=
&gt;</span></div>
</blockquote>
</div>
<br class=3D"">
</div>
</div>
<span id=3D"x_x_x_cid:6C947F9792D48C428900C19A9EEAFAA5@sohu-inc.com" class=3D""=
>&lt;playerA.js&gt;</span><span id=3D"x_x_x_cid:75228C3DFC5FED4DB74A29C450CF80=
97@sohu-inc.com" class=3D"">&lt;playerB.js&gt;</span><span id=3D"x_x_x_cid:B06DD=
07DF8CEE844AB3F8AB25E8DD955@sohu-inc.com" class=3D"">&lt;tank_battle.mp4&gt;</=
span></div>
</blockquote>
</div>
<br class=3D"">
</div>
</div>
<span id=3D"x_x_cid:2AC614880A90A34F8273055CBA860FDC@sohu-inc.com" class=3D"">&=
lt;playerA.js&gt;</span><span id=3D"x_x_cid:FFA35DD9157956448012DB5713A39032@s=
ohu-inc.com" class=3D"">&lt;playerB.js&gt;</span><span id=3D"x_x_cid:153E32183E5=
CEF44B846BFEBCFF175FB@sohu-inc.com" class=3D"">&lt;tank_battle.mp4&gt;</span><=
/div>
</blockquote>
</div>
<br class=3D"">
</div>
</div>
</div>
<span id=3D"x_cid:BE9530F9F4DC484F927A8DCF587D56B6@sohu-inc.com">&lt;playerA.=
js&gt;</span><span id=3D"x_cid:38D0789A56FD7C459A7EFEF378653E5F@sohu-inc.com">=
&lt;playerB.js&gt;</span></div>
</blockquote>
</div>
<br class=3D"">
</div>
</div>
</body>
</html>


--B_3686584859_71879964--


--B_3686584859_2020502391
Content-type: text/javascript; name="playerA.js";
 x-mac-creator="4F50494D"
Content-ID: <CD5F7A15BEE29648BB49CA714F8F6B6D@sohu-inc.com>
Content-disposition: attachment;
	filename="playerA.js"
Content-transfer-encoding: base64

Ly8gUGxheWVyQS9QbGF5ZXJCDQp3aW5kb3cucGxheWVyQSA9IG5ldyAoY2xhc3MgUGxheWVy
Q29udHJvbCB7DQogICAgLy8gQSDpgInmiYsgICBCIOmAieaJiw0KICAgIGNvbnN0cnVjdG9y
KHR5cGUpIHsNCiAgICAgICAgdGhpcy50eXBlID0gdHlwZTsNCiAgICAgICAgdGhpcy5zdk1v
dmVFdiA9IG5ldyBDdXN0b21FdmVudCgia2V5ZG93biIpOw0KICAgICAgICB0aGlzLnN2Rmly
ZUV2ID0gbmV3IEN1c3RvbUV2ZW50KCJrZXlkb3duIik7DQogICAgICAgIHRoaXMuZmlyZXRp
bWVzdGFtcCA9IChuZXcgRGF0ZSgpKS52YWx1ZU9mKCk7DQogICAgICAgIHRoaXMuc3ZNeVRh
bms7Ly/miJHnmoTlnablhYs7DQogICAgICAgIHRoaXMuZW5lbXlUYW5rIC8vIOaVjOaWueWd
puWFizsNCiAgICAgICAgdGhpcy5teUJ1bGxldHMgPSBbXTsNCiAgICAgICAgdGhpcy5lbmVt
eUJ1bGxldHMgPSBbXTsNCiAgICAgICAgdGhpcy5zdlR5cGUgPSB0eXBlOw0KICAgICAgICB0
aGlzLlRBTktfU1BFRUQgPSA3Ow0KICAgICAgICB0aGlzLlRBTktfV0lEVEggPSA1MDsNCiAg
ICAgICAgdGhpcy5CVUxMRVRfV0lEVEggPSAxMDsNCiAgICAgICAgdGhpcy5kYW5nZXJCdWxs
ZXRzID0gW107DQogICAgICAgIHRoaXMuQ0hFQ0tfU1RFUCA9IDI1Ow0KICAgICAgICB0aGlz
LkRBTkdFUl9TVEVQID0gMTg7DQogICAgICAgIHRoaXMuTk9fQ09MTElERSA9IC0xOw0KICAg
ICAgICB0aGlzLkJFU1RfU0NPUkUgPSAxMDAwOw0KICAgICAgICB0aGlzLldPUlNUX1NDT1JF
ID0gLTEwMDA7DQogICAgICAgIHRoaXMuc3ZBbGxEaXJlY3Rpb25zID0gW3RoaXMuRElSRUNU
SU9OLlVQLCB0aGlzLkRJUkVDVElPTi5ET1dOLCB0aGlzLkRJUkVDVElPTi5MRUZULCB0aGlz
LkRJUkVDVElPTi5SSUdIVCwgdGhpcy5ESVJFQ1RJT04uU1RPUF07DQogICAgICAgIHRoaXMu
c3ZOb1N0b3BEaXJlY3Rpb25zID0gW3RoaXMuRElSRUNUSU9OLkRPV04sIHRoaXMuRElSRUNU
SU9OLlVQLCAgdGhpcy5ESVJFQ1RJT04uTEVGVCwgdGhpcy5ESVJFQ1RJT04uUklHSFRdOw0K
ICAgICAgICB0aGlzLmxvb3BDb3VudCA9IDA7DQogICAgICAgIC8vIOWNsemZqei3neemuw0K
ICAgICAgICB0aGlzLkRBTkdFUl9ESVNUQU5DRSA9IDMgKiB0aGlzLlRBTktfV0lEVEg7DQog
ICAgICAgIHRoaXMuQkVTVF9GSVJFX0RJU1RBTkNFID0gNCAqIHRoaXMuVEFOS19XSURUSDsN
CiAgICAgICAgLy8g5pS75Ye76Led56a7KOe8k+WGsui3neemuzLlgI3lnablhYvlrr3luqYp
DQogICAgICAgIHRoaXMuRklSRV9NQVhfRElTVEFOQ0UgPSB0aGlzLkRBTkdFUl9ESVNUQU5D
RSArIDIgKiB0aGlzLlRBTktfV0lEVEg7DQogICAgICAgIC8vIOmdnuWuieWFqOaOpei/kei3
neemuw0KICAgICAgICB0aGlzLlVOU0FGRV9BUFBST0FDSF9ESVNUQU5DRSA9IHRoaXMuREFO
R0VSX0RJU1RBTkNFICsgdGhpcy5UQU5LX1dJRFRILzI7DQoNCiAgICAgICAgdGhpcy5NQVhf
REVEVUNFX0NPVU5UID0gMjsNCiAgICAgICAgdGhpcy5NQVhfREVEVUNFX0NPVU5UX0ZPUl9P
TkVfRElSID0gMTU7DQoNCiAgICAgICAgdGhpcy5UQU5LX01PVkVfREFOR0VSX1NURVAgPSB0
aGlzLk1BWF9ERURVQ0VfQ09VTlQgKyAxOw0KDQogICAgICAgIHRoaXMudGFyZ2V0VGFua0lu
Zm8gPSBbXTsNCiAgICAgICAgdGhpcy5ERUJVRyA9IGZhbHNlOw0KDQogICAgICAgIHRoaXMu
c2hvdWxkRmlyZUxvb3BUaW1lcyA9IFtdOw0KICAgICAgICB0aGlzLmltYWdpbmFyeU1ldGFs
QnVsbGV0cyA9IFtdOw0KICAgICAgICB0aGlzLklNR0lOQVJZX0JVTExFVF9XSURUSCA9IDEw
MDsNCg0KICAgICAgICB0aGlzLmFsbEVuZW15VGFuayA9IFtdOw0KICAgICAgICB0aGlzLkJF
U1RfRElTVEFOQ0VfT0ZfQ0VOVEVSID0gNTU7DQogICAgICAgIC8vIOacgOWwj+W8gOeBq+aX
tumXtOmXtOmalA0KICAgICAgICB0aGlzLk1JTl9GSVJFX0lOVEVSVkFMID0gMDsNCiAgICAg
ICAgLy8g5LiK5LiA5qyh5a+55omL5pa55pa55ZCR5LiK55qE5byA54GrDQogICAgICAgIHRo
aXMubGFzdEVuZW15RGlyZWN0aW9uRmlyZSA9IDA7DQogICAgICAgIHRoaXMuTUVUQUxfV0lE
VEggPSAxMDA7DQogICAgICAgIHRoaXMuTUFYX0RJU1RBTkNFID0gMDsNCiAgICAgICAgdGhp
cy5NSU5fRklSRV9PRkZTRVQgPSAodGhpcy5UQU5LX1dJRFRIICsgdGhpcy5CVUxMRVRfV0lE
VEgpLzI7DQogICAgICAgIHRoaXMuU1VQRVJfTUlOX0ZJUkVfT0ZGU0VUID0gdGhpcy5NSU5f
RklSRV9PRkZTRVQ7DQoNCiAgICAgICAgdGhpcy5teUNvbGxpZGVOdW0gPSAwOw0KICAgICAg
ICB0aGlzLmVuZW15Q29sbGlkZU51bSA9IDA7DQoNCiAgICAgICAgdGhpcy5hbGxFbmVteUJ1
bGxldHMgPSBbXTsNCiAgICAgICAgdGhpcy5hbGxBSVRhbmtDb3VudCA9IDA7DQogICAgICAg
IHRoaXMuc3VwZXJBdHRhY2tEaXJlY3Rpb25zID0gW107DQogICAgICAgIHRoaXMuZmlyc3RB
dHRhY2tMb29wQ291bnQgPSAwOw0KICAgICAgICB0aGlzLlNVUEVSX0FUVEFDS19ESVNUQU5D
RSA9IDIuNSAqIHRoaXMuVEFOS19XSURUSDsNCiAgICAgICAgdGhpcy5TVVBFUl9BVFRBQ0hf
TUFYX0RJU1RBTkNFID0gOCAqIHRoaXMuVEFOS19XSURUSDsNCiAgICAgICAgdGhpcy5BVFRB
Q0tfRElTVEFOQ0UgPSA2ICogdGhpcy5UQU5LX1dJRFRIOw0KICAgICAgICB0aGlzLmluU3Vw
ZXJBdHRhY2tNb2RlID0gZmFsc2U7DQogICAgICAgIHRoaXMubWluQXR0YWNrRGlzdGFuY2Ug
PSAxMDsNCiAgICAgICAgdGhpcy5BVFRBQ0tfTUlOX0RJU1RBTkNFX0NPTlNUID0gMTk4Ow0K
ICAgICAgICB0aGlzLkFUVEFDS19NSU5fRElTVEFOQ0UgPSB0aGlzLkFUVEFDS19NSU5fRElT
VEFOQ0VfQ09OU1Q7DQogICAgICAgIHRoaXMubGFzdEVuZW15RGlyZWN0aW9uID0gdGhpcy5E
SVJFQ1RJT04uU1RPUDsNCiAgICAgICAgdGhpcy5maXJlSWdub3JlRGlyZWN0aW9uID0gZmFs
c2U7DQogICAgfQ0KDQogICAgbGFuZCgpIHsNCiAgICAgICAgLy8g5b2T5YmN55qE5Z2m5YWL
5a6e5L6LDQogICAgICAgIHRoaXMuc3ZNeVRhbmsgPSB1bmRlZmluZWQ7DQogICAgICAgIHRo
aXMuZW5lbXlUYW5rID0gdW5kZWZpbmVkOw0KICAgICAgICAvLyBQbGF5ZXJBL1BsYXllckIN
CiAgICAgICAgYU15VGFua0NvdW50LmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAg
ICB2YXIgYyA9IGVsZW1lbnQ7DQogICAgICAgICAgICBpZiAoY1snaWQnXSA9PSAxMDApIHsN
CiAgICAgICAgICAgICAgICB0aGlzLnN2TXlUYW5rID0gYzsNCiAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgIGlmIChjWydpZCddID09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMu
ZW5lbXlUYW5rID0gYzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAg
Ly8gUGxheWVyQS9QbGF5ZXJCDQogICAgICAgIHRoaXMubXlCdWxsZXRzID0gYU15QnVsbGV0
Q291bnQxOw0KICAgICAgICB0aGlzLmVuZW15QnVsbGV0cyA9IGFNeUJ1bGxldENvdW50MjsN
CiAgICAgICAgdGhpcy5teUNvbGxpZGVOdW0gPSBwbGF5ZXIxQ29sbGlkZU51bTsNCiAgICAg
ICAgdGhpcy5lbmVteUNvbGxpZGVOdW0gPSBwbGF5ZXIyQ29sbGlkZU51bTsNCg0KDQogICAg
ICAgIGlmICghdGhpcy5zdk15VGFuaykgcmV0dXJuIG5hbWU7DQoNCiAgICAgICAgdGhpcy5N
QVhfRElTVEFOQ0UgPSAoY2FudmFzLndpZHRoICsgY2FudmFzLmhlaWdodCkqMjsNCg0KICAg
ICAgICBpZiAodGhpcy5sb29wQ291bnQgPT09IDApIHsNCiAgICAgICAgICAgIC8vIOiusOW9
lUFJ5Z2m5YWL55qE5Yid5aeL5pWw6YePDQogICAgICAgICAgICB0aGlzLmFsbEFJVGFua0Nv
dW50ID0gYVRhbmtDb3VudC5sZW5ndGg7DQogICAgICAgIH0NCg0KICAgICAgICAvLyDmnoTl
u7rmiYDmnInmlYzmlrnlnablhYsNCiAgICAgICAgdGhpcy5hbGxFbmVteVRhbmsucHVzaC5h
cHBseSh0aGlzLmFsbEVuZW15VGFuaywgYVRhbmtDb3VudCk7DQogICAgICAgIGlmICh0aGlz
LmVuZW15VGFuayAmJiB0aGlzLmlzQ291bnRlclN0cmlrZSgpKSB7DQogICAgICAgICAgICB0
aGlzLmFsbEVuZW15VGFuay5wdXNoKHRoaXMuZW5lbXlUYW5rKTsNCiAgICAgICAgfQ0KDQog
ICAgICAgIGlmICh0aGlzLmFsbEVuZW15VGFuay5sZW5ndGggPT09IDApIHsNCiAgICAgICAg
ICAgIHJldHVybiBuYW1lOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHRoaXMubG9vcENv
dW50ID09PSAwICYmIHRoaXMuaXNDb3VudGVyU3RyaWtlKCkpIHsNCiAgICAgICAgICAgIHRo
aXMuY3JlYXRlSW1hZ2luYXJ5QnVsbGV0cygpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhp
cy5sb29wQ291bnQrKzsNCg0KICAgICAgICB0aGlzLmxvZygic3RhcnQ9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0+Iik7DQoNCiAgICAgICAgdGhpcy5lcnJvcigi6L+b6KGM56ys
IiArIHRoaXMubG9vcENvdW50ICsgIuasoeW+queOryIpOw0KDQogICAgICAgIGxldCBhcnJh
eSA9IHRoaXMudHJhY2VBbmRGaXJlVjIoKTsNCiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IGFy
cmF5WzBdOw0KICAgICAgICBsZXQgdGFyZ2V0VGFuayA9IGFycmF5WzFdOw0KICAgICAgICBs
ZXQgc2hvdWxkRmlyZSA9IGFycmF5WzJdOw0KDQogICAgICAgIGxldCBmaW5hbERpcmVjdGlv
biA9IGRpcmVjdGlvbjsNCiAgICAgICAgaWYgKHRhcmdldFRhbmsgPT09IHRoaXMuZW5lbXlU
YW5rKSB7DQogICAgICAgICAgICBsZXQgZHggPSB0aGlzLnN2TXlUYW5rLlggLSB0YXJnZXRU
YW5rLlg7DQogICAgICAgICAgICBsZXQgZHkgPSB0aGlzLnN2TXlUYW5rLlkgLSB0YXJnZXRU
YW5rLlk7DQogICAgICAgICAgICBpZiAoIXRoaXMuaW5NdXN0RGllQXJlYTIoZHgsIGR5KSkg
ew0KICAgICAgICAgICAgICAgIC8vIOW/heatu+WxgOmdouS4i+S4jei6sumBvw0KICAgICAg
ICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5DaGVja0lmSW5kYW5nZXJBbmRBdm9p
ZChkaXJlY3Rpb24pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0
aGlzLmZpcmVJZ25vcmVEaXJlY3Rpb24gPSB0cnVlOw0KICAgICAgICAgICAgICAgIHRoaXMu
bG9nKCLlj6rnrqHmiZMiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAg
ICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5DaGVja0lmSW5kYW5nZXJBbmRBdm9p
ZChkaXJlY3Rpb24pOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAg
aWYgKGZpbmFsRGlyZWN0aW9uICE9PSBkaXJlY3Rpb24pIHsNCiAgICAgICAgICAgIC8vIOac
gOe7iOaWueWQkeS4juiuvuWumuaWueWQkeS4jeS4gOiHtO+8jOmAgOWHuui2hee6p+aUu+WH
u+aooeW8jw0KICAgICAgICAgICAgdGhpcy5pblN1cGVyQXR0YWNrTW9kZSA9IGZhbHNlOw0K
ICAgICAgICAgICAgdGhpcy5zdXBlckF0dGFja0RpcmVjdGlvbnMgPSBbXTsNCiAgICAgICAg
ICAgIHRoaXMuZmlyc3RBdHRhY2tMb29wQ291bnQgPSAwOw0KICAgICAgICAgICAgLy8g6IiN
5byDdHJhY2VBbmRGaXJl6Zi25q615Lqn55Sf55qE5piv5ZCm5byA54GrDQogICAgICAgICAg
ICBzaG91bGRGaXJlID0gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAodGhpcy5p
c0NvdW50ZXJTdHJpa2UoKSAmJiB0aGlzLnRhcmdldFRhbmtJbmZvWzJdID09PSB0aGlzLmVu
ZW15VGFuayAmJiB0aGlzLmFsbEVuZW15VGFuay5sZW5ndGggPD0gMTApIHsNCiAgICAgICAg
ICAgIGlmICh0aGlzLmFsbEVuZW15VGFuay5sZW5ndGggPT09IDEgJiYgdGhpcy5pc0Jsb2Nr
QnlNZXRhbCh0aGlzLnN2TXlUYW5rLCB0YXJnZXRUYW5rKSkgew0KICAgICAgICAgICAgICAg
IC8vIOWPquacieWvueaJi+aWueWdpuWFi+S4lOaciemanOeijeeJqemYu+aMoeaXtuiuvue9
ruS4ujgNCiAgICAgICAgICAgICAgICB0aGlzLkRBTkdFUl9TVEVQID0gODsNCiAgICAgICAg
ICAgIH0gZWxzZSBpZiAodGhpcy5pblN1cGVyQXR0YWNrTW9kZSkgew0KICAgICAgICAgICAg
ICAgIHRoaXMuREFOR0VSX1NURVAgPSAxNTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAg
ICAgICAgICAgICAgdGhpcy5EQU5HRVJfU1RFUCA9IDE4Ow0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5EQU5HRVJfU1RFUCA9IDE4Ow0KICAg
ICAgICB9DQoNCiAgICAgICAgdGhpcy5sb2coIkRBTkdFUl9TVEVQIiwgdGhpcy5EQU5HRVJf
U1RFUCk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmxvZygicG9zaXRpb25zOiAiLCB0aGlz
LnN2TXlUYW5rLlgsIHRoaXMuc3ZNeVRhbmsuWSwgdGFyZ2V0VGFuay5YLCB0YXJnZXRUYW5r
LlkpOw0KDQogICAgICAgIC8vIFBsYXllckEvUGxheWVyQg0KICAgICAgICBpZiAoZmluYWxE
aXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLlJJR0hUICYmIHRoaXMubG9vcENvdW50IC0g
dGhpcy5sYXN0RW5lbXlEaXJlY3Rpb25GaXJlID49IDgwICYmIHRoaXMuYWxsRW5lbXlUYW5r
Lmxlbmd0aCA+PSAxICYmIHRhcmdldFRhbmsgIT09IHRoaXMuZW5lbXlUYW5rKSB7DQogICAg
ICAgICAgICBzaG91bGRGaXJlID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMubGFzdEVuZW15
RGlyZWN0aW9uRmlyZSA9IHRoaXMubG9vcENvdW50Ow0KICAgICAgICB9DQoNCiAgICAgICAg
Ly8g5qOA5rWL5q2k5pa55ZCR5LiK5piv5ZCm5pyJ5pWM5Lq677yM5aaC5p6c5pyJ77yM5YiZ
5byA54GrDQogICAgICAgIHNob3VsZEZpcmUgfHw9IHRoaXMuc2hvdWxkRmlyZU9uRGlyZWN0
aW9uKGZpbmFsRGlyZWN0aW9uKTsNCg0KICAgICAgICAvLyDkvb/nlKjmlbDnu4TorrDlvZVz
aG91bGRGaXJlTG9vcFRpbWUNCiAgICAgICAgaWYgKHNob3VsZEZpcmUgJiYgdGhpcy5zaG91
bGRGaXJlTG9vcFRpbWVzLmxlbmd0aCA8IDUpIHsNCiAgICAgICAgICAgIHRoaXMubG9nKCJz
aG91bGRGaXJlIiwgdGhpcy5sb29wQ291bnQpOw0KICAgICAgICAgICAgbGV0IHNob3VsZEZp
cmVMb29wVGltZSA9IDA7DQogICAgICAgICAgICBpZiAodGhpcy5maXJlSWdub3JlRGlyZWN0
aW9uKSB7DQogICAgICAgICAgICAgICAgc2hvdWxkRmlyZUxvb3BUaW1lID0gdGhpcy5sb29w
Q291bnQ7DQogICAgICAgICAgICAgICAgdGhpcy5maXJlSWdub3JlRGlyZWN0aW9uID0gZmFs
c2U7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHNob3VsZEZpcmVM
b29wVGltZSA9IGZpbmFsRGlyZWN0aW9uID09PSB0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbiA/
IHRoaXMubG9vcENvdW50IDogdGhpcy5sb29wQ291bnQgKyAxOw0KICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkRmlyZUxvb3BUaW1lcy5sZW5ndGggPiAwKSB7
DQogICAgICAgICAgICAgICAgLy8g6Ziy5q2i6L+e57ut5Lik5Liq5a2Q5by55Y+R5Ye655qE
5oOF5Ya1DQogICAgICAgICAgICAgICAgLy8gVE9ETyBTQ0oNCiAgICAgICAgICAgICAgICAv
LyBpZiAodGhpcy5zaG91bGRGaXJlTG9vcFRpbWVzW3RoaXMuc2hvdWxkRmlyZUxvb3BUaW1l
cy5sZW5ndGgtMV0gIT09IHRoaXMubG9vcENvdW50KSB7DQogICAgICAgICAgICAgICAgLy8g
ICAgIHRoaXMuc2hvdWxkRmlyZUxvb3BUaW1lcy5wdXNoKHNob3VsZEZpcmVMb29wVGltZSk7
DQogICAgICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAg
ICAgICAgICB0aGlzLnNob3VsZEZpcmVMb29wVGltZXMucHVzaChzaG91bGRGaXJlTG9vcFRp
bWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5sb2coImZp
bmFsRGlyZWN0aW9uIiwgZmluYWxEaXJlY3Rpb24pOw0KDQogICAgICAgIHRoaXMuU1ZNb3Zl
KGZpbmFsRGlyZWN0aW9uKTsNCg0KICAgICAgICB0aGlzLmxvZygic2hvdWxkRmlyZUxvb3BU
aW1lczogIiwgdGhpcy5zaG91bGRGaXJlTG9vcFRpbWVzKTsNCg0KICAgICAgICAvLyDpgY3l
joZzaG91bGRGaXJlTG9vcFRpbWVz77yMIHJlbW92ZeaOieWwj+S6juW9k+WJjWxvb3B0aW1l
55qE5p2h55uuDQogICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuc2hvdWxkRmlyZUxvb3BU
aW1lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgbGV0IGZpcmVMb29wVGltZSA9IHRo
aXMuc2hvdWxkRmlyZUxvb3BUaW1lc1tpXTsNCiAgICAgICAgICAgIGlmIChmaXJlTG9vcFRp
bWUgPT09IHRoaXMubG9vcENvdW50ICYmIGZpbmFsRGlyZWN0aW9uID09PSBkaXJlY3Rpb24p
IHsNCiAgICAgICAgICAgICAgICB0aGlzLmxvZygicmVhbCBzaG91bGRGaXJlIik7DQogICAg
ICAgICAgICAgICAgdGhpcy5TVkZpcmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAg
IGlmIChmaXJlTG9vcFRpbWUgPD0gdGhpcy5sb29wQ291bnQpIHsNCiAgICAgICAgICAgICAg
ICB0aGlzLnNob3VsZEZpcmVMb29wVGltZXMuc3BsaWNlKGksIDEpOw0KICAgICAgICAgICAg
ICAgIGktLTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMubG9n
KCJ0YXJnZXRUYW5rLmRpcmVjdGlvbiIsIHRoaXMuU1ZHZXREaXJlY3Rpb25TdHIodGFyZ2V0
VGFuay5kaXJlY3Rpb24pKTsNCg0KICAgICAgICBpZiAodGFyZ2V0VGFuayA9PT0gdGhpcy5l
bmVteVRhbmspIHsNCiAgICAgICAgICAgIHRoaXMubGFzdEVuZW15RGlyZWN0aW9uID0gdGFy
Z2V0VGFuay5kaXJlY3Rpb247DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmxvZygiZW5k
PD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0iKTsNCg0KICAgICAgICB0aGlzLnNl
dE5hbWUoKTsNCg0KICAgIH0NCg0KICAgIGxlYXZlKCkgew0KICAgICAgICB0aGlzLnNldE5h
bWUoKTsNCiAgICAgICAgZG9jdW1lbnQub25rZXl1cCh0aGlzLnN2TW92ZUV2KTsNCiAgICAg
ICAgZG9jdW1lbnQub25rZXl1cCh0aGlzLnN2RmlyZUV2KTsNCiAgICAgICAgaWYgKHRoaXMu
REVCVUcpIHsNCiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZGFuZ2VyQnVsbGV0
cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHRoaXMuZGFuZ2VyQnVsbGV0c1tp
XS5jb2xvciA9ICd5ZWxsb3cnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAg
ICAgdGhpcy5kYW5nZXJCdWxsZXRzID0gW107DQogICAgICAgIHRoaXMuYWxsRW5lbXlUYW5r
ID0gW107DQogICAgICAgIHRoaXMuYWxsRW5lbXlCdWxsZXRzID0gW107DQogICAgICAgIGlm
ICh0aGlzLkRFQlVHKSB7DQogICAgICAgICAgICAvLyB0aGlzLnRhcmdldFRhbmtJbmZvWzJd
LmltZyA9IGltZzANCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHR5cGU7DQogICAgLy8g5pa5
5ZCR55qE5Yir5ZCNDQogICAgRElSRUNUSU9OID0gew0KICAgICAgICBVUDogMCwNCiAgICAg
ICAgUklHSFQ6IDEsDQogICAgICAgIERPV046IDIsDQogICAgICAgIExFRlQ6IDMsDQogICAg
ICAgIFNUT1A6IDQsDQogICAgfTsNCg0KICAgIGdldE5hbWUoKSB7DQogICAgICAgIHJldHVy
biAi6Zeq55S1IjsNCiAgICB9DQoNCiAgICBpc0J1bGxldEluRGlyZWN0aW9uKG15QnVsbGV0
LCBmaW5hbERpcmVjdGlvbiwgdGFyZ2V0VGFuaykgew0KICAgICAgICBsZXQgZGlyZWN0aW9u
ID0gZmluYWxEaXJlY3Rpb247DQogICAgICAgIGlmIChkaXJlY3Rpb24gPT09IHRoaXMuRElS
RUNUSU9OLlNUT1ApIHsNCiAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuc3ZNeVRhbmsu
ZGlyZWN0aW9uOw0KICAgICAgICB9DQogICAgICAgIGlmIChteUJ1bGxldC5YIC0gdGhpcy5z
dk15VGFuay5YID09PSB0aGlzLlRBTktfV0lEVEgvMikgew0KICAgICAgICAgICAgaWYgKChk
aXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLlVQICYmIG15QnVsbGV0LlkgPCB0aGlzLnN2
TXlUYW5rLlkgJiYgbXlCdWxsZXQuWSA+IHRhcmdldFRhbmsuWSkgfHwgKGRpcmVjdGlvbiA9
PT0gdGhpcy5ESVJFQ1RJT04uRE9XTiAmJiBteUJ1bGxldC5ZID4gdGhpcy5zdk15VGFuay5Z
ICYmIG15QnVsbGV0LlkgPCB0YXJnZXRUYW5rLlkpKSB7DQogICAgICAgICAgICAgICAgcmV0
dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAobXlCdWxsZXQu
WSAtIHRoaXMuc3ZNeVRhbmsuWSA9PT0gdGhpcy5UQU5LX1dJRFRILzIpIHsNCiAgICAgICAg
ICAgIGlmICgoZGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5MRUZUICYmIG15QnVsbGV0
LlggPCB0aGlzLnN2TXlUYW5rLlggJiYgbXlCdWxsZXQuWCA+IHRhcmdldFRhbmsuWCkgfHwg
KGRpcmVjdGlvbiA9PT0gdGhpcy5ESVJFQ1RJT04uUklHSFQgJiYgbXlCdWxsZXQuWCA+IHRo
aXMuc3ZNeVRhbmsuWCAmJiBteUJ1bGxldC5YIDwgdGFyZ2V0VGFuay5YKSkgew0KICAgICAg
ICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAg
ICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBoYXNNeUJ1bGxldEluRGlyZWN0aW9u
KGRpcmVjdGlvbiwgdGFyZ2V0VGFuaykgew0KICAgICAgICBmb3IobGV0IGk9MDtpPHRoaXMu
bXlCdWxsZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBsZXQgbXlCdWxsZXQgPSB0
aGlzLm15QnVsbGV0c1tpXTsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzQnVsbGV0SW5EaXJl
Y3Rpb24obXlCdWxsZXQsIGRpcmVjdGlvbiwgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAg
ICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBy
ZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLy8g5Zyo5q2k5pa55ZCR5LiK5piv5ZCm5bqU
6K+l5byA54GrDQogICAgc2hvdWxkRmlyZU9uRGlyZWN0aW9uKGRpcmVjdGlvbikgew0KICAg
ICAgICBpZiAoZGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5TVE9QKSB7DQogICAgICAg
ICAgICBkaXJlY3Rpb24gPSB0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbjsNCiAgICAgICAgfQ0K
DQogICAgICAgIGxldCB0YXJnZXRUYW5rID0gdGhpcy50YXJnZXRUYW5rSW5mb1syXTsNCiAg
ICAgICAgaWYgKHRhcmdldFRhbmsgPT09IHRoaXMuZW5lbXlUYW5rKSB7DQogICAgICAgICAg
ICAvLyDpkojlr7nlr7nmiYvmlrnlnablhYvov5vooYzlpITnkIYNCiAgICAgICAgICAgIGxl
dCBkeCA9IHRoaXMuc3ZNeVRhbmsuWCAtIHRhcmdldFRhbmsuWDsNCiAgICAgICAgICAgIGxl
dCBkeSA9IHRoaXMuc3ZNeVRhbmsuWSAtIHRhcmdldFRhbmsuWTsNCiAgICAgICAgICAgIGlm
ICh0aGlzLm15QnVsbGV0cy5sZW5ndGggPj0gMykgew0KICAgICAgICAgICAgICAgIGlmICh0
aGlzLmluTXVzdERpZUFyZWEyKGR4LCBkeSkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhp
cy5sb2coImluIE11c3REaWVBcmVhIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0
cnVlOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRo
aXMubG9nKCJOT1QgaW4gTXVzdERpZUFyZWEiKTsNCiAgICAgICAgICAgICAgICAgICAgLy8g
6Z2e5b+F5p2A5qih5byP5Lmf5LiN5piv6LaF57qn5pS75Ye75qih5byP77yM5YiZ5LiN6IO9
5aSa546pM+S4quWtkOW8ue+8iOeVmeS4pOS4quWtkOW8ueWcqOW/headgOaXtuS9v+eUqO+8
iQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5TdXBlckF0dGFja01vZGUpIHsN
CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAg
ICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7luaDheWG
tei1sOS4i+mdog0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gMS4g5aaC5p6c5pa55ZCR
6YCa6YGT5YaF5Z2m5YWL5pWw6YeP5aSa5LqO5pyJ5pWI5a2Q5by55pWw6YeP77yM5YiZ5byA
54GrDQogICAgICAgIC8vIDIuIOeJueauiuaDheWGte+8jOWmguaenOmAmumBk+WGheacgOi/
keWdpuWFi+i3neemu+Wkp+S6juWNiuS4quWxj+W5le+8jOWImeWPquWPkeS4gOS4quWtkOW8
uQ0KICAgICAgICBsZXQgaW5mbyA9IHRoaXMuZ2V0VGFua0FuZEJ1bGxldHNJbmZvT25EaXJl
Y3Rpb25zKGRpcmVjdGlvbik7DQogICAgICAgIGxldCB0YW5rQ291bnQgPSBpbmZvWzBdOw0K
ICAgICAgICBsZXQgbXlCdWxsZXRDb3VudCA9IGluZm9bMV07DQogICAgICAgIGxldCBuZWFy
ZXN0RGlzdGFuY2UgPSBpbmZvWzJdOw0KICAgICAgICBpZiAodGFua0NvdW50IDw9IDApIHsN
CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmVy
cm9yKCJuZWFyZXN0RGlzdGFuY2UiLCBuZWFyZXN0RGlzdGFuY2UpOw0KICAgICAgICBpZiAo
bmVhcmVzdERpc3RhbmNlIDw9IGNhbnZhcy53aWR0aCozLzQpIHsNCiAgICAgICAgICAgIGxl
dCBzcGFyZU51bSA9IDE7DQogICAgICAgICAgICBpZiAodGFyZ2V0VGFuayA9PT0gdGhpcy5l
bmVteVRhbmspIHsNCiAgICAgICAgICAgICAgICBsZXQgZHggPSB0aGlzLnN2TXlUYW5rLlgg
LSB0YXJnZXRUYW5rLlg7DQogICAgICAgICAgICAgICAgbGV0IGR5ID0gdGhpcy5zdk15VGFu
ay5ZIC0gdGFyZ2V0VGFuay5ZOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmluTXVzdERp
ZUFyZWEyKGR4LCBkeSkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8g5LiN6IO95ZCd5oOc
5a2Q5by5DQogICAgICAgICAgICAgICAgICAgIHNwYXJlTnVtID0gMTsNCiAgICAgICAgICAg
ICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBzcGFyZU51bSA9IDA7DQogICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG15QnVsbGV0
Q291bnQgPCB0YW5rQ291bnQrc3BhcmVOdW0pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4g
dHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGxl
dCBtYXhCdWxsZXRzQ291bnQgPSAyOw0KICAgICAgICAgICAgaWYgKHRhcmdldFRhbmsgPT09
IHRoaXMuZW5lbXlUYW5rKSB7DQogICAgICAgICAgICAgICAgbGV0IGR4ID0gdGhpcy5zdk15
VGFuay5YIC0gdGFyZ2V0VGFuay5YOw0KICAgICAgICAgICAgICAgIGxldCBkeSA9IHRoaXMu
c3ZNeVRhbmsuWSAtIHRhcmdldFRhbmsuWTsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5p
bk11c3REaWVBcmVhMihkeCwgZHkpKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOS4jeiD
veWQneaDnOWtkOW8uQ0KICAgICAgICAgICAgICAgICAgICBtYXhCdWxsZXRzQ291bnQgPSAy
Ow0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIG1heEJ1
bGxldHNDb3VudCA9IDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0K
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG15QnVsbGV0Q291bnQgPCBtYXhCdWxs
ZXRzQ291bnQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgZ2V0
VGFua0FuZEJ1bGxldHNJbmZvT25EaXJlY3Rpb25zKGRpcmVjdGlvbikgew0KICAgICAgICBs
ZXQgdGFua0NvdW50ID0gMDsNCiAgICAgICAgbGV0IG15QnVsbGV0Q291bnQgPSAwOw0KICAg
ICAgICBsZXQgbWluWU9uVXAgPSBjYW52YXMuaGVpZ2h0Ow0KICAgICAgICBsZXQgbWF4WU9u
VXAgPSAtMTsNCg0KICAgICAgICBsZXQgbWluWU9uRG93biA9IGNhbnZhcy5oZWlnaHQ7DQog
ICAgICAgIGxldCBtYXhZT25Eb3duID0gLTE7DQoNCiAgICAgICAgbGV0IG1pblhPbkxlZnQg
PSBjYW52YXMud2lkdGg7DQogICAgICAgIGxldCBtYXhYT25MZWZ0ID0gLTE7DQoNCiAgICAg
ICAgbGV0IG1pblhPblJpZ2h0ID0gY2FudmFzLndpZHRoOw0KICAgICAgICBsZXQgbWF4WE9u
UmlnaHQgPSAtMTsNCg0KICAgICAgICBsZXQgbmVhcmVzdERpc3RhbmNlID0gMDsNCiAgICAg
ICAgZm9yKGxldCBpPTA7aTx0aGlzLmFsbEVuZW15VGFuay5sZW5ndGg7aSsrKSB7DQogICAg
ICAgICAgICBsZXQgZW5lbXkgPSB0aGlzLmFsbEVuZW15VGFua1tpXTsNCiAgICAgICAgICAg
IGlmICh0aGlzLmlzQmxvY2tCeU1ldGFsKHRoaXMuc3ZNeVRhbmssIGVuZW15KSkgew0KICAg
ICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc3dp
dGNoIChkaXJlY3Rpb24pIHsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9O
LlVQOg0KICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5zdk15VGFuay5Y
IC0gZW5lbXkuWCkgPCB0aGlzLk1JTl9GSVJFX09GRlNFVCAmJiBlbmVteS5ZIDwgdGhpcy5z
dk15VGFuay5ZKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0YW5rQ291bnQgKys7DQog
ICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5lbXkuWSA8IG1pbllPblVwKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbWluWU9uVXAgPSBlbmVteS5ZOw0KICAgICAgICAg
ICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZW15Llkg
PiBtYXhZT25VcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFlPblVwID0g
ZW5lbXkuWTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWFyZXN0RGlzdGFuY2Ug
PSB0aGlzLnN2TXlUYW5rLlkgLSBtYXhZT25VcDsNCiAgICAgICAgICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsN
CiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLlJJR0hUOg0KICAgICAgICAg
ICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5zdk15VGFuay5ZIC0gZW5lbXkuWSkgPCB0
aGlzLk1JTl9GSVJFX09GRlNFVCAmJiBlbmVteS5YID4gdGhpcy5zdk15VGFuay5YKSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICB0YW5rQ291bnQgKys7DQogICAgICAgICAgICAgICAg
ICAgICAgICBpZiAoZW5lbXkuWCA+IG1heFhPblJpZ2h0KSB7DQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbWF4WE9uUmlnaHQgPSBlbmVteS5YOw0KICAgICAgICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZW15LlggPCBtaW5YT25S
aWdodCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblhPblJpZ2h0ID0gZW5l
bXkuWDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWFyZXN0RGlzdGFuY2UgPSBt
aW5YT25SaWdodCAtIHRoaXMuc3ZNeVRhbmsuWDsNCiAgICAgICAgICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsN
CiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLkRPV046DQogICAgICAgICAg
ICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlggLSBlbmVteS5YKSA8IHRo
aXMuTUlOX0ZJUkVfT0ZGU0VUICYmIGVuZW15LlkgPiB0aGlzLnN2TXlUYW5rLlkpIHsNCiAg
ICAgICAgICAgICAgICAgICAgICAgIHRhbmtDb3VudCArKzsNCiAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIChlbmVteS5ZID4gbWF4WU9uRG93bikgew0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG1heFlPbkRvd24gPSBlbmVteS5ZOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZW15LlkgPCBtaW5ZT25Eb3du
KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWU9uRG93biA9IGVuZW15Llk7
DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVhcmVzdERpc3RhbmNlID0gbWluWU9u
RG93biAtIHRoaXMuc3ZNeVRhbmsuWTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAg
ICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLkxFRlQ6DQogICAgICAgICAgICAgICAg
ICAgIGlmIChNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlkgLSBlbmVteS5ZKSA8IHRoaXMuTUlO
X0ZJUkVfT0ZGU0VUICYmIGVuZW15LlggPCB0aGlzLnN2TXlUYW5rLlgpIHsNCiAgICAgICAg
ICAgICAgICAgICAgICAgIHRhbmtDb3VudCArKzsNCiAgICAgICAgICAgICAgICAgICAgICAg
IGlmIChlbmVteS5YIDwgbWluWE9uTGVmdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIG1pblhPbkxlZnQgPSBlbmVteS5YOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZW15LlggPiBtYXhYT25MZWZ0KSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WE9uTGVmdCA9IGVuZW15Llg7DQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbmVhcmVzdERpc3RhbmNlID0gdGhpcy5zdk15VGFu
ay5YIC0gbWF4WE9uTGVmdDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZvcihsZXQgaT0wO2k8dGhpcy5teUJ1bGxldHMu
bGVuZ3RoO2krKykgew0KICAgICAgICAgICAgbGV0IGJ1bGxldCA9IHRoaXMubXlCdWxsZXRz
W2ldOw0KICAgICAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHsNCiAgICAgICAgICAgICAg
ICBjYXNlIHRoaXMuRElSRUNUSU9OLlVQOg0KICAgICAgICAgICAgICAgICAgICBpZiAoTWF0
aC5hYnModGhpcy5zdk15VGFuay5YIC0gYnVsbGV0LlgpIDwgdGhpcy5UQU5LX1dJRFRIICYm
IGJ1bGxldC5ZIDwgdGhpcy5zdk15VGFuay5ZICYmIGJ1bGxldC5ZID4gbWluWU9uVXApIHsN
CiAgICAgICAgICAgICAgICAgICAgICAgIG15QnVsbGV0Q291bnQgKys7DQogICAgICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAg
ICAgY2FzZSB0aGlzLkRJUkVDVElPTi5SSUdIVDoNCiAgICAgICAgICAgICAgICAgICAgaWYg
KE1hdGguYWJzKHRoaXMuc3ZNeVRhbmsuWSAtIGJ1bGxldC5ZKSA8IHRoaXMuVEFOS19XSURU
SCAmJiBidWxsZXQuWCA+IHRoaXMuc3ZNeVRhbmsuWCAmJiBidWxsZXQuWCA8IG1heFhPblJp
Z2h0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBteUJ1bGxldENvdW50ICsrOw0KICAg
ICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAg
ICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgICAg
ICAgaWYgKE1hdGguYWJzKHRoaXMuc3ZNeVRhbmsuWCAtIGJ1bGxldC5YKSA8IHRoaXMuVEFO
S19XSURUSCAmJiBidWxsZXQuWSA+IHRoaXMuc3ZNeVRhbmsuWSAmJiBidWxsZXQuWSA8IG1h
eFlPbkRvd24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG15QnVsbGV0Q291bnQgKys7
DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQog
ICAgICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5MRUZUOg0KICAgICAgICAgICAg
ICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5zdk15VGFuay5ZIC0gYnVsbGV0LlkpIDwgdGhp
cy5UQU5LX1dJRFRIICYmIGJ1bGxldC5YIDwgdGhpcy5zdk15VGFuay5YICYmIGJ1bGxldC5Y
ID4gbWluWE9uTGVmdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbXlCdWxsZXRDb3Vu
dCArKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVh
azsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBbdGFua0Nv
dW50LCBteUJ1bGxldENvdW50LCBuZWFyZXN0RGlzdGFuY2VdOw0KICAgICAgICANCiAgICB9
DQoNCiAgICBjcmVhdGVJbWFnaW5hcnlCdWxsZXRzKCkgew0KICAgICAgICBsZXQgdyA9IGNh
bnZhcy53aWR0aDsNCiAgICAgICAgbGV0IGggPSBjYW52YXMuaGVpZ2h0Ow0KICAgICAgICBs
ZXQgaW1hZ2luYXJ5QnVsbGV0MSA9IG5ldyBCdWxsZXQoJ21ldGFsMScsIDAsIDEsIDQsIHcv
NCwgaC80KTsNCiAgICAgICAgbGV0IGltYWdpbmFyeUJ1bGxldDIgPSBuZXcgQnVsbGV0KCdt
ZXRhbDInLCAwLCAxLCA0LCB3KjMvNCwgaC80KTsNCiAgICAgICAgbGV0IGltYWdpbmFyeUJ1
bGxldDMgPSBuZXcgQnVsbGV0KCdtZXRhbDMnLCAwLCAxLCA0LCB3LzQsIGgqMy80KTsNCiAg
ICAgICAgbGV0IGltYWdpbmFyeUJ1bGxldDQgPSBuZXcgQnVsbGV0KCdtZXRhbDQnLCAwLCAx
LCA0LCB3KjMvNCwgaCozLzQpOw0KICAgICAgICBpbWFnaW5hcnlCdWxsZXQxLndpZHRoID0g
dGhpcy5JTUdJTkFSWV9CVUxMRVRfV0lEVEg7DQogICAgICAgIGltYWdpbmFyeUJ1bGxldDIu
d2lkdGggPSB0aGlzLklNR0lOQVJZX0JVTExFVF9XSURUSDsNCiAgICAgICAgaW1hZ2luYXJ5
QnVsbGV0My53aWR0aCA9IHRoaXMuSU1HSU5BUllfQlVMTEVUX1dJRFRIOw0KICAgICAgICBp
bWFnaW5hcnlCdWxsZXQ0LndpZHRoID0gdGhpcy5JTUdJTkFSWV9CVUxMRVRfV0lEVEg7DQog
ICAgICAgIHRoaXMuaW1hZ2luYXJ5TWV0YWxCdWxsZXRzLnB1c2goaW1hZ2luYXJ5QnVsbGV0
MSk7DQogICAgICAgIHRoaXMuaW1hZ2luYXJ5TWV0YWxCdWxsZXRzLnB1c2goaW1hZ2luYXJ5
QnVsbGV0Mik7DQogICAgICAgIHRoaXMuaW1hZ2luYXJ5TWV0YWxCdWxsZXRzLnB1c2goaW1h
Z2luYXJ5QnVsbGV0Myk7DQogICAgICAgIHRoaXMuaW1hZ2luYXJ5TWV0YWxCdWxsZXRzLnB1
c2goaW1hZ2luYXJ5QnVsbGV0NCk7DQogICAgfQ0KDQogICAgLy8g5qOA5p+l5piv5ZCm5aSE
5LqO5Y2x6Zmp5Lit77yM5bm26L+U5Zue5Y+v6KGM55qE5pa55ZCR5pWw57uEDQogICAgQ2hl
Y2tJZkluZGFuZ2VyQW5kQXZvaWQoaW5wdXREaXJlY3Rpb24pIHsNCiAgICAgICAgdGhpcy5s
b2coImlucHV0IGRpcmVjdGlvbiA6ICIsIHRoaXMuU1ZHZXREaXJlY3Rpb25TdHIoaW5wdXRE
aXJlY3Rpb24pKTsNCiAgICAgICAgbGV0IGZpbmFsRGlyZWN0aW9uID0gaW5wdXREaXJlY3Rp
b247DQogICAgICAgIC8vIOWmguaenOajgOa1i+WHuuWNsemZqe+8jOWImeiIjeW8g+i+k+WF
peaWueWQke+8jOmHjeaWsOiuoeeul+WHuuWPr+ihjOaWueWQke+8jOWQpuWImeS9v+eUqOi+
k+WFpeaWueWQkei/m+ihjOaOqOa8lDEtMuatpe+8jOWGjemAieaLqeaWueWQkQ0KICAgICAg
ICBsZXQgY3Jhc2ggPSBmYWxzZTsNCiAgICAgICAgLy8g5bGA6Z2i5oC75b6X5YiGDQogICAg
ICAgIGxldCB0b3RhbFNjb3JlID0gMDsNCiAgICAgICAgbGV0IGFsbENvbGxpZGVUaW1lID0g
IiI7DQogICAgICAgIGxldCBhbGxTY29yZSA9ICIiOw0KICAgICAgICAvLyDmo4DmtYvlrZDl
vLksIOaJvuWHuuWNsemZqeWtkOW8ueS7rA0KICAgICAgICB0aGlzLmFsbEVuZW15QnVsbGV0
cy5wdXNoLmFwcGx5KHRoaXMuYWxsRW5lbXlCdWxsZXRzLCBhQnVsbGV0Q291bnQpOw0KICAg
ICAgICBpZiAodGhpcy5pc0NvdW50ZXJTdHJpa2UoKSkgew0KICAgICAgICAgICAgdGhpcy5h
bGxFbmVteUJ1bGxldHMucHVzaC5hcHBseSh0aGlzLmFsbEVuZW15QnVsbGV0cywgdGhpcy5l
bmVteUJ1bGxldHMpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuYWxsRW5lbXlCdWxsZXRz
LnB1c2guYXBwbHkodGhpcy5hbGxFbmVteUJ1bGxldHMsIHRoaXMuaW1hZ2luYXJ5TWV0YWxC
dWxsZXRzKTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFsbEVuZW15QnVs
bGV0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgbGV0IGJ1bGxldCA9IHRoaXMuYWxs
RW5lbXlCdWxsZXRzW2ldOw0KICAgICAgICAgICAgaWYgKCFidWxsZXQuaGFzT3duUHJvcGVy
dHkoIndpZHRoIikpIHsNCiAgICAgICAgICAgICAgICBidWxsZXQud2lkdGggPSBidWxsZXRX
aWR0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxldCBkaXNIb3IgPSB0aGlzLnN2
TXlUYW5rLlggLSBidWxsZXQuWDsNCiAgICAgICAgICAgIGxldCBkaXNWZXIgPSB0aGlzLnN2
TXlUYW5rLlkgLSBidWxsZXQuWTsNCiAgICAgICAgICAgIGxldCBkYW5nZXJEaXMgPSB0YW5r
V2lkdGggKiA1Ow0KICAgICAgICAgICAgLy8g5Yid5aeL5YC8Ow0KICAgICAgICAgICAgYnVs
bGV0LmNvbGxpZGVUaW1lID0gLTI7IA0KICAgICAgICAgICAgaWYgKE1hdGgucG93KGRpc0hv
ciwgMikgKyBNYXRoLnBvdyhkaXNWZXIsIDIpIDw9IE1hdGgucG93KGRhbmdlckRpcywgMikp
IHsNCiAgICAgICAgICAgICAgICAvLyDljbHpmanlrZDlvLkNCiAgICAgICAgICAgICAgICBp
ZiAodGhpcy5ERUJVRykgew0KICAgICAgICAgICAgICAgICAgICBidWxsZXQuY29sb3IgPSAn
cmVkJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8g6K6h566X5Ye6
5a2Q5by55LiO5Z2m5YWL5b2T5YmN5L2N572u6Led55u45pKe55qE5pe26Ze0DQogICAgICAg
ICAgICAgICAgbGV0IGFycmF5ID0gdGhpcy5nZXRCdWxsZXRTY29yZUluZm8odGhpcy5zdk15
VGFuaywgYnVsbGV0LCAxKTsNCiAgICAgICAgICAgICAgICBpZiAoYXJyYXlbMF0pIHsNCiAg
ICAgICAgICAgICAgICAgICAgY3Jhc2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICB0b3RhbFNjb3JlICs9IGFycmF5WzFdOw0KICAgICAgICAgICAgICAg
IGFsbENvbGxpZGVUaW1lICs9IGFycmF5WzJdICsgIiB8ICI7DQogICAgICAgICAgICAgICAg
YWxsU2NvcmUgKz0gYXJyYXlbMV0gKyAiICI7DQoNCiAgICAgICAgICAgICAgICB0aGlzLmRh
bmdlckJ1bGxldHMucHVzaChidWxsZXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQog
ICAgICAgIGxldCBjdXJyZW50UG9zaXRpb25TY29yZSA9IHRoaXMuQkVTVF9TQ09SRTsNCiAg
ICAgICAgaWYgKHRoaXMuZGFuZ2VyQnVsbGV0cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAg
ICB0aGlzLmxvZygiaW4gZGFuZ2VyISEhIik7DQogICAgICAgICAgICB0aGlzLmxvZygiYWxs
Q29sbGlkZVRpbWUxIiwgYWxsQ29sbGlkZVRpbWUpOw0KICAgICAgICAgICAgdGhpcy5sb2co
ImFsbFNjb3JlMSIsIGFsbFNjb3JlKTsNCiAgICAgICAgICAgIHRoaXMubG9nKCJ0b3RhbFNj
b3JlMSIsIHRvdGFsU2NvcmUpOw0KICAgICAgICAgICAgdGhpcy5sb2coImJ1bGxldHMgY291
bnQiLCB0aGlzLmRhbmdlckJ1bGxldHMubGVuZ3RoKTsNCiAgICAgICAgICAgIGlmIChjcmFz
aCkgew0KICAgICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvblNjb3JlID0gdGhpcy5XT1JT
VF9TQ09SRTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvblNj
b3JlID0gdG90YWxTY29yZS90aGlzLmRhbmdlckJ1bGxldHMubGVuZ3RoOw0KICAgICAgICB9
IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5sb2coInNhZmUhISEiKTsNCiAgICAgICAgfQ0K
DQoNCiAgICAgICAgdGhpcy5sb2coImN1cnJlbnRQb3NpdGlvblNjb3JlOiIsIGN1cnJlbnRQ
b3NpdGlvblNjb3JlKTsNCg0KICAgICAgICBpZiAoY3VycmVudFBvc2l0aW9uU2NvcmUgPCB0
aGlzLkJFU1RfU0NPUkUpIHsNCiAgICAgICAgICAgIHRoaXMuZXJyb3IoIuajgOa1i+acieWN
semZqe+8jOmBjeWOhuWQhOS4quaWueWQkeiOt+WPluW+l+WIhiIpOw0KICAgICAgICAgICAg
Ly8g5pyJ5Y2x6Zmp77yM6ZyA6KaB5omn6KGM6Lqy6YG/562W55WlDQogICAgICAgICAgICAv
LyDpgY3ljobmr4/kuKrmlrnlkJHvvIzlkJHlkI7mjqjmvJTkuIDmraXvvIzmo4Dmn6Xlvpfl
iIYNCiAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5maW5kUmVjb21tZW5kUGF0
aCh0aGlzLnN2QWxsRGlyZWN0aW9ucywgY3VycmVudFBvc2l0aW9uU2NvcmUpOw0KDQogICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyDmsqHmnInljbHpmanvvIzkv53nlKjovpPl
haXnmoTmlrnlkJHov5vooYzkuIvkuIDmraXmjqjmvJTvvIzlho3pgInmi6nmlrnlkJENCiAg
ICAgICAgICAgIHRoaXMubG9nKCLmo4DmtYvmsqHmnInljbHpmanvvIzkvb/nlKjovpPlhaXm
lrnlkJHov5vooYzmjqjmvJQiKTsNCiAgICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuc2Nv
cmVPZkRpcmVjdGlvbihbZmluYWxEaXJlY3Rpb25dLCAxKTsNCiAgICAgICAgICAgIGxldCBz
Y29yZSA9IGFycmF5WzBdOw0KICAgICAgICAgICAgdGhpcy5sb2coIuaOqOa8lOWQjuW+l+WI
hu+8miIgKyBzY29yZSk7DQogICAgICAgICAgICBpZiAoc2NvcmUgPCBjdXJyZW50UG9zaXRp
b25TY29yZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoIuS9v+eUqOi+k+WFpeaW
ueWQkeaOqOa8lOacieWNsemZqSIpOw0KICAgICAgICAgICAgICAgIC8vIOWNsemZqe+8jOaU
ueWPmOaWueWQkQ0KICAgICAgICAgICAgICAgIGxldCB0ZW1wRGlyZWN0aW9ucyA9IFtdOw0K
ICAgICAgICAgICAgICAgIHRoaXMuc3ZBbGxEaXJlY3Rpb25zLmZvckVhY2goZGlyZWN0aW9u
ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8g5o6S6Zmk5o6J5pyJ5Y2x6Zmp55qE5pa5
5ZCR5LiN5YaN6YGN5Y6GDQogICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09
IGZpbmFsRGlyZWN0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wRGlyZWN0
aW9ucy5wdXNoKGRpcmVjdGlvbik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5m
aW5kUmVjb21tZW5kUGF0aCh0ZW1wRGlyZWN0aW9ucywgc2NvcmUpOw0KDQogICAgICAgICAg
ICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmxvZygiZmluYWxEaXJlY3Rpb24iLCB0
aGlzLlNWR2V0RGlyZWN0aW9uU3RyKGZpbmFsRGlyZWN0aW9uKSk7DQoNCiAgICAgICAgLy8g
VE9ETyBTQ0og5qC55o2u6Lqy6YG/5pe26L+U5Zue55qE5Y+v6KGM55qE5pa55ZCR5ZKM6Led
56a755uu5qCH6L+c6L+R5Yaz5a6a5Ye65LiA5Liq5pyA57uI5pa55ZCRDQogICAgICAgIHJl
dHVybiBmaW5hbERpcmVjdGlvbjsNCiAgICB9DQoNCg0KICAgIGZpbmRSZWNvbW1lbmRQYXRo
KGlucHV0RGlyZWN0aW9ucywgY3VycmVudFNjb3JlKSB7DQogICAgICAgIGxldCBzdGFuZEJ5
UGF0aCA9IHVuZGVmaW5lZDsNCiAgICAgICAgbGV0IGJlc3RQYXRoID0gdW5kZWZpbmVkOw0K
ICAgICAgICBsZXQgcGF0aHMgPSBbXTsNCiAgICAgICAgaW5wdXREaXJlY3Rpb25zLmZvckVh
Y2goZGlyZWN0aW9uID0+IHsNCiAgICAgICAgICAgIGxldCBtb3ZlbWVudHMgPSBbXTsNCiAg
ICAgICAgICAgIG1vdmVtZW50cy5wdXNoKHRoaXMuTW92ZW1lbnQoZGlyZWN0aW9uLCAwKSk7
DQogICAgICAgICAgICBsZXQgcGF0aCA9IHRoaXMuUGF0aCgpOw0KICAgICAgICAgICAgcGF0
aC5tb3ZlbWVudHMgPSBtb3ZlbWVudHM7DQogICAgICAgICAgICBwYXRocy5wdXNoKHBhdGgp
Ow0KICAgICAgICB9KTsNCg0KICAgICAgICBsZXQgcmVjb21tZW5kUGF0aCA9IHVuZGVmaW5l
ZDsNCg0KICAgICAgICBmb3IobGV0IGk9MTsgaTw9dGhpcy5NQVhfREVEVUNFX0NPVU5UOyBp
KyspIHsNCiAgICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuZGVkdWNlKHBhdGhzLCBpKTsN
CiAgICAgICAgICAgIHBhdGhzID0gYXJyYXlbMF07DQogICAgICAgICAgICBiZXN0UGF0aCA9
IGFycmF5WzFdOw0KICAgICAgICAgICAgc3RhbmRCeVBhdGggPSBhcnJheVsyXTsNCiAgICAg
ICAgICAgIGlmIChiZXN0UGF0aCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAg
cmVjb21tZW5kUGF0aCA9IGJlc3RQYXRoOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAg
ICAgICAgICAgfSBlbHNlIGlmIChzdGFuZEJ5UGF0aCAhPT0gdW5kZWZpbmVkKSB7DQogICAg
ICAgICAgICAgICAgcmVjb21tZW5kUGF0aCA9IHN0YW5kQnlQYXRoOw0KICAgICAgICAgICAg
ICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgbGV0IGZp
bmFsRGlyZWN0aW9uOw0KICAgICAgICBsZXQgaGlnaGVzdFNjb3JlID0gdGhpcy5XT1JTVF9T
Q09SRTsNCg0KICAgICAgICBpZiAocmVjb21tZW5kUGF0aCAhPT0gdW5kZWZpbmVkKSB7DQog
ICAgICAgICAgICAvLyDmib7liLDkuobmnIDlpb3nmoTot6/lvoTmiJblpIfnlKjot6/lvoQN
CiAgICAgICAgICAgIHRoaXMubG9nKCJmaW5kIGJlc3QgcGF0aCA6ICIsIHJlY29tbWVuZFBh
dGgubW92ZW1lbnRzKTsNCiAgICAgICAgICAgIHRoaXMubG9nKCLmnIDnu4jmjqjmvJTmjqjo
jZDot6/lvoTvvJoiLCByZWNvbW1lbmRQYXRoLm1vdmVtZW50cyk7DQogICAgICAgICAgICBo
aWdoZXN0U2NvcmUgPSByZWNvbW1lbmRQYXRoLm1vdmVtZW50c1tyZWNvbW1lbmRQYXRoLm1v
dmVtZW50cy5sZW5ndGgtMV0uc2NvcmU7DQogICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9
IHJlY29tbWVuZFBhdGgubW92ZW1lbnRzWzBdLmRpcmVjdGlvbjsNCiAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgIC8vIOWmguaenDLmraXmjqjmvJTkuYvlkI7ku43nhLbmsqHmnInm
ib7liLDmnIDkvbPot6/lvoTvvIzliJnph4fnlKjkuIDnm7TlvoDkuIDkuKrmlrnlkJHnp7vl
iqjnmoTnrZbnlaXljrvmib4NCiAgICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuZGVkdWNl
Rm9yT25lRGlyZWN0aW9uKHRoaXMuZGFuZ2VyQnVsbGV0cyk7DQogICAgICAgICAgICBmaW5h
bERpcmVjdGlvbiA9IGFycmF5WzBdOw0KICAgICAgICAgICAgbGV0IGhpZ2hlc3RTY29yZUZy
b21EZWVwRGVkdWNlID0gYXJyYXlbMV07DQogICAgICAgICAgICB0aGlzLmxvZygiZmluYWwg
ZGlyZWN0aW9uIGZyb20gZGVlcCBkZWR1Y2UgaXMgIiAsIGZpbmFsRGlyZWN0aW9uKTsNCiAg
ICAgICAgICAgIGlmIChoaWdoZXN0U2NvcmVGcm9tRGVlcERlZHVjZSA9PT0gdGhpcy5CRVNU
X1NDT1JFKSB7DQogICAgICAgICAgICAgICAgaGlnaGVzdFNjb3JlID0gaGlnaGVzdFNjb3Jl
RnJvbURlZXBEZWR1Y2U7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg
IC8vIOWmguaenOS+neeEtuayoeacieaJvuWIsOacgOS9s+i3r+W+hO+8jOmAieS4quWIhuac
gOmrmOeahO+8jOWQrOWkqeeUseWRvQ0KICAgICAgICAgICAgICAgIHRoaXMubG9nKCJub3Qg
ZmluZCBiZXN0IHBhdGggYW5kIHBhdGhzIGNvdW50IDogIiwgcGF0aHMubGVuZ3RoKTsNCiAg
ICAgICAgICAgICAgICAvLyDmnKrmib7liLDmnIDlpb3ot6/lvoTvvIzkvb/nlKjlvpfliIbm
nIDpq5jnmoTpgqPkuKoNCiAgICAgICAgICAgICAgICBwYXRocy5zb3J0KHRoaXMuc29ydFBh
dGhzKTsNCiAgICAgICAgICAgICAgICBpZiAocGF0aHMubGVuZ3RoID4gMCkgew0KICAgICAg
ICAgICAgICAgICAgICByZWNvbW1lbmRQYXRoID0gcGF0aHNbMF07DQogICAgICAgICAgICAg
ICAgICAgIGxldCB0ZW1wSGlnaGVzdFNjb3JlID0gcmVjb21tZW5kUGF0aC5tb3ZlbWVudHNb
cmVjb21tZW5kUGF0aC5tb3ZlbWVudHMubGVuZ3RoLTFdLnNjb3JlOw0KICAgICAgICAgICAg
ICAgICAgICAvLyDpgInmi6nlh7oy5q2l5o6o5ryU5LiO5aSa5q2l5ZCM5pa55ZCR5o6o5ryU
5Lit5b6X5YiG5pyA6auY55qEDQogICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wSGlnaGVz
dFNjb3JlID4gaGlnaGVzdFNjb3JlRnJvbURlZXBEZWR1Y2UpIHsNCiAgICAgICAgICAgICAg
ICAgICAgICAgIGhpZ2hlc3RTY29yZSA9IHRlbXBIaWdoZXN0U2NvcmU7DQogICAgICAgICAg
ICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHJlY29tbWVuZFBhdGgubW92ZW1lbnRz
WzBdLmRpcmVjdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgICAgICBsZXQgcGF0aGVzID0gInBhdGhzIGZyb20gZGVkdWNlMiA6
ICI7DQogICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxwYXRocy5sZW5ndGg7aSsrKSB7
DQogICAgICAgICAgICAgICAgICAgIGxldCBwYXRoID0gcGF0aHNbaV07DQogICAgICAgICAg
ICAgICAgICAgIHBhdGhlcyArPSAiWyIgKyBwYXRoLm1vdmVtZW50c1swXS5kaXJlY3Rpb24g
KyAiLSIgKyBwYXRoLm1vdmVtZW50c1swXS5zY29yZSArICIsICIgKyBwYXRoLm1vdmVtZW50
c1sxXS5kaXJlY3Rpb24gKyAiLSIgKyBwYXRoLm1vdmVtZW50c1sxXS5zY29yZSArICJdLCAi
Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmxvZygicGF0aDI6
IiwgcGF0aGVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMu
bG9nKCJoaWdoZXN0IHNjb3JlIGlzICIsIGhpZ2hlc3RTY29yZSk7DQogICAgICAgIGlmICho
aWdoZXN0U2NvcmUgPj0gY3VycmVudFNjb3JlKSB7DQogICAgICAgICAgICB0aGlzLmxvZygi
ZmluYWwgdXNlIHRoaXMgZGlyZWN0aW9uIiwgdGhpcy5TVkdldERpcmVjdGlvblN0cihmaW5h
bERpcmVjdGlvbikpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5lcnJv
cigiU1RPUCA6IOmcgOimgeaPkOWJjei/m+ihjOa3seS4gOWxguaOqOa8lCIpOw0KICAgICAg
ICB9DQogICAgICAgIHJldHVybiBmaW5hbERpcmVjdGlvbjsNCiAgICB9DQoNCiAgICBkZWR1
Y2VJZkNyYXNoRm9ySW1hZ2luQnVsbGV0cyhidWxsZXRzKSB7DQogICAgICAgIGZvcihsZXQg
az0wO2s8dGhpcy5zdk5vU3RvcERpcmVjdGlvbnMubGVuZ3RoO2srKykgew0KICAgICAgICAg
ICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuc3ZOb1N0b3BEaXJlY3Rpb25zW2tdOw0KICAgICAg
ICAgICAgbGV0IGNyYXNoID0gZmFsc2U7DQogICAgICAgICAgICBmb3IobGV0IGk9MTtpPD0x
MCAmJiAhY3Jhc2g7IGkrKykgew0KICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMu
c2NvcmVPZk5TYW1lRGlyZWN0aW9ucyhkaXJlY3Rpb24sIGksIGJ1bGxldHMsIHRoaXMudGFy
Z2V0VGFua0luZm9bMl0pOw0KICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IDApIHsNCiAg
ICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlID09PSB0aGlzLkJFU1RfU0NPUkUpIHsNCiAg
ICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNy
YXNoID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgLy8g55u45pKe5LqG77yM6IiN5byD
5b2T5YmN5pa55ZCRDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoIm5vIGJlc3Qg
c2NvcmUgaW4gdGhpcyBkZXJlY3Rpb24iLCB0aGlzLlNWR2V0RGlyZWN0aW9uU3RyKGRpcmVj
dGlvbikpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0K
ICAgICAgICAvLyDmsqHmnInmnIDlpb3nmoTliIbmlbDnmoTmg4XlhrXkuIvvvIzov5Tlm550
cnVlLOWNs+aJgOacieaWueWQkemDveS8muebuOaSng0KICAgICAgICByZXR1cm4gdHJ1ZTsN
CiAgICB9DQoNCiAgICBkZWR1Y2VGb3JPbmVEaXJlY3Rpb24oYnVsbGV0cykgew0KICAgICAg
ICBsZXQgaGlnaGVzdFNjb3JlID0gdGhpcy5XT1JTVF9TQ09SRTsNCiAgICAgICAgbGV0IGRp
cmVjdGlvbk9uTm9CZXN0ID0gdGhpcy5ESVJFQ1RJT04uU1RPUDsNCiAgICAgICAgZm9yKGxl
dCBrPTA7azx0aGlzLnN2Tm9TdG9wRGlyZWN0aW9ucy5sZW5ndGg7aysrKSB7DQogICAgICAg
ICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5zdk5vU3RvcERpcmVjdGlvbnNba107DQogICAg
ICAgICAgICBsZXQgY3Jhc2ggPSBmYWxzZTsNCiAgICAgICAgICAgIGZvcihsZXQgaT0xO2k8
PXRoaXMuTUFYX0RFRFVDRV9DT1VOVF9GT1JfT05FX0RJUiAmJiAhY3Jhc2g7IGkrKykgew0K
ICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVPZk5TYW1lRGlyZWN0aW9u
cyhkaXJlY3Rpb24sIGksIGJ1bGxldHMsIHRoaXMuc3ZNeVRhbmspOw0KICAgICAgICAgICAg
ICAgIC8vIOWJjeS4pOasoeeahOmBjeWOhuWMheWQq+WcqOS6hmRlZHVjZTLph4zpnaLvvIzk
uI3lupTor6XkuZ/kuI3pnIDopoHorqHnrpflnKjlhoUNCiAgICAgICAgICAgICAgICBpZiAo
c2NvcmUgPiBoaWdoZXN0U2NvcmUgJiYgaT4yKSB7DQogICAgICAgICAgICAgICAgICAgIGhp
Z2hlc3RTY29yZSA9IHNjb3JlOw0KICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25Pbk5v
QmVzdCA9IGRpcmVjdGlvbjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAg
aWYgKHNjb3JlID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPT09IHRo
aXMuQkVTVF9TQ09SRSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtkaXJl
Y3Rpb24sIHRoaXMuQkVTVF9TQ09SRV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjcmFzaCA9IHRydWU7
DQogICAgICAgICAgICAgICAgICAgIC8vIOebuOaSnuS6hu+8jOiIjeW8g+W9k+WJjeaWueWQ
kQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yKCJubyBiZXN0IHNjb3JlIGluIHRo
aXMgZGVyZWN0aW9uIiwgdGhpcy5TVkdldERpcmVjdGlvblN0cihkaXJlY3Rpb24pKTsNCiAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8g
5rKh5pyJ5pyA5aW955qE5YiG5pWw55qE5oOF5Ya15LiL77yM6L+U5Zue5pyA6auY5YiG5Y+K
5YW25pa55ZCRDQogICAgICAgIHJldHVybiBbZGlyZWN0aW9uT25Ob0Jlc3QsIGhpZ2hlc3RT
Y29yZV07DQogICAgfQ0KDQogICAgZGVkdWNlKHBhdGhzLCBzdGVwKSB7DQogICAgICAgIGlm
IChzdGVwID09PSAxKSB7DQogICAgICAgICAgICAvLyDnrKzkuIDmraXlvpfliLDnmoTkuLpX
T1JTVF9TQ09SReeahOaWueWQkeimgeiIjeW8gw0KICAgICAgICAgICAgbGV0IHJlc3VsdFBh
dGhzID0gW107DQogICAgICAgICAgICAvLyDlpIfpgInot6/lvoQNCiAgICAgICAgICAgIGxl
dCBzdGFuZEJ5UGF0aCA9IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIC8vIOacgOWlvei3r+W+
hA0KICAgICAgICAgICAgbGV0IGJlc3RQYXRoID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAg
dGhpcy5sb2coImRlZHVjZTE9PT09PT09PT09PT09PT09PT4iKTsNCiAgICAgICAgICAgIGZv
cihsZXQgaT0wO2k8cGF0aHMubGVuZ3RoO2krKykgew0KICAgICAgICAgICAgICAgIGxldCBw
YXRoID0gcGF0aHNbaV07DQogICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHBhdGgu
bW92ZW1lbnRzWzBdLmRpcmVjdGlvbjsNCiAgICAgICAgICAgICAgICBsZXQgYXJyYXkgPSB0
aGlzLnNjb3JlT2ZEaXJlY3Rpb24oW2RpcmVjdGlvbl0sIDEpOw0KICAgICAgICAgICAgICAg
IGxldCBzY29yZSA9IGFycmF5WzBdOw0KICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hcnlU
YW5rID0gYXJyYXlbMV07DQogICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gMCkgew0KICAg
ICAgICAgICAgICAgICAgICBwYXRoLm1vdmVtZW50c1swXS5zY29yZSA9IHNjb3JlOw0KICAg
ICAgICAgICAgICAgICAgICByZXN1bHRQYXRocy5wdXNoKHBhdGgpOw0KICAgICAgICAgICAg
ICAgICAgICBpZiAoc2NvcmUgPT09IHRoaXMuQkVTVF9TQ09SRSkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgLy8g5aaC5p6c6JC954K55L2N572u5LiN5L2z77yM5YiZ57un57ut5a+7
5om+5YW25LuW5pa55ZCRDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmVPZlBv
c2l0aW9uID0gdGhpcy5pbWFnaW5hcnlUYW5rUG9zaXRpb25TY29yZShpbWFnaW5hcnlUYW5r
KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZU9mUG9zaXRpb24gPCAwKSB7
DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRCeVBhdGggPSBwYXRoOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBiZXN0UGF0aCA9IHBhdGg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJl
YWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0N
CiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmxv
ZygiZGVkdWNlMTw9PT09PT09PT09PT09PT09PSIpOw0KICAgICAgICAgICAgcmV0dXJuIFty
ZXN1bHRQYXRocywgYmVzdFBhdGgsIHN0YW5kQnlQYXRoXTsNCiAgICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAgIHRoaXMubG9nKCJkZWR1Y2UiICsgc3RlcCArICI9PT09PT09PT09PT09
PT09PT09PT0+Iik7DQogICAgICAgICAgICBsZXQgc3RhbmRieVBhdGggPSB1bmRlZmluZWQ7
DQogICAgICAgICAgICBsZXQgYmVzdFBhdGggPSB1bmRlZmluZWQ7DQogICAgICAgICAgICBs
ZXQgZmluYWxQYXRocyA9IFtdOw0KICAgICAgICAgICAgbGV0IGZpbmRCZXN0ID0gZmFsc2U7
DQogICAgICAgICAgICBmb3IobGV0IGo9MDtqPHBhdGhzLmxlbmd0aDtqKyspIHsNCiAgICAg
ICAgICAgICAgICBsZXQgcGF0aCA9IHBhdGhzW2pdOw0KICAgICAgICAgICAgICAgIGxldCB0
ZW1wUGF0aHMgPSBbXTsNCiAgICAgICAgICAgICAgICBmb3IobGV0IGs9MDsgazx0aGlzLnN2
QWxsRGlyZWN0aW9ucy5sZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQg
ZGlyZWN0aW9uID0gdGhpcy5zdkFsbERpcmVjdGlvbnNba107DQogICAgICAgICAgICAgICAg
ICAgIGxldCBkaXJlY3Rpb25zID0gW107DQogICAgICAgICAgICAgICAgICAgIC8vIOaLvOaO
peaIkOaWsOeahOi3r+W+hA0KICAgICAgICAgICAgICAgICAgICBsZXQgbW92ZW1lbnRzID0g
cGF0aC5tb3ZlbWVudHM7DQogICAgICAgICAgICAgICAgICAgIG1vdmVtZW50cy5mb3JFYWNo
KG1vdmVtZW50ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbnMucHVz
aChtb3ZlbWVudC5kaXJlY3Rpb24pOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAg
ICAgICAgICAgICAgICAgZGlyZWN0aW9ucy5wdXNoKGRpcmVjdGlvbik7DQogICAgICAgICAg
ICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuc2NvcmVPZkRpcmVjdGlvbihkaXJlY3Rpb25z
LCBzdGVwKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gYXJyYXlbMF07DQog
ICAgICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hcnlUYW5rID0gYXJyYXlbMV07DQogICAg
ICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIGxldCB0ZW1wUGF0aCA9IHRoaXMuUGF0aCgpOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgbGV0IHRlbXBNb3ZlbWVudHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxl
dCB0ZW1wTW92ZW1lbnQgPSB0aGlzLk1vdmVtZW50KGRpcmVjdGlvbiwgc2NvcmUpOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgdGVtcE1vdmVtZW50cy5wdXNoLmFwcGx5KHRlbXBNb3Zl
bWVudHMsIG1vdmVtZW50cyk7DQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTW92ZW1l
bnRzLnB1c2godGVtcE1vdmVtZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQ
YXRoLm1vdmVtZW50cyA9IHRlbXBNb3ZlbWVudHM7DQogICAgICAgICAgICAgICAgICAgICAg
ICB0ZW1wUGF0aHMucHVzaCh0ZW1wUGF0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoc2NvcmUgPT09IHRoaXMuQkVTVF9TQ09SRSkgew0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIC8vIOaJvuWIsOacgOWlvei3r+W+hOWQjui/lOWbng0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIC8vIOeul3RhbmvkvY3nva7lvpfliIYNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBsZXQgc2NvcmVPZlBvc2l0aW9uID0gdGhpcy5pbWFnaW5hcnlUYW5rUG9z
aXRpb25TY29yZShpbWFnaW5hcnlUYW5rKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZiAoc2NvcmVPZlBvc2l0aW9uIDwgMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdGFuZGJ5UGF0aCA9IHRlbXBQYXRoOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RQ
YXRoID0gdGVtcFBhdGg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRC
ZXN0ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgICAgIGZpbmFsUGF0aHMucHVzaC5hcHBseShmaW5hbFBhdGhzLCB0ZW1wUGF0aHMpOw0K
ICAgICAgICAgICAgICAgIGlmIChmaW5kQmVzdCkgew0KICAgICAgICAgICAgICAgICAgICBi
cmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0
aGlzLmxvZygiZGVkdWNlIiArIHN0ZXAgKyAiPD09PT09PT09PT09PT09PT09PT09PSIpOw0K
ICAgICAgICAgICAgcmV0dXJuIFtmaW5hbFBhdGhzLCBiZXN0UGF0aCwgc3RhbmRieVBhdGhd
Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8g5b6A5ZCM5LiA5Liq5pa55ZCR5o6o5ryU
TuatpeWQjuWIhuaekOWxgOmdouW+l+WIhg0KICAgIHNjb3JlT2ZOU2FtZURpcmVjdGlvbnMo
ZGlyZWN0aW9uLCBzdGVwLCBidWxsZXRzLCB0YW5rKSB7DQogICAgICAgIGxldCBpbWFnaW5h
cnlUYW5rID0gdGhpcy5jb3B5T2ZUYW5rKHRhbmspOw0KICAgICAgICBpbWFnaW5hcnlUYW5r
LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjsNCg0KICAgICAgICB0aGlzLnByaW50TW92YWJsZVBv
cygiYmVmb3JlIG1vdmUiLCBpbWFnaW5hcnlUYW5rKTsNCiAgICAgICAgdGhpcy5wcmludEJ1
bGxldHNQb3MoImJlZm9yZSBtb3ZlIiwgYnVsbGV0cyk7DQoNCiAgICAgICAgbGV0IGFycmF5
ID0gdGhpcy5pbWFnaW5lQWxsTW92ZU5TdGVwRm9yT25lRGlyZWN0aW9uKGJ1bGxldHMsIGlt
YWdpbmFyeVRhbmssIHN0ZXApOw0KICAgICAgICBpbWFnaW5hcnlUYW5rID0gYXJyYXlbMF07
DQogICAgICAgIGJ1bGxldHMgPSBhcnJheVsxXTsNCiAgICAgICAgdGhpcy5sb2coIuW9k+WJ
jemBjeWOhueahOaWueWQkSgiICsgc3RlcCArICLmraUpPSIsIHRoaXMuU1ZHZXREaXJlY3Rp
b25TdHIoZGlyZWN0aW9uKSk7DQoNCiAgICAgICAgdGhpcy5wcmludE1vdmFibGVQb3MoImFm
dGVyIG1vdmUiLCBpbWFnaW5hcnlUYW5rKTsNCiAgICAgICAgdGhpcy5wcmludEJ1bGxldHNQ
b3MoImFmdGVyIG1vdmUiLCBidWxsZXRzKTsNCg0KICAgICAgICByZXR1cm4gdGhpcy5hbmFs
eXplQ3VycmVudFNpdHVhdGlvbihpbWFnaW5hcnlUYW5rLCBidWxsZXRzLCBzdGVwLCBkaXJl
Y3Rpb24pOw0KICAgIH0NCg0KICAgIC8vIOWQkeWQjuaOqOa8lHN0ZXDmraXlkI7liIbmnpDl
sYDpnaLlvpfliIYNCiAgICBzY29yZU9mRGlyZWN0aW9uKGRpcmVjdGlvbnMsIHN0ZXApIHsN
CiAgICAgICAgbGV0IGltYWdpbmFyeVRhbmsgPSB0aGlzLmNvcHlPZlRhbmsodGhpcy5zdk15
VGFuayk7DQogICAgICAgIGxldCBidWxsZXRzID0gdGhpcy5kYW5nZXJCdWxsZXRzOw0KDQog
ICAgICAgIHRoaXMucHJpbnRNb3ZhYmxlUG9zKCJiZWZvcmUgbW92ZSIsIGltYWdpbmFyeVRh
bmspOw0KICAgICAgICB0aGlzLnByaW50QnVsbGV0c1BvcygiYmVmb3JlIG1vdmUiLCBidWxs
ZXRzKTsNCg0KICAgICAgICBsZXQgaT0wOw0KICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2go
ZGlyZWN0aW9uID0+IHsNCiAgICAgICAgICAgIGltYWdpbmFyeVRhbmsuZGlyZWN0aW9uID0g
ZGlyZWN0aW9uOw0KICAgICAgICAgICAgbGV0IGZpcnN0U3RlcCA9IChpID09PSAwKTsNCiAg
ICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuaW1hZ2luZUFsbE1vdmVPbmVTdGVwKGJ1bGxl
dHMsIGltYWdpbmFyeVRhbmssIGZpcnN0U3RlcCk7DQogICAgICAgICAgICBpbWFnaW5hcnlU
YW5rID0gYXJyYXlbMF07DQogICAgICAgICAgICBidWxsZXRzID0gYXJyYXlbMV07DQogICAg
ICAgICAgICB0aGlzLmxvZygi5b2T5YmN6YGN5Y6G55qE5pa55ZCRPSIsIHRoaXMuU1ZHZXRE
aXJlY3Rpb25TdHIoZGlyZWN0aW9uKSk7DQogICAgICAgICAgICBpKys7DQogICAgICAgIH0p
Ow0KDQogICAgICAgIHRoaXMucHJpbnRNb3ZhYmxlUG9zKCJhZnRlciBtb3ZlIiwgaW1hZ2lu
YXJ5VGFuayk7DQogICAgICAgIHRoaXMucHJpbnRCdWxsZXRzUG9zKCJhZnRlciBtb3ZlIiwg
YnVsbGV0cyk7DQoNCiAgICAgICAgcmV0dXJuIFt0aGlzLmFuYWx5emVDdXJyZW50U2l0dWF0
aW9uKGltYWdpbmFyeVRhbmssIGJ1bGxldHMsIHN0ZXAsIGRpcmVjdGlvbnNbZGlyZWN0aW9u
cy5sZW5ndGgtMV0pLCBpbWFnaW5hcnlUYW5rXTsNCiAgICB9DQoNCiAgICBhbmFseXplQ3Vy
cmVudFNpdHVhdGlvbihpbWFnaW5hcnlUYW5rLCBidWxsZXRzLCBzdGVwLCBkaXJlY3Rpb24p
IHsNCiAgICAgICAgaWYgKGJ1bGxldHMubGVuZ3RoIDw9IDApIHsNCiAgICAgICAgICAgIHJl
dHVybiB0aGlzLkJFU1RfU0NPUkU7DQogICAgICAgIH0NCiAgICAgICAgbGV0IHRvdGFsU2Nv
cmUgPSAwOw0KICAgICAgICBsZXQgYWxsQ29sbGlkZVRpbWUgPSAiIjsNCiAgICAgICAgbGV0
IGFsbFNjb3JlID0gIiI7DQogICAgICAgIC8vIOeUqOS6juWIpOaWreaJgOacieWNsemZqeWt
kOW8ueeahOaWueWQkeaYr+WQpuebuOWQjO+8jOWmguaenOebuOWQjO+8jOWImeiIjeW8g+W+
gOWtkOW8ueebuOWQjOaWueWQkemAg+i3keeahOi3r+W+hO+8jOWmguaenOS4jeebuOWQjO+8
jOWImeW+gOebuOWQjOaWueWQkei3keaYr+acieWPr+iDvemAg+iEseeahA0KICAgICAgICBs
ZXQgYnVsbGV0RGlyZWN0aW9uID0gYnVsbGV0c1swXS5kaXJlY3Rpb247DQogICAgICAgIGxl
dCBhbGxCdWxsZXRzU2FtZURpcmVjdGlvbiA9IHRydWU7DQogICAgICAgIGxldCBpc0Jlc3RT
Y29yZSA9IHRydWU7DQogICAgICAgIGxldCBjcmFzaCA9IGZhbHNlOw0KICAgICAgICBmb3Io
bGV0IGk9MDsgaTxidWxsZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBsZXQgYnVs
bGV0ID0gYnVsbGV0c1tpXTsNCiAgICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuZ2V0QnVs
bGV0U2NvcmVJbmZvKGltYWdpbmFyeVRhbmssIGJ1bGxldCwgc3RlcCk7DQogICAgICAgICAg
ICB0b3RhbFNjb3JlICs9IGFycmF5WzFdOw0KICAgICAgICAgICAgYWxsQ29sbGlkZVRpbWUg
Kz0gYXJyYXlbMl0gKyAiIHwgIjsNCiAgICAgICAgICAgIGFsbFNjb3JlICs9IGFycmF5WzFd
ICsgIiAiOw0KICAgICAgICAgICAgaWYgKGFycmF5WzBdKSB7DQogICAgICAgICAgICAgICAg
Ly8g5pyJ55u45pKe55qE5oOF5Ya177yM55u05o6l5b6X5YiG5Li65pyA5Z2P5YiGDQogICAg
ICAgICAgICAgICAgY3Jhc2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGJ1bGxldERpcmVjdGlvbiAhPT0gYnVsbGV0
LmRpcmVjdGlvbikgew0KICAgICAgICAgICAgICAgIGFsbEJ1bGxldHNTYW1lRGlyZWN0aW9u
ID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoYXJyYXlbMV0gPCB0
aGlzLkJFU1RfU0NPUkUpIHsNCiAgICAgICAgICAgICAgICBpc0Jlc3RTY29yZSA9IGZhbHNl
Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmxvZygiYWxs
Q29sbGlkZVRpbWVBbmREaXN0YW5jZSA6ICIsIGFsbENvbGxpZGVUaW1lKTsNCiAgICAgICAg
dGhpcy5sb2coImFsbFNjb3JlOiIsIGFsbFNjb3JlKTsNCg0KICAgICAgICBpZiAoY3Jhc2gp
IHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLldPUlNUX1NDT1JFOw0KICAgICAgICB9DQoN
CiAgICAgICAgLy8g5omA5pyJ5a2Q5by56YO95piv5LiA5Liq5pa55ZCR77yM5LiU5pa55ZCR
5LiO5o6o5ryU5pa55ZCR55u45ZCM77yM5bm25LiU5q2k5pa55ZCR5LiN5piv5ruh5YiG77yM
5YiZ6IiN5byD5q2k5pa55ZCRDQogICAgICAgIGlmIChhbGxCdWxsZXRzU2FtZURpcmVjdGlv
biAmJiAhaXNCZXN0U2NvcmUgJiYgdGhpcy50YXJnZXRUYW5rSW5mb1syXSAhPT0gdGhpcy5l
bmVteVRhbmspIHsNCiAgICAgICAgICAgIGlmIChidWxsZXREaXJlY3Rpb24gPT09IGRpcmVj
dGlvbikgew0KICAgICAgICAgICAgICAgIC8vIOiIjeW8g+S4juWtkOW8ueaWueWQkeebuOWQ
jOeahOmAg+i3keaWueWQkQ0KICAgICAgICAgICAgICAgIC8vIOWPr+iDveS8muWHuueOsOmh
uuedgOaWueWQkei1sOWPr+S7pei6suW8gOiAjOS4jemhuuedgOaWueWQkei1sOWwsei6suS4
jeW8gOeahOaDheWGte+8iOS4pOS4quaWueWQkemDveacieWtkOW8uee7j+i/h+aXtuWHuueO
sO+8jOaIkeS7rOeOsOWcqOeahOetlueVpeaYr+S4jeWuueaYk+WHuueOsOi/meenjeaDheWG
teeahO+8iQ0KICAgICAgICAgICAgICAgIC8vIFRPRE8gU0NKIOi/mOacieS4gOenjeaDheWG
teS8muWvvOiHtOWdpuWFi+mhuuedgOWtkOW8ueeahOaWueWQkei1sO+8jOWNs+S4pOS4quWt
kOW8ueS7juS4iuS4i+S4pOi+ueS4gOi1t+e7j+i/h+eahOaXtuWAme+8jOaaguS4jeefpemB
k+S4uuS7gOS5iO+8jOWQjuacn+WGjeafpQ0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3Io
Imlnbm9yZSBkaXJlY3Rpb24gc2FtZSB3aXRoIGJ1bGxldCIpOw0KICAgICAgICAgICAgICAg
IHJldHVybiB0aGlzLldPUlNUX1NDT1JFOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoN
CiAgICAgICAgLy8g5ZCE5Liq5a2Q5by555qE5bmz5Z2H5YiG5L2c5Li65bGA6Z2i5b6X5YiG
DQogICAgICAgIHJldHVybiB0b3RhbFNjb3JlIC8gYnVsbGV0cy5sZW5ndGg7DQogICAgfQ0K
DQogICAgaW1hZ2luYXJ5VGFua1Bvc2l0aW9uU2NvcmUoaW1hZ2luYXJ5VGFuaykgew0KICAg
ICAgICBsZXQgdGFyZ2V0VGFuayA9IHRoaXMudGFyZ2V0VGFua0luZm9bMl07DQoNCiAgICAg
ICAgaWYgKHRhcmdldFRhbmsgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgLy8g55uu
5YmN55yL5piv5ri45oiP57uT5p2f5ZCO5om+5LiN5Yiw5pyA6L+R55qE5Z2m5YWL5a+86Ie0
55qEDQogICAgICAgICAgICB0aGlzLmVycm9yKCJzaGl0IGNoZWNrIik7DQogICAgICAgICAg
ICByZXR1cm4gMDsNCiAgICAgICAgfQ0KDQogICAgICAgIGxldCBjdXJEaXN0YW5jZSA9IHRo
aXMuZ2V0VGFua0Rpc3RhbmNlKHRoaXMuc3ZNeVRhbmssIHRhcmdldFRhbmspWzBdOw0KICAg
ICAgICBsZXQgaW1nRGlzdGFuY2UgPSB0aGlzLmdldFRhbmtEaXN0YW5jZShpbWFnaW5hcnlU
YW5rLCB0YXJnZXRUYW5rKVswXTsNCiAgICAgICAgaWYgKHRoaXMuaW5EYW5nZXJBcmVhKHRo
aXMuc3ZNeVRhbmssIHRhcmdldFRhbmspKSB7DQogICAgICAgICAgICAvLyDlpoLmnpzlvZPl
iY3lpITlnKjljbHpmanljLrln5/vvIzliJnlvoDmm7TljbHpmannmoTlnLDmlrnnmoTmlrnl
kJHlh4/liIYNCiAgICAgICAgICAgIGlmIChpbWdEaXN0YW5jZSA8IGN1ckRpc3RhbmNlKSB7
DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvcigibW9yZSBkYW5nZXIsIC0xIik7DQogICAg
ICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ug
ew0KICAgICAgICAgICAgLy8g5aaC5p6c5aSE5LqO6Z2e5Y2x6Zmp5Yy65Z+f77yM5YiZ5b6A
5pu05a6J5YWo55qE5Zyw5pa555qE5pa55ZCR5YeP5YiGDQogICAgICAgICAgICBpZiAoaW1n
RGlzdGFuY2UgPiBjdXJEaXN0YW5jZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3Io
Im1vcmUgc2FmZXIsIC0xIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiAwOw0KICAgIH0NCg0KICAgIGdl
dERpc3RhbmNlT2YoZHgxLCBkeTEpIHsNCiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRo
LnBvdyhkeDEsIDIpICsgTWF0aC5wb3coZHkxLCAyKSk7DQogICAgfQ0KDQogICAgZ2V0QnVs
bGV0U2NvcmVJbmZvKHRhbmssIGJ1bGxldCwgc3RlcCkgew0KICAgICAgICBsZXQgaGFzWmVy
byA9IGZhbHNlOw0KICAgICAgICBsZXQgdGVtcFNjb3JlID0gdGhpcy5CRVNUX1NDT1JFOw0K
ICAgICAgICAvLyDorqHnrpflh7rlrZDlvLnkuI7lnablhYvlvZPliY3kvY3nva7ot53nm7jm
kp7nmoTml7bpl7QNCiAgICAgICAgYnVsbGV0LmNvbGxpZGVUaW1lID0gdGhpcy5nZXRDb2xs
aWRlU3RlcHNPbkJ1bGxldHNNb3ZlKHRhbmssIGJ1bGxldCk7DQogICAgICAgIGxldCBjb2xs
aWRlSW5mbyA9IGJ1bGxldC5jb2xsaWRlVGltZSArICIgIjsNCiAgICAgICAgaWYgKGJ1bGxl
dC5jb2xsaWRlVGltZSA9PT0gMCkgew0KICAgICAgICAgICAgLy8g5pyJ5pKe5Ye755qE5oOF
5Ya177yM55u05o6l5b6XMOWIhg0KICAgICAgICAgICAgaGFzWmVybyA9IHRydWU7DQogICAg
ICAgICAgICB0ZW1wU2NvcmUgPSB0aGlzLldPUlNUX1NDT1JFOw0KICAgICAgICB9IGVsc2Ug
ew0KICAgICAgICAgICAgaWYgKGJ1bGxldC5jb2xsaWRlVGltZSA+IDAgJiYgYnVsbGV0LmNv
bGxpZGVUaW1lIDwgdGhpcy5EQU5HRVJfU1RFUCkgew0KICAgICAgICAgICAgICAgIC8vIOW+
gOWQjuaOqOa8lHN0ZXDlkI7kvJrmm7Tlv6vpgJ/mkp7lh7vliLDvvIwg5omA5Lul5Yqg5LiA
5Liqc3RlcOi/m+ihjOWIhuaVsOS/ruatow0KICAgICAgICAgICAgICAgIHRlbXBTY29yZSA9
IHRoaXMuQkVTVF9TQ09SRSArIHRoaXMuc2NvcmVPZkNvbGxpZGVUaW1lKGJ1bGxldC5jb2xs
aWRlVGltZSwgc3RlcCk7DQogICAgICAgICAgICAgICAgLy8g6K6h566X5Ye65a2Q5by55LiO
5Z2m5YWL55u45pKe5pe255qE5Lit5b+D54K555qE5pyA55+t6Led56a7DQogICAgICAgICAg
ICAgICAgYnVsbGV0LmNlbnRlckRpc3RhbmNlID0gdGhpcy5nZXRNaW5DZW50ZXJEaXN0YW5j
ZU9mKHRhbmssIGJ1bGxldCk7DQogICAgICAgICAgICAgICAgbGV0IHNjb3JlT2ZkaXN0YW5j
ZSA9IHRoaXMuc2NvcmVPZkRpc3RhbmNlKGJ1bGxldC5jZW50ZXJEaXN0YW5jZSk7DQogICAg
ICAgICAgICAgICAgdGVtcFNjb3JlICs9IHNjb3JlT2ZkaXN0YW5jZTsNCiAgICAgICAgICAg
ICAgICBjb2xsaWRlSW5mbyArPSBidWxsZXQuY2VudGVyRGlzdGFuY2UgKyAiICIgKyBzY29y
ZU9mZGlzdGFuY2U7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8v
IOi/mOimgeaKiuWcqOWdpuWFi+enu+WKqOaWueWQkeS4iueahOWtkOW8ueeahOS4reW/g+eC
ueeahOi3neemu+iuoeeul+WcqOWGhQ0KICAgICAgICAgICAgICAgIGxldCBjb2xsaWRlVGlt
ZU9uVGFua01vdmUgPSB0aGlzLmdldENvbGxpZGVTdGVwc09uVGFua01vdmUodGFuaywgYnVs
bGV0KTsNCiAgICAgICAgICAgICAgICBpZiAoY29sbGlkZVRpbWVPblRhbmtNb3ZlID49IDAg
JiYgY29sbGlkZVRpbWVPblRhbmtNb3ZlIDwgdGhpcy5UQU5LX01PVkVfREFOR0VSX1NURVAp
IHsNCiAgICAgICAgICAgICAgICAgICAgLy8g6K6h566X5Ye65a2Q5by55LiO5Z2m5YWL55u4
5pKe5pe255qE5Lit5b+D54K555qE6Led56a7DQogICAgICAgICAgICAgICAgICAgIGJ1bGxl
dC5jZW50ZXJEaXN0YW5jZSA9IHRoaXMuZ2V0TWluQ2VudGVyRGlzdGFuY2VPZih0YW5rLCBi
dWxsZXQpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmVPZmRpc3RhbmNlID0gdGhp
cy5zY29yZU9mRGlzdGFuY2UoYnVsbGV0LmNlbnRlckRpc3RhbmNlKTsNCiAgICAgICAgICAg
ICAgICAgICAgdGVtcFNjb3JlICs9IHNjb3JlT2ZkaXN0YW5jZTsNCiAgICAgICAgICAgICAg
ICAgICAgY29sbGlkZUluZm8gKz0gYnVsbGV0LmNlbnRlckRpc3RhbmNlICsgIiAiICsgc2Nv
cmVPZmRpc3RhbmNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZygiRmluZCBidWxs
ZXQgb24gdGFuaydzIHBhdGgsIGNhbGN1bGF0ZSBpdHMgZGlzdGFuY2UyIik7DQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBb
aGFzWmVybywgdGVtcFNjb3JlLCBjb2xsaWRlSW5mbywgYnVsbGV0LmNvbGxpZGVUaW1lXTsN
CiAgICB9DQoNCiAgICBzY29yZU9mQ29sbGlkZVRpbWUoY29sbGlkZVRpbWUsIHN0ZXApIHsN
CiAgICAgICAgbGV0IHRlbXBTY29yZTsNCiAgICAgICAgaWYgKGNvbGxpZGVUaW1lID49IDE1
KSB7DQogICAgICAgICAgICB0ZW1wU2NvcmUgPSAtKHRoaXMuREFOR0VSX1NURVAgLSBjb2xs
aWRlVGltZSArIHN0ZXAgLSAxKSAqIDI7DQogICAgICAgIH0gZWxzZSBpZiAoY29sbGlkZVRp
bWUgPj0gMTApIHsNCiAgICAgICAgICAgIHRlbXBTY29yZSA9IC0odGhpcy5EQU5HRVJfU1RF
UCAtIGNvbGxpZGVUaW1lICsgc3RlcCAtIDEpICogNDsNCiAgICAgICAgfSBlbHNlIGlmIChj
b2xsaWRlVGltZSA+PTUpIHsNCiAgICAgICAgICAgIHRlbXBTY29yZSA9IC0odGhpcy5EQU5H
RVJfU1RFUCAtIGNvbGxpZGVUaW1lICsgc3RlcCAtIDEpICogODsNCiAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgIHRlbXBTY29yZSA9IC0odGhpcy5EQU5HRVJfU1RFUCAtIGNvbGxp
ZGVUaW1lICsgc3RlcCAtIDEpICogOTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdGVt
cFNjb3JlOw0KDQogICAgICAgIC8vIHJldHVybiAtKHRoaXMuREFOR0VSX1NURVAgLSBjb2xs
aWRlVGltZSArIHN0ZXAgLSAxKQ0KICAgIH0NCg0KICAgIHNjb3JlT2ZEaXN0YW5jZShkaXN0
YW5jZSkgew0KICAgICAgICBsZXQgc2NvcmUgPSAtKCh0aGlzLkJFU1RfRElTVEFOQ0VfT0Zf
Q0VOVEVSLWRpc3RhbmNlKSk7DQogICAgICAgIHJldHVybiBzY29yZTsNCiAgICB9DQoNCiAg
ICBjb3B5T2ZUYW5rKG15VGFuaykgew0KICAgICAgICBsZXQgaW1hZ2luYXJ5VGFuayA9IHt9
Ow0KICAgICAgICBpbWFnaW5hcnlUYW5rLlggPSBteVRhbmsuWDsNCiAgICAgICAgaW1hZ2lu
YXJ5VGFuay5ZID0gbXlUYW5rLlk7DQogICAgICAgIGltYWdpbmFyeVRhbmsuc3BlZWQgPSBt
eVRhbmsuc3BlZWQ7DQogICAgICAgIHJldHVybiBpbWFnaW5hcnlUYW5rOw0KICAgIH0NCg0K
ICAgIC8vIOWwhuimgeaSnuWHu+eahOS4pOiAheS4reW/g+eCueeahOacgOi/kei3neemuywg
5pyA6L+R6Led56a76LaK6L+R6LaK5Y2x6ZmpDQogICAgZ2V0TWluQ2VudGVyRGlzdGFuY2VP
Zih0YW5rLCBidWxsZXQpIHsNCiAgICAgICAgaWYgKGJ1bGxldC5zcGVlZCA9PT0gMCkgew0K
ICAgICAgICAgICAgcmV0dXJuIHRoaXMuQkVTVF9ESVNUQU5DRV9PRl9DRU5URVI7DQogICAg
ICAgIH0NCiAgICAgICAgbGV0IHRhbmtDZW50ZXJQb2ludCA9IHt9Ow0KICAgICAgICBsZXQg
YnVsbGV0Q2VudGVyUG9pbnQgPSB7fTsNCiAgICAgICAgdGFua0NlbnRlclBvaW50LlggPSB0
YW5rLlggKyB0YW5rV2lkdGgvMjsNCiAgICAgICAgdGFua0NlbnRlclBvaW50LlkgPSB0YW5r
LlkgKyB0YW5rV2lkdGgvMjsNCiAgICAgICAgYnVsbGV0Q2VudGVyUG9pbnQuWCA9IGJ1bGxl
dC5YOw0KICAgICAgICBidWxsZXRDZW50ZXJQb2ludC5ZID0gYnVsbGV0Llk7DQogICAgICAg
IHJldHVybiBNYXRoLm1pbihNYXRoLmFicyh0YW5rQ2VudGVyUG9pbnQuWCAtIGJ1bGxldENl
bnRlclBvaW50LlgpLCBNYXRoLmFicyh0YW5rQ2VudGVyUG9pbnQuWSAtIGJ1bGxldENlbnRl
clBvaW50LlkpKTsNCiAgICB9DQoNCiAgICB3aWxsQ29sbGlkZUF0TlN0ZXBzKHBsYXlDb250
cm9sLCBzdGVwLCBteVRhbmssIGJ1bGxldCwgaXNUYW5rTW92ZSkgew0KICAgICAgICBpZiAo
aXNUYW5rTW92ZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdGVwLCBteVRh
bmssIGJ1bGxldCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBwbGF5Q29udHJvbC53aWxs
Q29sbGlkZUF0TlN0ZXBzT25UYW5rTW92ZShzdGVwLCBteVRhbmssIGJ1bGxldCk7DQogICAg
ICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rp
b24gKHN0ZXAsIG15VGFuaywgYnVsbGV0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBs
YXlDb250cm9sLndpbGxDb2xsaWRlQXROU3RlcHNPbkJ1bGxldHNNb3ZlKHN0ZXAsIG15VGFu
aywgYnVsbGV0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGdl
dENvbGxpZGVTdGVwc09uTW92ZShteVRhbmssIGJ1bGxldCwgaXNUYW5rTW92ZSkgew0KICAg
ICAgICAvLyDmr4/mrKHliqA15q2l77yM5qOA5rWL5Yiw5LmL5ZCO5YaN5L2/55SoMuWIhuaz
leaJvuWHuuWFt+S9k+WAvA0KICAgICAgICBmb3IobGV0IGo9MDsgajw9dGhpcy5DSEVDS19T
VEVQOyBqKz01KSB7DQogICAgICAgICAgICBsZXQgd2lsbENvbGxpZGVBdE5TdGVwcyA9IHRo
aXMud2lsbENvbGxpZGVBdE5TdGVwcyh0aGlzLCBqLCBteVRhbmssIGJ1bGxldCwgaXNUYW5r
TW92ZSk7DQogICAgICAgICAgICBpZiAod2lsbENvbGxpZGVBdE5TdGVwcyhqLCBteVRhbmss
IGJ1bGxldCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkgew0KICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAg
ICAgbGV0IG1pbiA9IGotNDsNCiAgICAgICAgICAgICAgICBsZXQgbWF4ID0gajsNCiAgICAg
ICAgICAgICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbWlk
ID0gdGhpcy5iaXNlY3QobWluLCBtYXgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgd2ls
bENvbGxpZGVBdE5TdGVwcyA9IHRoaXMud2lsbENvbGxpZGVBdE5TdGVwcyh0aGlzLCBtaWQs
IG15VGFuaywgYnVsbGV0LCBpc1RhbmtNb3ZlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYg
KHdpbGxDb2xsaWRlQXROU3RlcHMobWlkLCBteVRhbmssIGJ1bGxldCkpIHsNCiAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIChtaWQgPT09IG1heCB8fCBtaWQgPT09IG1pbikgew0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenG1pZOS4juacgOWkp+acgOWwj+WA
vOS4reS4gOS4quebuOetie+8jOWImeWcqOaJvuWIsOeahOaDheWGteS4i+i/lOWbnuWwj+ea
hOmCo+S4qg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtaW47DQogICAg
ICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyDlvIDl
p4vmn6Xmib7mnIDlsI/lgLzkuI7kuK3pl7TlgLzkuYvpl7QNCiAgICAgICAgICAgICAgICAg
ICAgICAgIG1heCA9IG1pZCAtIDE7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICBpZiAobWlkID09PSBtYXggfHwgbWlkID09PSBtaW4p
IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpxtaWTkuI7mnIDlpKfm
nIDlsI/lgLzkuK3kuIDkuKrnm7jnrYnvvIzliJnlnKjmsqHmib7liLDnmoTmg4XlhrXkuIvo
v5Tlm57lpKfnmoTpgqPkuKoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g
bWF4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAg
ICAgLy8g5byA5aeL5p+l5om+5Lit6Ze05YC85LiO5pyA5aSn5YC85LmL6Ze0DQogICAgICAg
ICAgICAgICAgICAgICAgICBtaW4gPSBtaWQgKyAxOw0KICAgICAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAg
IC8vIOi/lOWbnuS4gOS4quavlOi+g+Wkp+eahOaVsO+8jOihqOekuuS4jeS8mueisOaSng0K
ICAgICAgICByZXR1cm4gdGhpcy5OT19DT0xMSURFOw0KICAgIH0NCg0KICAgIGJpc2VjdCht
aW4sIG1heCkgew0KICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigobWluICsgbWF4KS8yKTsN
CiAgICB9DQoNCiAgICBnZXRDb2xsaWRlU3RlcHNPblRhbmtNb3ZlKG15VGFuaywgYnVsbGV0
KSB7DQogICAgICAgIHJldHVybiB0aGlzLmdldENvbGxpZGVTdGVwc09uTW92ZShteVRhbmss
IGJ1bGxldCwgdHJ1ZSk7DQogICAgfQ0KDQogICAgZ2V0Q29sbGlkZVN0ZXBzT25CdWxsZXRz
TW92ZShteVRhbmssIGJ1bGxldCkgew0KICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2xsaWRl
U3RlcHNPbk1vdmUobXlUYW5rLCBidWxsZXQsIGZhbHNlKTsNCiAgICB9DQoNCiAgICAvLyDm
g7Plg4/lrZDlvLnkuI7lnablhYvnmoTnp7vliqhzdGVwc+atpeWQju+8jOi/lOWbnuenu+WK
qOWQjueahOWdkOagh++8jCDlnablhYvkuIDnm7TlvoDkuIDkuKrmlrnlkJHnp7vliqgNCiAg
ICBpbWFnaW5lQWxsTW92ZU5TdGVwRm9yT25lRGlyZWN0aW9uKGJ1bGxldHMsIHRhbmssIHN0
ZXBzKSB7DQogICAgICAgIGxldCBidWxsZXRzUG9pbnRzID0gW107DQogICAgICAgIGZvciAo
bGV0IGkgPSAwOyBpIDwgYnVsbGV0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgbGV0
IGJ1bGxldCA9IGJ1bGxldHNbaV07DQogICAgICAgICAgICAvLyDlrZDlvLnmmK/lnKjmo4Dm
tYvnorDmkp7kuYvlkI7np7vliqjnmoTvvIzmiYDku6Xmr5TlnablhYvmhaLkuIDmraUNCiAg
ICAgICAgICAgIGxldCBwb2ludDsNCiAgICAgICAgICAgIGlmIChidWxsZXQubmFtZSA+PSAx
MDAwKSB7DQogICAgICAgICAgICAgICAgLy8gQUnlrZDlvLnmmK/lnKjnorDmkp7mo4DmtYvk
uYvlkI7miY3np7vliqjnmoQNCiAgICAgICAgICAgICAgICBwb2ludCA9IHRoaXMuaW1hZ2lu
ZU1vdmUoc3RlcHMgLSAxLCBidWxsZXQsIGZhbHNlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgcG9pbnQgPSB0aGlzLmltYWdpbmVNb3ZlKHN0ZXBzLCBidWxs
ZXQsIGZhbHNlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJ1bGxldHNQb2ludHMu
cHVzaChwb2ludCk7DQogICAgICAgIH0NCiAgICAgICAgbGV0IHRhbmtQb2ludCA9IHRoaXMu
aW1hZ2luZU1vdmUoc3RlcHMsIHRhbmssIHRydWUpOw0KICAgICAgICByZXR1cm4gW3RhbmtQ
b2ludCwgYnVsbGV0c1BvaW50c107DQogICAgfQ0KDQogICAgLy8g5oOz5YOP5a2Q5by55LiO
5Z2m5YWL55qE56e75Yqo5LiA5q2l5ZCO77yM6L+U5Zue56e75Yqo5ZCO55qE5Z2Q5qCHDQog
ICAgaW1hZ2luZUFsbE1vdmVPbmVTdGVwKGJ1bGxldHMsIHRhbmssIGZpcnN0U3RlcCkgew0K
ICAgICAgICBsZXQgYnVsbGV0c1BvaW50cyA9IFtdOw0KICAgICAgICBmb3IgKGxldCBpID0g
MDsgaSA8IGJ1bGxldHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGxldCBidWxsZXQg
PSBidWxsZXRzW2ldOw0KICAgICAgICAgICAgbGV0IHBvaW50Ow0KICAgICAgICAgICAgLy8g
QUnlrZDlvLnmmK/lnKjmo4DmtYvnorDmkp7kuYvlkI7np7vliqjnmoTvvIzmiYDku6Xmr5Tl
nablhYvmhaLkuIDmraUNCiAgICAgICAgICAgIC8vIOWvueaJi+aWueWtkOW8ueaYr+WcqOaj
gOa1i+S5i+WJjeenu+WKqOeahA0KICAgICAgICAgICAgaWYgKGZpcnN0U3RlcCAmJiBidWxs
ZXQubmFtZSA+PSAxMDAwKSB7DQogICAgICAgICAgICAgICAgcG9pbnQgPSB0aGlzLmltYWdp
bmVNb3ZlKDAsIGJ1bGxldCwgZmFsc2UpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAg
ICAgICAgICAgICBwb2ludCA9IHRoaXMuaW1hZ2luZU1vdmUoMSwgYnVsbGV0LCBmYWxzZSk7
DQogICAgICAgICAgICB9DQogICAgICAgICAgICBidWxsZXRzUG9pbnRzLnB1c2gocG9pbnQp
Ow0KICAgICAgICB9DQogICAgICAgIGxldCB0YW5rUG9pbnQgPSB0aGlzLmltYWdpbmVNb3Zl
KDEsIHRhbmssIHRydWUpOw0KICAgICAgICByZXR1cm4gW3RhbmtQb2ludCwgYnVsbGV0c1Bv
aW50c107DQogICAgfQ0KDQogICAgLy8g5YGH5oOz54mp5L2T55qE56e75Yqo77yM6L+U5Zue
56e75Yqoc3RlcOatpeWQjueahOWdkOaghw0KICAgIGltYWdpbmVNb3ZlKHN0ZXAsIG1vdmFi
bGUsIGlzVGFuaykgew0KICAgICAgICBsZXQgcG9pbnQgPSB7fTsNCiAgICAgICAgbGV0IG1v
dmVPZmZzZXQgPSBtb3ZhYmxlLnNwZWVkICogc3RlcDsNCiAgICAgICAgbGV0IGJYID0gbW92
YWJsZS5YOw0KICAgICAgICBsZXQgYlkgPSBtb3ZhYmxlLlk7DQogICAgICAgIGlmIChtb3Zh
YmxlLmRpcmVjdGlvbiA9PT0gdGhpcy5ESVJFQ1RJT04uTEVGVCkgew0KICAgICAgICAgICAg
YlggLT0gbW92ZU9mZnNldDsNCiAgICAgICAgfSBlbHNlIGlmIChtb3ZhYmxlLmRpcmVjdGlv
biA9PT0gdGhpcy5ESVJFQ1RJT04uUklHSFQpIHsNCiAgICAgICAgICAgIGJYICs9IG1vdmVP
ZmZzZXQ7DQogICAgICAgIH0gZWxzZSBpZiAobW92YWJsZS5kaXJlY3Rpb24gPT09IHRoaXMu
RElSRUNUSU9OLlVQKSB7DQogICAgICAgICAgICBiWSAtPSBtb3ZlT2Zmc2V0Ow0KICAgICAg
ICB9IGVsc2UgaWYgKG1vdmFibGUuZGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5ET1dO
KSB7DQogICAgICAgICAgICBiWSArPSBtb3ZlT2Zmc2V0Ow0KICAgICAgICB9IGVsc2Ugew0K
ICAgICAgICAgICAgLy8g5ZWl5Lmf5LiN5bmyDQogICAgICAgIH0NCiAgICAgICAgaWYgKGlz
VGFuaykgew0KICAgICAgICAgICAgLy8g5a+55LqO6Ieq5bex55qEdGFuayzlrp7mlr3mo4Dm
tYvovrnnlYwNCiAgICAgICAgICAgIGlmIChiWCA8IDApIHsNCiAgICAgICAgICAgICAgICBi
WCA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoYlggPiBjYW52YXMud2lk
dGgtdGFua1dpZHRoKSB7DQogICAgICAgICAgICAgICAgYlggPSBjYW52YXMud2lkdGgtdGFu
a1dpZHRoOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGJZIDwgMCkgew0KICAg
ICAgICAgICAgICAgIGJZID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChi
WSA+IGNhbnZhcy5oZWlnaHQtdGFua1dpZHRoKSB7DQogICAgICAgICAgICAgICAgYlkgPSBj
YW52YXMuaGVpZ2h0LXRhbmtXaWR0aDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAg
Ly8g5aaC5p6c56e75Yqo5ZCO5LiO6Zqc56KN54mp55u45pKe77yM5YiZ5LiN56e75YqoDQog
ICAgICAgICAgICBpZiAodGhpcy5jb2xsaXNpb25NZXRhbChiWCwgYlksIHRhbmtXaWR0aCkp
IHsNCiAgICAgICAgICAgICAgICBiWCA9IG1vdmFibGUuWDsNCiAgICAgICAgICAgICAgICBi
WSA9IG1vdmFibGUuWTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBwb2lu
dC5YID0gYlg7DQogICAgICAgIHBvaW50LlkgPSBiWTsNCiAgICAgICAgcG9pbnQuZGlyZWN0
aW9uID0gbW92YWJsZS5kaXJlY3Rpb247DQogICAgICAgIHBvaW50LnNwZWVkID0gbW92YWJs
ZS5zcGVlZDsNCiAgICAgICAgaWYgKG1vdmFibGUuaGFzT3duUHJvcGVydHkoIndpZHRoIikp
IHsNCiAgICAgICAgICAgIHBvaW50LndpZHRoID0gbW92YWJsZS53aWR0aDsNCiAgICAgICAg
fQ0KICAgICAgICByZXR1cm4gcG9pbnQ7DQogICAgfQ0KDQogICAgLy8g5Zyo5o6l5LiL5p2l
55qE56ysTuenkuaYr+WQpuS8muWPkeeUn+eisOaSng0KICAgIHdpbGxDb2xsaWRlQXROU3Rl
cHNPblRhbmtNb3ZlKG4sIG15VGFuaywgYnVsbGV0KSB7DQogICAgICAgIGxldCBpc0NvbGxp
ZGUgPSB0aGlzLmNoZWNrSWZDb2xsaWRlT25UYW5rTW92ZShuLCBteVRhbmssIGJ1bGxldCk7
DQogICAgICAgIC8vIHRoaXMubG9nKCJ3aWxsQ29sbGlkZTogIiArIGlzQ29sbGlkZSkNCiAg
ICAgICAgcmV0dXJuIGlzQ29sbGlkZTsNCiAgICB9DQoNCiAgICAvLyDlnKjmjqXkuIvmnaXn
moTnrKxO56eS5piv5ZCm5Lya5Y+R55Sf56Kw5pKeDQogICAgd2lsbENvbGxpZGVBdE5TdGVw
c09uQnVsbGV0c01vdmUobiwgbXlUYW5rLCBidWxsZXQpIHsNCiAgICAgICAgbGV0IGlzQ29s
bGlkZSA9IHRoaXMuY2hlY2tJZkNvbGxpZGVPbkJ1bGxldHNNb3ZlKG4sIG15VGFuaywgYnVs
bGV0KTsNCiAgICAgICAgLy8gdGhpcy5sb2coIndpbGxDb2xsaWRlOiAiICsgaXNDb2xsaWRl
KQ0KICAgICAgICByZXR1cm4gaXNDb2xsaWRlOw0KICAgIH0NCg0KICAgIGNoZWNrSWZSZWN0
Q29sbGlkZShBLCBCLCBDLCBELCBFLCBGLCBHLCBIKSB7DQogICAgICAgIEMgKz0gQTsvL+eu
l+WHuuefqeW9ojHlj7PkuIvop5LmqKrlnZDmoIc7DQogICAgICAgIEQgKz0gQjsvL+eul+WH
uuefqeW9ojHlj7PkuIvop5LnurXlnZDmoIc7DQogICAgICAgIEcgKz0gRTsvL+eul+WHuuef
qeW9ojLlj7PkuIvop5LmqKrnurXmoIc7DQogICAgICAgIEggKz0gRjsvL+eul+WHuuefqeW9
ojLlj7PkuIvop5LnurXlnZDmoIc7DQogICAgICAgIGlmIChDIDw9IEUgfHwgRyA8PSBBIHx8
IEQgPD0gRiB8fCBIIDw9IEIpIHsNCiAgICAgICAgLy/kuKTkuKrlm77lvaLmsqHmnInnm7jk
uqQNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1
cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBjaGVja0lmQ29sbGlkZU9uVGFua01vdmUobiwgbXlU
YW5rLCBidWxsZXQpIHsNCiAgICAgICAgbGV0IHRhbmtQb2ludCA9IHRoaXMuaW1hZ2luZU1v
dmUobiwgbXlUYW5rLCB0cnVlKTsNCg0KICAgICAgICBsZXQgdFggPSB0YW5rUG9pbnQuWDsN
CiAgICAgICAgbGV0IHRZID0gdGFua1BvaW50Llk7DQoNCiAgICAgICAgbGV0IGNvbGxpZGUg
PSB0aGlzLmNoZWNrSWZSZWN0Q29sbGlkZSh0WCwgdFksIHRhbmtXaWR0aCwgdGFua1dpZHRo
LCBidWxsZXQuWC1idWxsZXQud2lkdGgvMiwgYnVsbGV0LlktYnVsbGV0LndpZHRoLzIsIGJ1
bGxldC53aWR0aCwgYnVsbGV0LndpZHRoKTsNCiAgICAgICAgLy8gdGhpcy5sb2coImNoZWNr
SWZDb2xsaWRlOiAiLCAi56ysIiArIG4gKyAi5qyh5b6q546vIiwgIm15VGFuaz0iICsgdGhp
cy5nZXRNb3ZhYmxlUG9zKG15VGFuayksICJidWxsZXQ9IiArIHRoaXMuZ2V0TW92YWJsZVBv
cyhwb2ludCksIGNvbGxpZGUpDQogICAgICAgIHJldHVybiBjb2xsaWRlOw0KICAgIH0NCg0K
ICAgIC8vIOWdpuWFi+S4jeWKqOaXtg0KICAgIGNoZWNrSWZDb2xsaWRlT25CdWxsZXRzTW92
ZShuLCBteVRhbmssIGJ1bGxldCkgew0KICAgICAgICBsZXQgcG9pbnQgPSB0aGlzLmltYWdp
bmVNb3ZlKG4sIGJ1bGxldCwgZmFsc2UpOw0KDQogICAgICAgIHBvaW50LlggLT0gYnVsbGV0
LndpZHRoLzI7DQogICAgICAgIHBvaW50LlkgLT0gYnVsbGV0LndpZHRoLzI7DQoNCiAgICAg
ICAgbGV0IHRYID0gbXlUYW5rLlg7DQogICAgICAgIGxldCB0WSA9IG15VGFuay5ZOw0KDQog
ICAgICAgIGxldCBjb2xsaWRlID0gdGhpcy5jaGVja0lmUmVjdENvbGxpZGUodFgsIHRZLCB0
YW5rV2lkdGgsIHRhbmtXaWR0aCwgcG9pbnQuWCwgcG9pbnQuWSwgYnVsbGV0LndpZHRoLCBi
dWxsZXQud2lkdGgpOw0KICAgICAgICAvLyB0aGlzLmxvZygiY2hlY2tJZkNvbGxpZGU6ICIs
ICLnrKwiICsgbiArICLmrKHlvqrnjq8iLCAibXlUYW5rPSIgKyB0aGlzLmdldE1vdmFibGVQ
b3MobXlUYW5rKSwgImJ1bGxldD0iICsgdGhpcy5nZXRNb3ZhYmxlUG9zKHBvaW50KSwgY29s
bGlkZSkNCiAgICAgICAgcmV0dXJuIGNvbGxpZGU7DQogICAgfQ0KDQogICAgc29ydFBhdGhz
KHBhdGgxLCBwYXRoMikgew0KICAgICAgICBsZXQgbW92ZW1lbnRzMiA9IHBhdGgyLm1vdmVt
ZW50czsNCiAgICAgICAgbGV0IG1vdmVtZW50czEgPSBwYXRoMS5tb3ZlbWVudHM7DQogICAg
ICAgIGlmIChtb3ZlbWVudHMyLmxlbmd0aCA9PT0gbW92ZW1lbnRzMS5sZW5ndGgpIHsNCiAg
ICAgICAgICAgIGZvcihsZXQgaT1tb3ZlbWVudHMyLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHsN
CiAgICAgICAgICAgICAgICBpZiAobW92ZW1lbnRzMltpXS5zY29yZSAhPT0gbW92ZW1lbnRz
MVtpXS5zY29yZSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW92ZW1lbnRzMltp
XS5zY29yZSAtIG1vdmVtZW50czFbaV0uc2NvcmU7DQogICAgICAgICAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgICAgICAgICAgLy8g55u4562J55qE6K+d57un57ut5LiL5LiA5qyh
5b6q546vDQogICAgICAgICAgICAgICAgICAgIGlmIChpPT09MCkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAg
ICByZXR1cm4gbW92ZW1lbnRzMi5sZW5ndGggLSBtb3ZlbWVudHMxLmxlbmd0aDsNCiAgICAg
ICAgfQ0KDQogICAgfQ0KDQogICAgUGF0aCgpIHsNCiAgICAgICAgbGV0IHBhdGggPSB7fTsN
CiAgICAgICAgcGF0aC5tb3ZlbWVudHMgPSBbXTsNCiAgICAgICAgcmV0dXJuIHBhdGg7DQog
ICAgfQ0KDQogICAgTW92ZW1lbnQoZGlyZWN0aW9uLCBzY29yZSkgew0KICAgICAgICBsZXQg
bW92ZW1lbnQgPSB7fTsNCiAgICAgICAgbW92ZW1lbnQuZGlyZWN0aW9uID0gZGlyZWN0aW9u
Ow0KICAgICAgICBtb3ZlbWVudC5zY29yZSA9IHNjb3JlOw0KICAgICAgICByZXR1cm4gbW92
ZW1lbnQ7DQogICAgfQ0KDQogICAgZ2V0TW92YWJsZVBvcyhtb3ZhYmxlKSB7DQogICAgICAg
IHJldHVybiAiKCIgKyBtb3ZhYmxlLlggKyAiLCIgKyBtb3ZhYmxlLlkgKyAiKSI7DQogICAg
fQ0KDQogICAgcHJpbnRNb3ZhYmxlUG9zKHByZWZpeCwgbW92YWJsZSkgew0KICAgICAgICBs
ZXQgcG9zaXRpb24gPSBwcmVmaXg7DQogICAgICAgIHBvc2l0aW9uICs9IHRoaXMuZ2V0TW92
YWJsZVBvcyhtb3ZhYmxlKTsNCiAgICAgICAgdGhpcy5sb2coInRhbmtQb3NpdGlvbiIsIHBv
c2l0aW9uKTsNCiAgICB9DQoNCiAgICBwcmludEJ1bGxldHNQb3MocHJlZml4LCBidWxsZXRz
KSB7DQogICAgICAgIGxldCBhbGxQb2lzdGlvbiA9IHByZWZpeDsNCiAgICAgICAgYnVsbGV0
cy5mb3JFYWNoKGJ1bGxldCA9PiB7DQogICAgICAgICAgICBhbGxQb2lzdGlvbiArPSB0aGlz
LmdldE1vdmFibGVQb3MoYnVsbGV0KSArICIgIjsNCiAgICAgICAgfSk7DQogICAgICAgIHRo
aXMubG9nKCJhbGxCdWxsZXRQb3NpdGlvbjoiICsgYWxsUG9pc3Rpb24pOw0KICAgIH0NCg0K
ICAgIGNvdW50RW5lbXkoKSB7DQogICAgICAgIGxldCB3aWR0aDsNCiAgICAgICAgaWYgKHRo
aXMuaXNDb3VudGVyU3RyaWtlKCkpIHsNCiAgICAgICAgICAgIHdpZHRoID0gY2FudmFzLndp
ZHRoLzg7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB3aWR0aCA9IGNhbnZhcy53
aWR0aC80Ow0KICAgICAgICB9DQogICAgICAgIGxldCBjb3VudCA9IDA7DQogICAgICAgIGZv
cihsZXQgaT0wO2k8dGhpcy5hbGxFbmVteVRhbmsubGVuZ3RoOyBpKyspIHsNCiAgICAgICAg
ICAgIGxldCBlbmVteSA9IHRoaXMuYWxsRW5lbXlUYW5rW2ldOw0KICAgICAgICAgICAgaWYg
KE1hdGguYWJzKHRoaXMuc3ZNeVRhbmsuWSAtIGVuZW15LlkpIDwgY2FudmFzLmhlaWdodC8y
ICYmIE1hdGguYWJzKHRoaXMuc3ZNeVRhbmsuWCAtIGVuZW15LlgpIDwgd2lkdGgpIHsNCiAg
ICAgICAgICAgICAgICBjb3VudCArKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAg
ICAgICByZXR1cm4gY291bnQ7DQogICAgfQ0KDQogICAgdHJhY2VBbmRGaXJlVjIoKSB7DQog
ICAgICAgIGxldCBmaW5hbERpcmVjdGlvbjsNCiAgICAgICAgdGhpcy50YXJnZXRUYW5rSW5m
byA9IHRoaXMuZmluZE5lYXJlc3RUYW5rKCk7DQogICAgICAgIGxldCBkeCA9IHRoaXMudGFy
Z2V0VGFua0luZm9bMF07DQogICAgICAgIGxldCBkeSA9IHRoaXMudGFyZ2V0VGFua0luZm9b
MV07DQogICAgICAgIGxldCB0YXJnZXRUYW5rID0gdGhpcy50YXJnZXRUYW5rSW5mb1syXTsN
CiAgICAgICAgbGV0IHNob3VsZEZpcmUgPSBmYWxzZTsNCiAgICAgICAgaWYgKHRoaXMuREVC
VUcpIHsNCiAgICAgICAgICAgIC8vIHRhcmdldFRhbmsuaW1nID0gbXlUYW5rSW1nMA0KICAg
ICAgICB9DQoNCiAgICAgICAgaWYgKHRhcmdldFRhbmsgPT09IHRoaXMuZW5lbXlUYW5rKSB7
DQogICAgICAgICAgICB0aGlzLkRBTkdFUl9ESVNUQU5DRSA9IDMgKiB0aGlzLlRBTktfV0lE
VEg7DQogICAgICAgICAgICB0aGlzLkJFU1RfRklSRV9ESVNUQU5DRSA9IDQgKiB0aGlzLlRB
TktfV0lEVEg7DQogICAgICAgICAgICB0aGlzLk1JTl9GSVJFX0lOVEVSVkFMID0gMjAwIC0g
KDUtdGhpcy5teUJ1bGxldHMubGVuZ3RoKSAqIDQwOw0KICAgICAgICAgICAgaWYgKHRoaXMu
TUlOX0ZJUkVfSU5URVJWQUwgPj0gMTE5KSB7DQogICAgICAgICAgICAgICAgdGhpcy5NSU5f
RklSRV9JTlRFUlZBTCA9IDExOTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0
aGlzLmluQ2F1dGlvbkFyZWEoZHgsIGR5KSkgew0KICAgICAgICAgICAgICAgIC8vIOWFs+mU
ruaXtuWIu++8jOS4jeiDveWQneaDnOWtkOW8uQ0KICAgICAgICAgICAgICAgIHRoaXMuTUlO
X0ZJUkVfSU5URVJWQUwgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5N
SU5fRklSRV9PRkZTRVQgPSAodGhpcy5UQU5LX1dJRFRIICsgdGhpcy5CVUxMRVRfV0lEVEgp
LzI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyDmo4DmtYvmiJHmlrnlnabl
hYvlkajlm7TmlYzmlrnlnablhYvnmoTmlbDph4/vvIzmoLnmja7mlbDph4/lpJrlsJHliLbl
rprljbHpmanot53nprsNCiAgICAgICAgICAgIHRoaXMuREFOR0VSX0RJU1RBTkNFID0gMi4z
ICogdGhpcy5UQU5LX1dJRFRIOw0KICAgICAgICAgICAgdGhpcy5CRVNUX0ZJUkVfRElTVEFO
Q0UgPSAzLjEgKiB0aGlzLlRBTktfV0lEVEg7DQogICAgICAgICAgICBsZXQgZW5lbXlBcm91
bmRDb3VudCA9IHRoaXMuY291bnRFbmVteSgpOw0KICAgICAgICAgICAgbGV0IHN0ZXAgPSB0
aGlzLlRBTktfV0lEVEgvMTAgKiAoTWF0aC5mbG9vcihlbmVteUFyb3VuZENvdW50LzIpLSh0
aGlzLmFsbEFJVGFua0NvdW50LzgpKTsNCiAgICAgICAgICAgIHRoaXMuREFOR0VSX0RJU1RB
TkNFICs9IHN0ZXA7DQogICAgICAgICAgICB0aGlzLkJFU1RfRklSRV9ESVNUQU5DRSArPSBz
dGVwOw0KICAgICAgICAgICAgdGhpcy5NSU5fRklSRV9JTlRFUlZBTCA9IDIwMCAtIGVuZW15
QXJvdW5kQ291bnQgKiAyMDsNCiAgICAgICAgICAgIC8vIOaVjOS6uuWkmuaXtuWinuWkp+Ww
hOWHu+WMuuWfnw0KICAgICAgICAgICAgdGhpcy5NSU5fRklSRV9PRkZTRVQgPSAodGhpcy5U
QU5LX1dJRFRIICsgdGhpcy5CVUxMRVRfV0lEVEgpLzIgOw0KICAgICAgICAgICAgLy8rIChN
YXRoLmZsb29yKGVuZW15QXJvdW5kQ291bnQvMikgLSAxKQ0KICAgICAgICB9DQogICAgICAg
IHRoaXMuVU5TQUZFX0FQUFJPQUNIX0RJU1RBTkNFID0gdGhpcy5EQU5HRVJfRElTVEFOQ0Ug
KyB0aGlzLlRBTktfV0lEVEgvMjsNCiAgICAgICAgdGhpcy5GSVJFX01BWF9ESVNUQU5DRSA9
IHRoaXMuREFOR0VSX0RJU1RBTkNFICsgMiAqIHRoaXMuVEFOS19XSURUSDsNCg0KDQogICAg
ICAgIGlmICh0aGlzLm15QnVsbGV0cy5sZW5ndGggPT09IDUgJiYgdGFyZ2V0VGFuayA9PT0g
dGhpcy5lbmVteVRhbmspIHsNCiAgICAgICAgICAgIC8vIOayoeacieWtkOW8ueS6hu+8jOmA
g+i3kQ0KICAgICAgICAgICAgLy8g57uV6Zqc56KN54mp6YCD56a777yMIOaXoOWQiOmAguma
nOeijeeJqeaXtuS5n+aJp+ihjOWHu+adgOetlueVpQ0KICAgICAgICAgICAgbGV0IGJlc3RN
ZXRhbCA9IHRoaXMuZmluZEJlc3RNZXRhbDJFc2NhcGUoKTsNCiAgICAgICAgICAgIGlmIChi
ZXN0TWV0YWwgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0
aW9uID0gdGhpcy5lc2NhcGU0RW5lbXkoYmVzdE1ldGFsKTsNCiAgICAgICAgICAgICAgICAv
LyDkuJPms6jkuo7pgIPot5HvvIzkuI3nrqHlhbbku5bvvIwg5aaC5p6c5peg5rOV6YCD6LeR
5YaN5omn6KGM5YW25LuW562W55WlDQogICAgICAgICAgICAgICAgcmV0dXJuIFtmaW5hbERp
cmVjdGlvbiwgdGFyZ2V0VGFuaywgZmFsc2VdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9
DQoNCg0KICAgICAgICAvLyDliKTmlq3miJHmlrnkuI7mlYzmlrnmtojnga3lnablhYvmlbDp
h4/vvIzlpoLmnpzmiJHmlrnmm7TlpJrvvIzliJnmiafooYzpgIPnprvnrZbnlaXvvIznu5Xp
mpznoo3nianpgIPnprsNCiAgICAgICAgLy8g5aaC5p6c5a+55omL5pu05aSa77yM5YiZ5omn
6KGM5Ye75p2A562W55WlDQogICAgICAgIGlmICh0aGlzLm15Q29sbGlkZU51bSA+IDEwKSB7
DQogICAgICAgICAgICAvLyDnu5Xpmpznoo3nianpgIPnprvvvIwg5peg5ZCI6YCC6Zqc56KN
54mp5pe25Lmf5omn6KGM5Ye75p2A562W55WlDQogICAgICAgICAgICBsZXQgYmVzdE1ldGFs
ID0gdGhpcy5maW5kQmVzdE1ldGFsMkVzY2FwZSgpOw0KICAgICAgICAgICAgbGV0IGRpc3Rh
bmNlID0gdGhpcy5jYWxjdWxhdGVEaXN0YW5jZVdpdGhNZXRhbCh0aGlzLnN2TXlUYW5rLCB0
YXJnZXRUYW5rLCBiZXN0TWV0YWwpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyDm
nInlj6/nu5Xpmpznoo3lubbkuJTmnInotrPlpJ/nmoTpgIPot5Hot53nprsNCiAgICAgICAg
ICAgIGlmIChiZXN0TWV0YWwgIT09IHVuZGVmaW5lZCAmJiBkaXN0YW5jZSA+IDIuNSAqIHRo
aXMuVEFOS19XSURUSCkgew0KICAgICAgICAgICAgICAgIC8vIOWmguaenOWvueaJi+aWueWd
puWFi+W3suatu++8jOWImeS4jeaJp+ihjOmAg+i3keetlueVpQ0KICAgICAgICAgICAgICAg
IGlmICh0aGlzLmVuZW15VGFuayAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAg
ICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5lc2NhcGU0RW5lbXkoYmVzdE1ldGFsKTsNCiAg
ICAgICAgICAgICAgICAgICAgLy8g5LiT5rOo5LqO6YCD6LeR77yM5LiN566h5YW25LuW77yM
IOWmguaenOaXoOazlemAg+i3keWGjeaJp+ihjOWFtuS7luetlueVpQ0KICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gW2ZpbmFsRGlyZWN0aW9uLCB0YXJnZXRUYW5rLCBzaG91bGRGaXJl
XTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
ICAgICAgIC8vIOiAg+iZkeaJvuS4jeWIsOeahOaDheWGtTog5Ye75p2ADQogICAgICAgICAg
ICAgICAgaWYgKHRhcmdldFRhbmsgPT09IHRoaXMuZW5lbXlUYW5rKSB7DQogICAgICAgICAg
ICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuYXBwcm9hY2hBbmRGaXJlKGR4LCBkeSk7DQog
ICAgICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gYXJyYXlbMF07DQogICAgICAg
ICAgICAgICAgICAgIHNob3VsZEZpcmUgPSBhcnJheVsxXTsNCiAgICAgICAgICAgICAgICAg
ICAgcmV0dXJuIFtmaW5hbERpcmVjdGlvbiwgdGFyZ2V0VGFuaywgc2hvdWxkRmlyZV07DQog
ICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgLy8g5Ye75p2ADQogICAgICAgICAgICBpZiAodGFyZ2V0VGFuayA9PT0gdGhp
cy5lbmVteVRhbmspIHsNCiAgICAgICAgICAgICAgICBsZXQgYXJyYXkgPSB0aGlzLmFwcHJv
YWNoQW5kRmlyZShkeCwgZHkpOw0KICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0g
YXJyYXlbMF07DQogICAgICAgICAgICAgICAgc2hvdWxkRmlyZSA9IGFycmF5WzFdOw0KICAg
ICAgICAgICAgICAgIHJldHVybiBbZmluYWxEaXJlY3Rpb24sIHRhcmdldFRhbmssIHNob3Vs
ZEZpcmVdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICBpZiAodGhp
cy5pbkRhbmdlckFyZWEodGhpcy5zdk15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAg
ICAgIC8vIOi/nOemu++8iOagueaNruaYr+WQpumdoOi/kei+ueeVjO+8iQ0KICAgICAgICAg
ICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLmVzY2FwZTRBSShkeCwgZHkpOw0KICAgICAgICB9
IGVsc2UgaWYgKHRoaXMuaW5GaXJlQXJlYSh0aGlzLnN2TXlUYW5rLCB0YXJnZXRUYW5rKSkg
ew0KICAgICAgICAgICAgLy8g5pS75Ye75Yy65Z+f77yM5YGc5q2i5bm25pS75Ye7IOimgeiA
g+iZkeaWueWQkQ0KICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLnN0b3BBbmRG
aXJlKGR4LCBkeSk7DQogICAgICAgICAgICB0aGlzLmxvZygic3RvcCBhbmQgZmlyZSIpOw0K
ICAgICAgICB9IGVsc2UgIGlmICh0aGlzLmluVW5TYWZlQXBwcm9hY2hBcmVhKHRoaXMuc3ZN
eVRhbmssIHRhcmdldFRhbmspICYmIHRhcmdldFRhbmsgIT09IHRoaXMuZW5lbXlUYW5rKSB7
DQogICAgICAgICAgICAvLyDov5znprvlho3mjqXov5ENCiAgICAgICAgICAgIGZpbmFsRGly
ZWN0aW9uID0gdGhpcy5lc2NhcGVGb3JBcHByb2FjaChkeCwgZHkpOw0KICAgICAgICB9IGVs
c2UgaWYgKHRoaXMuaW5GYXJGaXJlQXJlYSh0aGlzLnN2TXlUYW5rLCB0YXJnZXRUYW5rKSkg
ew0KICAgICAgICAgICAgLy8g5YeG5pS75Ye75Yy65Z+f77yM5YmN6L+b5bm25pS75Ye7DQog
ICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuZ29BbmRGaXJlKGR4LCBkeSk7DQog
ICAgICAgICAgICB0aGlzLmxvZygiZ28gYW5kIGZpcmUiKTsNCiAgICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAgIC8vIOaJvuWIsOacgOS9s+aUu+WHu+WMuuWfn++8jOWQkemCo+S4quaW
ueWQkeenu+WKqA0KICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLmZpbmRCZXN0
RmlyZUFyZWEodGFyZ2V0VGFuayk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gW2Zp
bmFsRGlyZWN0aW9uLCB0YXJnZXRUYW5rLCBzaG91bGRGaXJlXTsNCiAgICB9DQoNCiAgICBh
cHByb2FjaEFuZEZpcmUoZHgsIGR5KSB7DQogICAgICAgIHRoaXMubG9nKCJkeCwgZHkiLCBk
eCwgZHkpOw0KICAgICAgICBpZiAodGhpcy5pblN1cGVyQXR0YWNrQXJlYShkeCwgZHkpKSB7
DQogICAgICAgICAgICAvLyDov5vlhaXotoXnuqfmlLvlh7vmqKHlvI8NCiAgICAgICAgICAg
IHRoaXMuaW5TdXBlckF0dGFja01vZGUgPSB0cnVlOw0KICAgICAgICB9IA0KICAgICAgICBp
ZiAodGhpcy5pblN1cGVyQXR0YWNrTW9kZSkgew0KICAgICAgICAgICAgdGhpcy5sb2coImlu
IHN1cGVyIGFyZWEiKTsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cGVyQXR0YWNrKGR4
LCBkeSk7DQogICAgICAgIH0gaWYgKE1hdGguYWJzKGR4KSA8IHRoaXMubWluQXR0YWNrRGlz
dGFuY2UgJiYgTWF0aC5hYnMoZHkpIDwgdGhpcy5taW5BdHRhY2tEaXN0YW5jZSkgew0KICAg
ICAgICAgICAgdGhpcy5sb2coImluIHN0b3AgYW5kIHdhaXQgYXJlYSIpOw0KICAgICAgICAg
ICAgcmV0dXJuIFt0aGlzLkRJUkVDVElPTi5TVE9QLCBmYWxzZV07DQogICAgICAgIH0gZWxz
ZSBpZiAodGhpcy5pbkxpbWl0U2FmZUFyZWEoZHgsIGR5KSkgew0KICAgICAgICAgICAgdGhp
cy5sb2coImluIExpbWl0U2FmZUFyZWEgYXJlYSIpOw0KICAgICAgICAgICAgcmV0dXJuIHRo
aXMudmVyeUNhdXRpb25BdHRhY2soZHgsIGR5KTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlz
LmluQWZ0ZXJTdGVwT25lQXJlYShkeCwgZHkpKSB7DQogICAgICAgICAgICB0aGlzLmxvZygi
aW4gYWZ0ZXJTdGVwT25lIGFyZWEiKTsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmFmdGVy
U3RlcE9uZShkeCwgZHkpOw0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5BdHRhY2tBcmVh
KGR4LCBkeSkgfHwgdGhpcy5pbkNhdXRpb25BcmVhKGR4LCBkeSkpIHsNCiAgICAgICAgLy8g
fSBlbHNlIGlmICh0aGlzLmluQXR0YWNrQXJlYShkeCwgZHkpKSB7DQogICAgICAgICAgICB0
aGlzLmxvZygiaW4gYXR0YWNrL2NhdXRpb24vc2FmZSBhcmVhIik7DQogICAgICAgICAgICBy
ZXR1cm4gW3RoaXMuYXR0YWNrKGR4LCBkeSksIGZhbHNlXTsNCiAgICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAgIHRoaXMubG9nKCJpbiBmaW5kIHBhdGggYXJlYSIpOw0KICAgICAgICAg
ICAgdGhpcy5EQU5HRVJfRElTVEFOQ0UgPSAwOw0KICAgICAgICAgICAgdGhpcy5CRVNUX0ZJ
UkVfRElTVEFOQ0UgPSB0aGlzLlRBTktfV0lEVEg7DQogICAgICAgICAgICByZXR1cm4gW3Ro
aXMuZmluZEJlc3RGaXJlQXJlYSh0aGlzLnRhcmdldFRhbmtJbmZvWzJdKSwgZmFsc2VdOw0K
ICAgICAgICB9DQogICAgfQ0KDQogICAgZmluZEJlc3RGaXJlQXJlYSh0YXJnZXRUYW5rKSB7
DQogICAgICAgIGxldCB0YXJnZXRUYW5rQ2VudGVyID0ge1g6dGFyZ2V0VGFuay5YLCBZOnRh
cmdldFRhbmsuWX07DQogICAgICAgIGxldCBwb2ludDEgPSB7WDp0YXJnZXRUYW5rQ2VudGVy
LlggLSB0aGlzLkJFU1RfRklSRV9ESVNUQU5DRSwgWTp0YXJnZXRUYW5rQ2VudGVyLll9Ow0K
ICAgICAgICBsZXQgcG9pbnQyID0ge1g6dGFyZ2V0VGFua0NlbnRlci5YLCBZOnRhcmdldFRh
bmtDZW50ZXIuWSAtIHRoaXMuQkVTVF9GSVJFX0RJU1RBTkNFfTsNCiAgICAgICAgbGV0IHBv
aW50MyA9IHtYOnRhcmdldFRhbmtDZW50ZXIuWCArIHRoaXMuQkVTVF9GSVJFX0RJU1RBTkNF
LCBZOnRhcmdldFRhbmtDZW50ZXIuWX07DQogICAgICAgIGxldCBwb2ludDQgPSB7WDp0YXJn
ZXRUYW5rQ2VudGVyLlgsIFk6dGFyZ2V0VGFua0NlbnRlci5ZICsgdGhpcy5CRVNUX0ZJUkVf
RElTVEFOQ0V9Ow0KICAgICAgICBsZXQgcG9pbnRzID0gW3BvaW50MSwgcG9pbnQyLCBwb2lu
dDMsIHBvaW50NF07DQogICAgICAgIGxldCBoaWdoZXN0U2NvcmUgPSAtdGhpcy5NQVhfRElT
VEFOQ0U7DQogICAgICAgIGxldCBuZWFyZXN0UG9pbnQ7DQogICAgICAgIC8vIOWvu+aJvuWH
uuacgOS8mOeahOeCue+8jOW5tuS4jeS4gOWumuaYr+acgOi/keeahO+8jOWmguaenOacieWk
muS4queCueWPr+eUqO+8jOWImeS9v+eUqOabtOmdoOi/keS4remXtOeahOeCuQ0KDQogICAg
ICAgIGZvcihsZXQgaT0wO2k8cG9pbnRzLmxlbmd0aDtpKyspIHsNCiAgICAgICAgICAgIC8v
IOaJvuWHujTkuKrngrnkuK3kuI3ooqvpga7mjKHkuJTot53nprvmnIDov5HnmoTngrkNCiAg
ICAgICAgICAgIGxldCBwb2ludCA9IHBvaW50c1tpXTsNCiAgICAgICAgICAgIGlmIChwb2lu
dC5YIDwgMCB8fCBwb2ludC5ZIDwgMCB8fCBwb2ludC5YID4gY2FudmFzLndpZHRoLXRhbmtX
aWR0aCB8fCBwb2ludC5ZID4gY2FudmFzLmhlaWdodC10YW5rV2lkdGgpIHsNCiAgICAgICAg
ICAgICAgICAvLyDmraTngrnlnKjlsY/luZXlpJbvvIzkuI3opoENCiAgICAgICAgICAgICAg
ICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmNvbGxp
c2lvbk1ldGFsKHBvaW50LlgsIHBvaW50LlksIHRhbmtXaWR0aCkpIHsNCiAgICAgICAgICAg
ICAgICAvLyDmiYDlnKjkvY3nva7kuI7pmpznoo3niannorDmkp7vvIzkuI3opoENCiAgICAg
ICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbGV0
IGltYWdpbmVUYW5rID0ge1g6cG9pbnQuWCAsWTpwb2ludC5ZfTsNCg0KICAgICAgICAgICAg
bGV0IGJsb2NrID0gdGhpcy5pc0Jsb2NrQnlNZXRhbChpbWFnaW5lVGFuaywgdGFyZ2V0VGFu
ayk7DQogICAgICAgICAgICAvLyDmlLvlh7vngrnkuI7nm67moIflnablhYvkuYvpl7TmnInp
mpznoo3nianvvIwg5LiN6KaBDQogICAgICAgICAgICBpZiAoYmxvY2spIHsNCiAgICAgICAg
ICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8g5qC5
5o2u55uu5qCH54K55aSE5a2Q5by555qE5aSa5bCR5Y+K55uu5qCH54K555qE6L+c6L+R5Lul
5Y+K6Led56a76L6557yY6L+c6L+R6K6h566X57u85ZCI5b6X5YiG77yM6YCJ5Ye65b6X5YiG
6auY55qE54K5DQogICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLmdldFBvc2l0aW9uU2Nv
cmVPZkZpcmVBcmVhKHBvaW50KTsNCg0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInBv
c2l0aW9uIGFuZCBzY29yZTogIiwgcG9pbnQuWCwgcG9pbnQuWSwgc2NvcmUpDQoNCiAgICAg
ICAgICAgIGlmIChzY29yZSA+IGhpZ2hlc3RTY29yZSkgew0KICAgICAgICAgICAgICAgIGhp
Z2hlc3RTY29yZSA9IHNjb3JlOw0KICAgICAgICAgICAgICAgIG5lYXJlc3RQb2ludCA9IHBv
aW50Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIOWQkW5lYXJlc3RQ
b2ludOenu+WKqA0KICAgICAgICByZXR1cm4gdGhpcy5tb3ZlMlBvaW50KG5lYXJlc3RQb2lu
dCk7DQogICAgfQ0KDQogICAgZ2V0UG9zaXRpb25TY29yZU9mRmlyZUFyZWEocG9pbnQpIHsN
CiAgICAgICAgLy8g5qC55o2u55uu5qCH54K55aSE5a2Q5by555qE5aSa5bCR5Y+K55uu5qCH
54K555qE6L+c6L+R5Lul5Y+K6Led56a76L6557yY6L+c6L+R6K6h566X57u85ZCI5b6X5YiG
77yM6YCJ5Ye65b6X5YiG6auY55qE54K5DQogICAgICAgIC8vIOaJvuWHuui3neemu+Wxj+W5
leS4reW/g+eCueWSjOi3neemu+WdpuWFi+S9jee9ruW5s+Wdh+WAvOacgOi/keeahOeCuQ0K
ICAgICAgICBsZXQgbmVhcmVzdE1ldGFsID0gdGhpcy5maW5kTmVhcmVzdE1ldGFsKHRoaXMu
c3ZNeVRhbmssIHBvaW50KTsNCiAgICAgICAgbGV0IGRpc3RhbmNlID0gdGhpcy5jYWxjdWxh
dGVEaXN0YW5jZVdpdGhNZXRhbCh0aGlzLnN2TXlUYW5rLCBwb2ludCwgbmVhcmVzdE1ldGFs
KTsNCg0KICAgICAgICBsZXQgbWluRGlzdGFuY2VPZkJvdW5kTFIgPSBNYXRoLm1pbihwb2lu
dC5YLCBjYW52YXMud2lkdGggLSBwb2ludC5YKTsNCiAgICAgICAgbGV0IG1pbkRpc3RhbmNl
T2ZCb3VuZFRCID0gTWF0aC5taW4ocG9pbnQuWSwgY2FudmFzLmhlaWdodCAtIHBvaW50Llkp
Ow0KDQogICAgICAgIGxldCBidWxsZXRzQ291bnQgPSB0aGlzLmNhbGN1bGF0ZUJ1bGxldENv
dW50QXJvdW5kUG9pbnQocG9pbnQpOw0KICAgICAgICAvLyBsZXQgYnVsbGV0c0NvdW50ID0g
MA0KDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCJzY29yZXM6ICIsIC1kaXN0YW5jZSwgLWJ1
bGxldHNDb3VudCwgbWluRGlzdGFuY2VPZkJvdW5kTFIsIG1pbkRpc3RhbmNlT2ZCb3VuZFRC
KQ0KDQogICAgICAgIGlmICh0aGlzLnRhcmdldFRhbmtJbmZvWzJdID09PSB0aGlzLmVuZW15
VGFuaykgew0KICAgICAgICAgICAgcmV0dXJuICgtZGlzdGFuY2UvMiAtIHRoaXMuZ2V0RGlz
dGFuY2VPZlBvaW50cyh7WDpjYW52YXMud2lkdGgvMiwgWTpjYW52YXMuaGVpZ2h0LzJ9LCBw
b2ludCkpLzI7DQogICAgICAgIH0NCg0KICAgICAgICBsZXQgZmFjdG9ycyA9IHRoaXMuZ2V0
RmFjdG9yT2ZCb3VuZCgpOw0KICAgICAgICBsZXQgc2NvcmUgPSAtZGlzdGFuY2UgLSBidWxs
ZXRzQ291bnQgKiAxMCArIG1pbkRpc3RhbmNlT2ZCb3VuZExSICogZmFjdG9yc1swXSArIG1p
bkRpc3RhbmNlT2ZCb3VuZFRCICogZmFjdG9yc1sxXTsNCg0KICAgICAgICByZXR1cm4gc2Nv
cmU7DQogICAgfQ0KDQogICAgZ2V0RmFjdG9yT2ZCb3VuZCgpIHsNCiAgICAgICAgZm9yKGxl
dCBpPTA7aTx0aGlzLmFsbEVuZW15VGFuay5sZW5ndGg7aSsrKSB7DQogICAgICAgICAgICBs
ZXQgdGFuayA9IHRoaXMuYWxsRW5lbXlUYW5rW2ldOw0KICAgICAgICAgICAgLy8gUGxheWVy
QS9QbGF5ZXJCDQogICAgICAgICAgICBpZiAodGFuay5YIDwgY2FudmFzLndpZHRoLzIpIHsN
CiAgICAgICAgICAgICAgICByZXR1cm4gWzAuNzUsIDFdOw0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9DQogICAgICAgIHJldHVybiBbMSwgMC43NV07DQogICAgfQ0KDQogICAgY2FsY3Vs
YXRlQnVsbGV0Q291bnRBcm91bmRQb2ludChwb2ludCkgew0KICAgICAgICBsZXQgYnVsbGV0
c0NvdW50ID0gMDsNCiAgICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLmFsbEVuZW15QnVsbGV0
cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgbGV0IGJ1bGxldCA9IHRoaXMuYWxsRW5l
bXlCdWxsZXRzW2ldOw0KICAgICAgICAgICAgaWYgKGJ1bGxldC5zcGVlZCA9PT0gMCkgew0K
ICAgICAgICAgICAgICAgIC8vIOaOkumZpOmanOeijeeJqQ0KICAgICAgICAgICAgICAgIGNv
bnRpbnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gdGhp
cy5nZXREaXN0YW5jZU9mUG9pbnRzKHBvaW50LCBidWxsZXQpOw0KICAgICAgICAgICAgaWYg
KGRpc3RhbmNlIDwgMiAqIHRoaXMuVEFOS19XSURUSCkgew0KICAgICAgICAgICAgICAgIGJ1
bGxldHNDb3VudCArKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1
cm4gYnVsbGV0c0NvdW50Ow0KICAgIH0NCg0KICAgIGZpbmROZWFyZXN0TWV0YWwocG9pbnQx
LCBwb2ludDIpIHsNCiAgICAgICAgbGV0IG5lYXJlc3RNZXRhbDsNCiAgICAgICAgbGV0IG5l
YXJlc3RNZXRhbERpc3RhbmNlID0gdGhpcy5NQVhfRElTVEFOQ0U7DQogICAgICAgIGZvcihs
ZXQgaj0wO2o8YW1ldGFsLmxlbmd0aDtqKyspIHsNCiAgICAgICAgICAgIGxldCBtZXRhbCA9
IGFtZXRhbFtqXTsNCiAgICAgICAgICAgIGxldCBtZXRhbENlbnRlciA9IHtYOm1ldGFsWzBd
K3RoaXMuTUVUQUxfV0lEVEgvMiwgWTptZXRhbFsxXSt0aGlzLk1FVEFMX1dJRFRILzJ9Ow0K
ICAgICAgICAgICAgbGV0IHRlbXBEaXN0YW5jZSA9ICh0aGlzLmdldERpc3RhbmNlT2ZQb2lu
dHMobWV0YWxDZW50ZXIsIHBvaW50MSkgKyB0aGlzLmdldERpc3RhbmNlT2ZQb2ludHMobWV0
YWxDZW50ZXIsIHBvaW50MikpLzI7DQogICAgICAgICAgICBpZiAodGVtcERpc3RhbmNlIDwg
bmVhcmVzdE1ldGFsRGlzdGFuY2UpIHsNCiAgICAgICAgICAgICAgICBuZWFyZXN0TWV0YWxE
aXN0YW5jZSA9IHRlbXBEaXN0YW5jZTsNCiAgICAgICAgICAgICAgICBuZWFyZXN0TWV0YWwg
PSBtZXRhbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmVh
cmVzdE1ldGFsOw0KICAgIH0NCg0KICAgIG1vdmUyUG9pbnQodGFyZ2V0UG9pbnQpIHsNCiAg
ICAgICAgbGV0IG5lYXJlc3RNZXRhbCA9IHRoaXMuZmluZE5lYXJlc3RNZXRhbCh0aGlzLnN2
TXlUYW5rLCB0YXJnZXRQb2ludCk7DQogICAgICAgIGxldCBkaXN0YW5jZSA9IHRoaXMuY2Fs
Y3VsYXRlRGlzdGFuY2VXaXRoTWV0YWwodGhpcy5zdk15VGFuaywgdGFyZ2V0UG9pbnQsIG5l
YXJlc3RNZXRhbCk7DQoNCiAgICAgICAgbGV0IHJlY29tbWVuZERpcmVjdGlvbjsNCiAgICAg
ICAgbGV0IGR4ID0gdGhpcy5zdk15VGFuay5YIC0gdGFyZ2V0UG9pbnQuWDsNCiAgICAgICAg
bGV0IGR5ID0gdGhpcy5zdk15VGFuay5ZIC0gdGFyZ2V0UG9pbnQuWTsNCg0KICAgICAgICBs
ZXQgdGFyZ2V0VGFuayA9IHRoaXMudGFyZ2V0VGFua0luZm9bMl07DQoNCiAgICAgICAgaWYg
KHRhcmdldFRhbmsgPT09IHRoaXMuZW5lbXlUYW5rKSB7DQogICAgICAgICAgICAvLyDlpoLm
npzmmK/lr7nmiYvmlrnvvIzliJnkvb/nlKha5a2X5b2i5o6l6L+R77yM5ZCm5YiZ77yM5LyY
5YWI5ZCR5pyA5a655piT5omT5Ye755qE5pa55ZCR6LWwDQogICAgICAgICAgICBpZiAoTWF0
aC5hYnMoZHgpID4gTWF0aC5hYnMoZHkpKSB7DQogICAgICAgICAgICAgICAgaWYgKGR4ID4g
MCkgew0KICAgICAgICAgICAgICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJ
UkVDVElPTi5MRUZUDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAg
ICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uUklHSFQNCiAgICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlm
IChkeSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0g
dGhpcy5ESVJFQ1RJT04uVVANCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
ICAgICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5ET1dODQog
ICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9ICBlbHNlIHsNCiAg
ICAgICAgICAgIGlmIChNYXRoLmFicyhkeCkgPiBjYW52YXMud2lkdGgvNCAmJiB0YXJnZXRU
YW5rICE9PSB0aGlzLmVuZW15VGFuaykgew0KICAgICAgICAgICAgICAgIC8vIOi3neemu+Wk
qui/nO+8jOWRveS4reeOh+S9juS4lOWuueaYk+i1sOWIsOWtkOW8ueWkmueahOWcsOaWue+8
jOavlOi+g+WNsemZqQ0KICAgICAgICAgICAgICAgIGlmIChkeCA+IDApIHsNCiAgICAgICAg
ICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsN
CiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZWNvbW1l
bmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIOaJvuWIsOabtOWu
ueaYk+i1sOWIsOi/nOeoi+W8gOeBq+eahOaWueWQke+8jCDpnIDopoHliKTmlq3nm67moIfn
grnkuI7nm67moIflnablhYvnmoTkvY3nva7lhbPns7sNCiAgICAgICAgICAgICAgICBsZXQg
ZHhPZlRhbmtBbmRQb2ludCA9IHRhcmdldFBvaW50LlggLSB0YXJnZXRUYW5rLlg7DQogICAg
ICAgICAgICAgICAgbGV0IGR5T2ZUYW5rQW5kUG9pbnQgPSB0YXJnZXRQb2ludC5ZIC0gdGFy
Z2V0VGFuay5ZOw0KDQogICAgICAgICAgICAgICAgaWYgKGR4T2ZUYW5rQW5kUG9pbnQgPiAw
KSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOebruagh+eCueWcqOebruagh+WdpuWFi+WP
s+mdog0KICAgICAgICAgICAgICAgICAgICBpZiAoZHggPD0gMCkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uUklHSFQ7
DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICBpZiAoZHkgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb21tZW5k
RGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb21tZW5kRGly
ZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uVVA7DQogICAgICAgICAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGR4
T2ZUYW5rQW5kUG9pbnQgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOebruagh+eC
ueWcqOebruagh+WdpuWFi+W3pumdog0KICAgICAgICAgICAgICAgICAgICBpZiAoZHggPj0g
MCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0gdGhp
cy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIChkeSA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5ET1dOOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAg
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ICAgIH0gZWxzZSBpZiAoZHlPZlRhbmtBbmRQb2ludCA+IDApIHsNCiAgICAgICAgICAgICAg
ICAgICAgLy8g55uu5qCH54K55Zyo55uu5qCH5Z2m5YWL5LiL6Z2iDQogICAgICAgICAgICAg
ICAgICAgIGlmIChkeSA8PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZWNvbW1l
bmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5ET1dOOw0KICAgICAgICAgICAgICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29tbWVuZERpcmVjdGlvbiA9IHRoaXMuRElS
RUNUSU9OLkxFRlQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHJlY29tbWVuZERpcmVjdGlvbiA9IHRoaXMuRElSRUNU
SU9OLlJJR0hUOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAg
Ly8g55uu5qCH54K55Zyo55uu5qCH5Z2m5YWL5LiK6Z2iDQogICAgICAgICAgICAgICAgICAg
IGlmIChkeSA+PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZWNvbW1lbmREaXJl
Y3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkeCA+IDApIHsNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5M
RUZUOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdI
VDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAg
ICAgICANCiAgICAgICAgbGV0IG9wdGlvbkRpcmVjdGlvbnMgPSBbXTsNCiAgICAgICAgZm9y
KGxldCBpPTA7IGk8dGhpcy5zdk5vU3RvcERpcmVjdGlvbnMubGVuZ3RoOyBpKyspIHsNCiAg
ICAgICAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLnN2Tm9TdG9wRGlyZWN0aW9uc1tpXTsN
CiAgICAgICAgICAgIGxldCBjb3B5T2ZNeVRhbmsgPSB0aGlzLmNvcHlPZlRhbmsodGhpcy5z
dk15VGFuayk7DQogICAgICAgICAgICBjb3B5T2ZNeVRhbmsuZGlyZWN0aW9uID0gZGlyZWN0
aW9uOw0KICAgICAgICAgICAgbGV0IGltYWdpbmFyeVRhbmsgPSB0aGlzLmltYWdpbmVNb3Zl
KDEsIGNvcHlPZk15VGFuaywgdHJ1ZSk7DQogICAgICAgICAgICBsZXQgdGVtcERpc3RhbmNl
ID0gdGhpcy5jYWxjdWxhdGVEaXN0YW5jZVdpdGhNZXRhbChpbWFnaW5hcnlUYW5rLCB0YXJn
ZXRQb2ludCwgbmVhcmVzdE1ldGFsKTsNCg0KICAgICAgICAgICAgLy8gMS4g5qOA5rWL5piv
5ZCm5Lya5LiO6Zqc56KN54mp56Kw5pKe77yM5aaC5p6c5Lya56Kw5pKe77yMZmFsc2UNCiAg
ICAgICAgICAgIGlmIChpbWFnaW5hcnlUYW5rLlggPT09IGNvcHlPZk15VGFuay5YICYmIGlt
YWdpbmFyeVRhbmsuWSA9PT0gY29weU9mTXlUYW5rLlkpIHsNCiAgICAgICAgICAgICAgICAv
LyDlnablhYvmnKrog73np7vliqjvvIzor7TmmI7pgYfliLDovrnnlYzmiJbogIXpmpznoo3n
iakNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIC8vIDIuIOajgOa1i+enu+WKqOWQjuaYr+WQpuWcqOWNsemZqeWMuuWfnw0KICAgICAg
ICAgICAgaWYgKHRoaXMuaW5EYW5nZXJBcmVhKGltYWdpbmFyeVRhbmssIHRoaXMudGFyZ2V0
VGFua0luZm9bMl0pKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAg
ICB9DQoNCiAgICAgICAgICAgIGlmICh0ZW1wRGlzdGFuY2UgPCBkaXN0YW5jZSkgew0KICAg
ICAgICAgICAgICAgIG9wdGlvbkRpcmVjdGlvbnMucHVzaChkaXJlY3Rpb24pOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRpb25EaXJlY3Rpb25zLmxlbmd0
aCA+IDApIHsNCiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG9wdGlvbkRpcmVjdGlvbnMu
bGVuZ3RoO2krKykgew0KICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPSBvcHRpb25E
aXJlY3Rpb25zW2ldOw0KICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IHJlY29t
bWVuZERpcmVjdGlvbikgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9u
Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVy
biBvcHRpb25EaXJlY3Rpb25zWzBdOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
dGhpcy5sb2coIuafpemXrumimCIpOw0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNU
SU9OLlNUT1A7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIGluQWZ0ZXJTdGVwT25lQXJl
YShkeCwgZHkpIHsNCiAgICAgICAgbGV0IGFic0R4ID0gTWF0aC5hYnMoZHgpOw0KICAgICAg
ICBsZXQgYWJzRHkgPSBNYXRoLmFicyhkeSk7DQogICAgICAgIGlmIChhYnNEeSA8IGFic0R5
KSB7DQogICAgICAgICAgICBpZiAoYWJzRHggPCAzMCAmJiBhYnNEeSA8IDM3KSB7DQogICAg
ICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICBpZiAoYWJzRHggPCAzNyAmJiBhYnNEeSA8IDMwKSB7DQogICAg
ICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAg
ICAgICAgDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBpbkxpbWl0U2Fm
ZUFyZWEoZHgsIGR5KSB7DQogICAgICAgIGxldCBhYnNEeCA9IE1hdGguYWJzKGR4KTsNCiAg
ICAgICAgbGV0IGFic0R5ID0gTWF0aC5hYnMoZHkpOw0KICAgICAgICBpZiAoYWJzRHggPCAz
NyAmJiBhYnNEeCA+PSAzMCAmJiBhYnNEeSA8IDM3ICYmIGFic0R5IDwgMzcgPj0gMzApIHsN
CiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBm
YWxzZTsNCiAgICB9DQoNCiAgICBpbkNhdXRpb25BcmVhKGR4LCBkeSkgew0KICAgICAgICBs
ZXQgYWJzRHggPSBNYXRoLmFicyhkeCk7DQogICAgICAgIGxldCBhYnNEeSA9IE1hdGguYWJz
KGR5KTsNCiAgICAgICAgaWYgKGFic0R4IDwgYWJzRHkpIHsNCiAgICAgICAgICAgIGlmIChh
YnNEeSA8IDEuNSAqIHRoaXMuVEFOS19XSURUSCkgew0KICAgICAgICAgICAgICAgIHJldHVy
biB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
aWYgKGFic0R4IDwgMS41ICogdGhpcy5UQU5LX1dJRFRIKSB7DQogICAgICAgICAgICAgICAg
cmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJu
IGZhbHNlOw0KICAgIH0NCg0KDQogICAgaW5BdHRhY2tBcmVhKGR4LCBkeSkgew0KICAgICAg
ICBpZiAoKE1hdGguYWJzKGR4KSA8IHRoaXMuTUlOX0ZJUkVfT0ZGU0VUKSB8fCAoTWF0aC5h
YnMoZHkpIDwgdGhpcy5NSU5fRklSRV9PRkZTRVQpKSB7DQogICAgICAgICAgICBpZiAodGhp
cy5pc0Jsb2NrQnlNZXRhbCh0aGlzLnN2TXlUYW5rLCB0aGlzLnRhcmdldFRhbmtJbmZvWzJd
KSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxz
ZTsNCiAgICB9DQoNCiAgICBpblN1cGVyQXR0YWNrQXJlYShkeCwgZHkpIHsNCiAgICAgICAg
bGV0IG15QnVsbGV0Q291bnQgPSB0aGlzLm15QnVsbGV0cy5sZW5ndGg7DQogICAgICAgIHRo
aXMuQVRUQUNLX01JTl9ESVNUQU5DRSA9IHRoaXMuQVRUQUNLX01JTl9ESVNUQU5DRV9DT05T
VCAtIG15QnVsbGV0Q291bnQgKiA0Mg0KICAgICAgICBsZXQgdGFyZ2V0VGFuayA9IHRoaXMu
dGFyZ2V0VGFua0luZm9bMl07DQogICAgICAgIGxldCBtaW5EaXN0YW5jZU9mVGFyZ2V0ID0g
dGhpcy5taW5EaXN0YW5jZU9mQm91bmQodGFyZ2V0VGFuayk7DQogICAgICAgIGxldCBzdXBl
ck1pbkZpcmVPZmZzZXQgPSB0aGlzLlRBTktfV0lEVEg7DQogICAgICAgIGlmIChtaW5EaXN0
YW5jZU9mVGFyZ2V0IDw9IHRoaXMuQVRUQUNLX01JTl9ESVNUQU5DRS0yKSB7DQogICAgICAg
ICAgICBzdXBlck1pbkZpcmVPZmZzZXQgPSBzdXBlck1pbkZpcmVPZmZzZXQgKyAodGhpcy5B
VFRBQ0tfTUlOX0RJU1RBTkNFLTItbWluRGlzdGFuY2VPZlRhcmdldCk7DQogICAgICAgIH0N
CiAgICAgICAgaWYgKChNYXRoLmFicyhkeCkgPCBzdXBlck1pbkZpcmVPZmZzZXQgJiYgTWF0
aC5hYnMoZHkpID49IHRoaXMuU1VQRVJfQVRUQUNLX0RJU1RBTkNFICYmIE1hdGguYWJzKGR5
KSA8PSB0aGlzLlNVUEVSX0FUVEFDSF9NQVhfRElTVEFOQ0UpIHx8IChNYXRoLmFicyhkeSkg
PCBzdXBlck1pbkZpcmVPZmZzZXQgJiYgTWF0aC5hYnMoZHgpID49IHRoaXMuU1VQRVJfQVRU
QUNLX0RJU1RBTkNFICYmIE1hdGguYWJzKGR4KSA8PSB0aGlzLlNVUEVSX0FUVEFDSF9NQVhf
RElTVEFOQ0UpKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc0Jsb2NrQnlNZXRhbCh0aGlz
LnN2TXlUYW5rLCB0aGlzLnRhcmdldFRhbmtJbmZvWzJdKSkgew0KICAgICAgICAgICAgICAg
IHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAg
ICAgaWYgKHRhcmdldFRhbmsgIT09IHRoaXMuZW5lbXlUYW5rKSB7DQogICAgICAgICAgICAg
ICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IG1pbkRp
c3RhbmNlT2ZNeUFuZEVuZW15ID0gMjA7DQogICAgICAgICAgICBsZXQgbWluRGlzdGFuY2VP
ZlN1cGVyQXR0YWNrID0gdGhpcy5BVFRBQ0tfTUlOX0RJU1RBTkNFOw0KICAgICAgICAgICAg
bGV0IGRpc3RhbmNlT2ZTdXBlckF0dGFjayA9IG1pbkRpc3RhbmNlT2ZTdXBlckF0dGFjayAr
IHRoaXMuVEFOS19XSURUSC8yOw0KICAgICAgICAgICAgbGV0IGNlbnRlck9mTXlUYW5rID0g
e1g6dGhpcy5zdk15VGFuay5YK3RoaXMuVEFOS19XSURUSC8yLCBZOnRoaXMuc3ZNeVRhbmsu
WSt0aGlzLlRBTktfV0lEVEgvMn07DQogICAgICAgICAgICBsZXQgY2VudGVyT2ZUYXJnZXRU
YW5rID0ge1g6dGFyZ2V0VGFuay5YK3RoaXMuVEFOS19XSURUSC8yLCBZOnRhcmdldFRhbmsu
WSt0aGlzLlRBTktfV0lEVEgvMn07DQogICAgICAgICAgICBpZiAoY2VudGVyT2ZNeVRhbmsu
WSAtIGNlbnRlck9mVGFyZ2V0VGFuay5ZID49IG1pbkRpc3RhbmNlT2ZNeUFuZEVuZW15ICYm
IGNlbnRlck9mTXlUYW5rLlkgPCBkaXN0YW5jZU9mU3VwZXJBdHRhY2spIHsNCiAgICAgICAg
ICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChj
ZW50ZXJPZk15VGFuay5YIC0gY2VudGVyT2ZUYXJnZXRUYW5rLlggPj0gbWluRGlzdGFuY2VP
Zk15QW5kRW5lbXkgJiYgY2VudGVyT2ZNeVRhbmsuWCA8IGRpc3RhbmNlT2ZTdXBlckF0dGFj
aykgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgaWYgKGNlbnRlck9mVGFyZ2V0VGFuay5ZIC0gY2VudGVyT2ZNeVRhbmsuWSA+
PSBtaW5EaXN0YW5jZU9mTXlBbmRFbmVteSAmJiBjZW50ZXJPZk15VGFuay5ZID4gY2FudmFz
LmhlaWdodCAtIGRpc3RhbmNlT2ZTdXBlckF0dGFjaykgew0KICAgICAgICAgICAgICAgIHJl
dHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGNlbnRlck9mVGFy
Z2V0VGFuay5YIC0gY2VudGVyT2ZNeVRhbmsuWCA+PSBtaW5EaXN0YW5jZU9mTXlBbmRFbmVt
eSAmJiBjZW50ZXJPZk15VGFuay5YID4gY2FudmFzLndpZHRoIC0gZGlzdGFuY2VPZlN1cGVy
QXR0YWNrKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9
DQoNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxhbWV0YWwubGVu
Z3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBsZXQgbWV0YWwgPSBhbWV0YWxbaV07DQog
ICAgICAgICAgICAgICAgbGV0IGNlbnRlck9mTWV0YWwgPSB7WDptZXRhbFswXSt0aGlzLk1F
VEFMX1dJRFRILzIsWTptZXRhbFsxXSt0aGlzLk1FVEFMX1dJRFRILzJ9Ow0KICAgICAgICAg
ICAgICAgIGxldCBkZWx0YVggPSBNYXRoLmFicyhjZW50ZXJPZlRhcmdldFRhbmsuWCAtIGNl
bnRlck9mTWV0YWwuWCk7DQogICAgICAgICAgICAgICAgbGV0IGRlbHRhWSA9IE1hdGguYWJz
KGNlbnRlck9mVGFyZ2V0VGFuay5ZIC0gY2VudGVyT2ZNZXRhbC5ZKTsNCiAgICAgICAgICAg
ICAgICBsZXQgZGVsdGFYT2ZNaW5lID0gTWF0aC5hYnMoY2VudGVyT2ZNeVRhbmsuWCAtIGNl
bnRlck9mTWV0YWwuWCk7DQogICAgICAgICAgICAgICAgbGV0IGRlbHRhWU9mTWluZSA9IE1h
dGguYWJzKGNlbnRlck9mTXlUYW5rLlkgLSBjZW50ZXJPZk1ldGFsLlkpOw0KICAgICAgICAg
ICAgICAgIGlmIChkZWx0YVkgPCAodGhpcy5NRVRBTF9XSURUSCt0aGlzLlRBTktfV0lEVEgp
LzIgJiYgZGVsdGFYIDwgKHRoaXMuVEFOS19XSURUSCt0aGlzLk1FVEFMX1dJRFRIKS8yK21p
bkRpc3RhbmNlT2ZTdXBlckF0dGFjayAmJiBkZWx0YVhPZk1pbmUgPiBkZWx0YVggJiYgTWF0
aC5hYnMoZHgpIDwgc3VwZXJNaW5GaXJlT2Zmc2V0KSB7DQogICAgICAgICAgICAgICAgICAg
IHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAo
ZGVsdGFYIDwgKHRoaXMuTUVUQUxfV0lEVEgrdGhpcy5UQU5LX1dJRFRIKS8yICYmIGRlbHRh
WSA8ICh0aGlzLlRBTktfV0lEVEgrdGhpcy5NRVRBTF9XSURUSCkvMittaW5EaXN0YW5jZU9m
U3VwZXJBdHRhY2sgJiYgZGVsdGFZT2ZNaW5lID4gZGVsdGFZICYmIE1hdGguYWJzKGR5KSA8
IHN1cGVyTWluRmlyZU9mZnNldCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1
ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJl
dHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0K
DQogICAgbWluRGlzdGFuY2VPZkJvdW5kKHBvaW50KSB7DQogICAgICAgIC8vIOiuoeeul+eC
ueWIsOi+ueeVjOeahOacgOWwj+i3neemuw0KICAgICAgICBsZXQgbWluRHggPSBNYXRoLm1p
bihwb2ludC5YLCBjYW52YXMud2lkdGgtcG9pbnQuWC10aGlzLlRBTktfV0lEVEgpOw0KICAg
ICAgICBsZXQgbWluRHkgPSBNYXRoLm1pbihwb2ludC5ZLCBjYW52YXMuaGVpZ2h0LXBvaW50
LlktdGhpcy5UQU5LX1dJRFRIKTsNCiAgICAgICAgbGV0IG1pbkRlbHRhID0gTWF0aC5taW4o
bWluRHgsIG1pbkR5KTsNCiAgICAgICAgcmV0dXJuIG1pbkRlbHRhOw0KICAgIH0NCg0KICAg
IGluU2F2ZUJ1bGxldHNBcmVhKGR4LCBkeSkgew0KICAgICAgICBpZiAoTWF0aC5hYnMoZHgp
IDwgNTcgKyB0aGlzLlRBTktfV0lEVEggfHwgTWF0aC5hYnMoZHkpIDwgNTcgKyB0aGlzLlRB
TktfV0lEVEgpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAg
ICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBpbk11c3REaWVBcmVhMihkeCwgZHkp
IHsNCiAgICAgICAgbGV0IGFic0R4ID0gTWF0aC5hYnMoZHgpOw0KICAgICAgICBsZXQgYWJz
RHkgPSBNYXRoLmFicyhkeSk7DQogICAgICAgIGlmIChhYnNEeCA8IDIzICYmIGFic0R5IDwg
MjMpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGxl
dCBkTWF4ID0gTWF0aC5tYXgoYWJzRHgsIGFic0R5KTsNCiAgICAgICAgbGV0IGRNaW4gPSBN
YXRoLm1pbihhYnNEeCwgYWJzRHkpOw0KICAgICAgICBpZiAoZE1heCA8IDM3ICYmIGRNaW4g
PCAxNikgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAg
aWYgKGRNYXggPj0gNTcrdGhpcy5UQU5LX1dJRFRIKSB7DQogICAgICAgICAgICAvLyDmoLnm
ja7lnablhYvkuI3lkIzmlrnlkJHvvIzmnIDlsI/ot53nprvopoHkuYjkuLo1Nu+8jOimgeS5
iOS4ujQ5DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAg
ICBsZXQgaW1hZ2luQnVsbGV0ID0ge307DQoNCiAgICAgICAgc3dpdGNoKHRoaXMuc3ZNeVRh
bmsuZGlyZWN0aW9uKSB7DQogICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLkxFRlQ6
DQogICAgICAgICAgICAgICAgaW1hZ2luQnVsbGV0ID0gbmV3IEJ1bGxldCgnaW1hZ2luMScs
IDEwLCAxLCB0aGlzLkRJUkVDVElPTi5MRUZULCB0aGlzLnN2TXlUYW5rLlgtdGhpcy5CVUxM
RVRfV0lEVEgvMiwgdGhpcy5zdk15VGFuay5ZK3RoaXMuVEFOS19XSURUSC8yKTsNCiAgICAg
ICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uVVA6
DQogICAgICAgICAgICAgICAgaW1hZ2luQnVsbGV0ID0gbmV3IEJ1bGxldCgnaW1hZ2luMics
IDEwLCAxLCB0aGlzLkRJUkVDVElPTi5VUCwgdGhpcy5zdk15VGFuay5YK3RoaXMuVEFOS19X
SURUSC8yLCB0aGlzLnN2TXlUYW5rLlktdGhpcy5CVUxMRVRfV0lEVEgvMik7DQogICAgICAg
ICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLlJJR0hU
Og0KICAgICAgICAgICAgICAgIGltYWdpbkJ1bGxldCA9IG5ldyBCdWxsZXQoJ2ltYWdpbjMn
LCAxMCwgMSwgdGhpcy5ESVJFQ1RJT04uUklHSFQsIHRoaXMuc3ZNeVRhbmsuWCt0aGlzLlRB
TktfV0lEVEgrdGhpcy5CVUxMRVRfV0lEVEgvMiwgdGhpcy5zdk15VGFuay5ZK3RoaXMuVEFO
S19XSURUSC8yKTsNCiAgICAgICAgICAgICAgICBicmVhazsgICAgICAgIA0KICAgICAgICAg
ICAgY2FzZSB0aGlzLkRJUkVDVElPTi5ET1dOOg0KICAgICAgICAgICAgICAgIGltYWdpbkJ1
bGxldCA9IG5ldyBCdWxsZXQoJ2ltYWdpbjQnLCAxMCwgMSwgdGhpcy5ESVJFQ1RJT04uRE9X
TiwgdGhpcy5zdk15VGFuay5YICsgdGhpcy5UQU5LX1dJRFRILzIsIHRoaXMuc3ZNeVRhbmsu
WSt0aGlzLlRBTktfV0lEVEgrdGhpcy5CVUxMRVRfV0lEVEgvMik7DQogICAgICAgICAgICAg
ICAgYnJlYWs7DQogICAgICAgIH0NCg0KICAgICAgICBpbWFnaW5CdWxsZXQud2lkdGggPSB0
aGlzLkJVTExFVF9XSURUSDsNCg0KICAgICAgICBsZXQgaW1hZ2luQnVsbGV0cyA9IFtpbWFn
aW5CdWxsZXRdOw0KDQogICAgICAgIHJldHVybiB0aGlzLmRlZHVjZUlmQ3Jhc2hGb3JJbWFn
aW5CdWxsZXRzKGltYWdpbkJ1bGxldHMpOw0KICAgIH0NCg0KICAgIGluTXVzdERpZUFyZWEo
ZHgsIGR5KSB7DQogICAgICAgIGxldCBkTWF4ID0gTWF0aC5tYXgoTWF0aC5hYnMoZHgpLCBN
YXRoLmFicyhkeSkpOw0KICAgICAgICBpZiAoZE1heCA+PSA1Nyt0aGlzLlRBTktfV0lEVEgp
IHsNCiAgICAgICAgICAgIC8vIOagueaNruWdpuWFi+S4jeWQjOaWueWQke+8jOacgOWwj+i3
neemu+imgeS5iOS4ujU277yM6KaB5LmI5Li6NDkNCiAgICAgICAgICAgIHJldHVybiBmYWxz
ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIOW3puOAgeS4iuOAgeWPs+OAgeS4i+Wbm+S4
quWtkOW8ueWQhOiHqueahG9mZnNldCh4LHkpDQogICAgICAgIGxldCBvZmZzZXRzID0gW107
DQogICAgICAgIHN3aXRjaCh0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbikgew0KICAgICAgICAg
ICAgY2FzZSB0aGlzLkRJUkVDVElPTi5MRUZUOg0KICAgICAgICAgICAgICAgIG9mZnNldHMg
PSBbWzAsMF0sWzAsLTddLFs3LDBdLFswLDddXTsNCiAgICAgICAgICAgICAgICBicmVhazsN
CiAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uVVA6DQogICAgICAgICAgICAgICAg
b2Zmc2V0cyA9IFtbLTcsMF0sWzAsMF0sWzcsMF0sWzAsN11dOw0KICAgICAgICAgICAgICAg
IGJyZWFrOw0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5SSUdIVDoNCiAgICAg
ICAgICAgICAgICBvZmZzZXRzID0gW1stNywwXSxbMCwtN10sWzAsMF0sWzAsN11dOw0KICAg
ICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgDQogICAgICAgICAgICBjYXNlIHRoaXMuRElS
RUNUSU9OLkRPV046DQogICAgICAgICAgICAgICAgb2Zmc2V0cyA9IFtbLTcsMF0sWzAsLTdd
LFs3LDBdLFswLDddXTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KDQog
ICAgICAgIGxldCBpbWFnaW5CdWxsZXRMZWZ0ID0gbmV3IEJ1bGxldCgnaW1hZ2luMScsIDEw
LCAxLCB0aGlzLkRJUkVDVElPTi5MRUZULCB0aGlzLnN2TXlUYW5rLlgtdGhpcy5CVUxMRVRf
V0lEVEgvMiwgdGhpcy5zdk15VGFuay5ZK3RoaXMuVEFOS19XSURUSC8yKTsNCiAgICAgICAg
bGV0IGltYWdpbkJ1bGxldFRvcCA9IG5ldyBCdWxsZXQoJ2ltYWdpbjInLCAxMCwgMSwgdGhp
cy5ESVJFQ1RJT04uVVAsIHRoaXMuc3ZNeVRhbmsuWCt0aGlzLlRBTktfV0lEVEgvMiwgdGhp
cy5zdk15VGFuay5ZLXRoaXMuQlVMTEVUX1dJRFRILzIpOw0KICAgICAgICBsZXQgaW1hZ2lu
QnVsbGV0UmlnaHQgPSBuZXcgQnVsbGV0KCdpbWFnaW4zJywgMTAsIDEsIHRoaXMuRElSRUNU
SU9OLlJJR0hULCB0aGlzLnN2TXlUYW5rLlgrdGhpcy5UQU5LX1dJRFRIK3RoaXMuQlVMTEVU
X1dJRFRILzIsIHRoaXMuc3ZNeVRhbmsuWSt0aGlzLlRBTktfV0lEVEgvMik7DQogICAgICAg
IGxldCBpbWFnaW5CdWxsZXRCb3R0b20gPSBuZXcgQnVsbGV0KCdpbWFnaW40JywgMTAsIDEs
IHRoaXMuRElSRUNUSU9OLkRPV04sIHRoaXMuc3ZNeVRhbmsuWCArIHRoaXMuVEFOS19XSURU
SC8yLCB0aGlzLnN2TXlUYW5rLlkrdGhpcy5UQU5LX1dJRFRIK3RoaXMuQlVMTEVUX1dJRFRI
LzIpOw0KICAgICAgICBsZXQgaW1hZ2luQnVsbGV0cyA9IFtpbWFnaW5CdWxsZXRMZWZ0LCBp
bWFnaW5CdWxsZXRUb3AsIGltYWdpbkJ1bGxldFJpZ2h0LCBpbWFnaW5CdWxsZXRCb3R0b21d
Ow0KICAgICAgICBmb3IobGV0IGk9MDsgaTxpbWFnaW5CdWxsZXRzLmxlbmd0aDsgaSsrKSB7
DQogICAgICAgICAgICBsZXQgaW1hZ2luQnVsbGV0ID0gaW1hZ2luQnVsbGV0c1tpXTsNCiAg
ICAgICAgICAgIGltYWdpbkJ1bGxldC5YICs9IG9mZnNldHNbaV1bMF07DQogICAgICAgICAg
ICBpbWFnaW5CdWxsZXQuWSArPSBvZmZzZXRzW2ldWzFdOw0KICAgICAgICAgICAgaW1hZ2lu
QnVsbGV0LndpZHRoID0gdGhpcy5CVUxMRVRfV0lEVEg7DQogICAgICAgIH0NCg0KICAgICAg
ICByZXR1cm4gdGhpcy5kZWR1Y2VJZkNyYXNoRm9ySW1hZ2luQnVsbGV0cyhpbWFnaW5CdWxs
ZXRzKTsNCg0KICAgIH0NCg0KICAgIGluRGFuZ2VyQXJlYShteVRhbmssIHRhcmdldFRhbmsp
IHsNCiAgICAgICAgbGV0IGFic0R4ID0gTWF0aC5hYnMobXlUYW5rLlgtdGFyZ2V0VGFuay5Y
KTsNCiAgICAgICAgbGV0IGFic0R5ID0gTWF0aC5hYnMobXlUYW5rLlktdGFyZ2V0VGFuay5Z
KTsNCiAgICAgICAgaWYgKGFic0R4PD10aGlzLkRBTkdFUl9ESVNUQU5DRSAmJiBhYnNEeTw9
dGhpcy5EQU5HRVJfRElTVEFOQ0UpIHsNCiAgICAgICAgICAgIC8vIFRPRE8gU0NKIOS4remX
tOmXtOmalOi+g+Wwj+aXtuaegeaYk+iiq+aUu+WHu++8jOaaguaXtuiupOS4uuWPquimgeWc
qOWMuuWfn+WGheWwseimgemAg+i3ke+8jOWQjumdouWGjeiAg+iZkeWFt+S9k+aDheWGtQ0K
ICAgICAgICAgICAgLy8gaWYgKHRoaXMuaXNMaW5lQ3Jvc3NXaXRoTWV0YWxzKG15VGFuaywg
dGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAgIC8vICAgICAvLyDkuK3pl7TmnInpmpznoo3n
ianvvIzkuI3mmK/ljbHpmanljLrln58NCiAgICAgICAgICAgIC8vICAgICByZXR1cm4gZmFs
c2UNCiAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAg
ICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBpbkZpcmVBcmVhKG15
VGFuaywgdGFyZ2V0VGFuaykgew0KICAgICAgICBsZXQgYWJzRHggPSBNYXRoLmFicyhteVRh
bmsuWC10YXJnZXRUYW5rLlgpOw0KICAgICAgICBsZXQgYWJzRHkgPSBNYXRoLmFicyhteVRh
bmsuWS10YXJnZXRUYW5rLlkpOw0KICAgICAgICBpZiAoKGFic0R4PHRoaXMuTUlOX0ZJUkVf
T0ZGU0VUICYmIGFic0R5Pj10aGlzLkRBTkdFUl9ESVNUQU5DRSAmJiBhYnNEeSA8PSB0aGlz
LkZJUkVfTUFYX0RJU1RBTkNFKQ0KICAgICAgICAgICAgfHwgKGFic0R5PHRoaXMuTUlOX0ZJ
UkVfT0ZGU0VUICYmIGFic0R4Pj10aGlzLkRBTkdFUl9ESVNUQU5DRSAmJiBhYnNEeCA8PSB0
aGlzLkZJUkVfTUFYX0RJU1RBTkNFKSkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNCbG9j
a0J5TWV0YWwobXlUYW5rLCB0YXJnZXRUYW5rKSkgew0KICAgICAgICAgICAgICAgIC8vIOS4
remXtOaciemanOeijeeJqe+8jOS4jeaYr+W8gOeBq+WMuuWfnw0KICAgICAgICAgICAgICAg
IHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVl
Ow0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBpblVu
U2FmZUFwcHJvYWNoQXJlYShteVRhbmssIHRhcmdldFRhbmspIHsNCg0KICAgICAgICBsZXQg
YWJzRHggPSBNYXRoLmFicyhteVRhbmsuWC10YXJnZXRUYW5rLlgpOw0KICAgICAgICBsZXQg
YWJzRHkgPSBNYXRoLmFicyhteVRhbmsuWS10YXJnZXRUYW5rLlkpOw0KDQogICAgICAgIGlm
ICh0aGlzLmlzQmxvY2tCeU1ldGFsKG15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAg
ICAgIC8vIOS4remXtOaciemanOeijeeJqe+8jOS4jeaYr+mdnuWuieWFqOaOpei/keWMuuWf
nw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYg
KGFic0R4PnRoaXMuREFOR0VSX0RJU1RBTkNFICYmIGFic0R4PD10aGlzLlVOU0FGRV9BUFBS
T0FDSF9ESVNUQU5DRSAmJiBhYnNEeT49dGhpcy5EQU5HRVJfRElTVEFOQ0UgJiYgYWJzRHk8
PXRoaXMuVU5TQUZFX0FQUFJPQUNIX0RJU1RBTkNFKSB7DQogICAgICAgICAgICByZXR1cm4g
dHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYWJzRHg+PXRoaXMuTUlOX0ZJUkVfT0ZG
U0VUICYmIGFic0R4PD10aGlzLkRBTkdFUl9ESVNUQU5DRSAmJiBhYnNEeT49dGhpcy5EQU5H
RVJfRElTVEFOQ0UgJiYgYWJzRHk8PXRoaXMuVU5TQUZFX0FQUFJPQUNIX0RJU1RBTkNFKSB7
DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYWJz
RHk+PXRoaXMuTUlOX0ZJUkVfT0ZGU0VUICYmIGFic0R5PD10aGlzLkRBTkdFUl9ESVNUQU5D
RSAmJiBhYnNEeD49dGhpcy5EQU5HRVJfRElTVEFOQ0UgJiYgYWJzRHg8PXRoaXMuVU5TQUZF
X0FQUFJPQUNIX0RJU1RBTkNFKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAg
ICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgaW5GYXJGaXJlQXJl
YShteVRhbmssIHRhcmdldFRhbmspIHsNCiAgICAgICAgbGV0IGFic0R4ID0gTWF0aC5hYnMo
bXlUYW5rLlgtdGFyZ2V0VGFuay5YKTsNCiAgICAgICAgbGV0IGFic0R5ID0gTWF0aC5hYnMo
bXlUYW5rLlktdGFyZ2V0VGFuay5ZKTsNCiAgICAgICAgaWYgKChhYnNEeDx0aGlzLk1JTl9G
SVJFX09GRlNFVCAmJiBhYnNEeT49dGhpcy5GSVJFX01BWF9ESVNUQU5DRSkgfHwgKGFic0R5
PHRoaXMuTUlOX0ZJUkVfT0ZGU0VUICYmIGFic0R4Pj10aGlzLkZJUkVfTUFYX0RJU1RBTkNF
KSkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNCbG9ja0J5TWV0YWwobXlUYW5rLCB0YXJn
ZXRUYW5rKSkgew0KICAgICAgICAgICAgICAgIC8vIOS4remXtOaciemanOeijeeJqe+8jOS4
jeaYr+i/nOeoi+W8gOeBq+WMuuWfnw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsN
CiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQog
ICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBlc2NhcGU0QUkoZHgsIGR5KSB7
DQogICAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5TVE9QOw0KICAgICAg
ICBsZXQgYWJzRHggPSBNYXRoLmFicyhkeCk7DQogICAgICAgIGxldCBhYnNEeSA9IE1hdGgu
YWJzKGR5KTsNCiAgICAgICAgaWYgKGFic0R5IDwgYWJzRHgpIHsNCiAgICAgICAgICAgIC8v
IHRoaXMubG9nKCJkaXN0YW5jZUhvciA6ICIgKyBkaXN0YW5jZUhvcikNCiAgICAgICAgICAg
IGlmIChhYnNEeSA8PSB0aGlzLkRBTkdFUl9ESVNUQU5DRSkgew0KICAgICAgICAgICAgICAg
IC8vIOWwj+S6juWuieWFqOi3neemu++8jOi/nOemuw0KICAgICAgICAgICAgICAgIGlmIChk
eSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3ZNeVRhbmsuWSA+PSBj
YW52YXMuaGVpZ2h0LXRoaXMuREFOR0VSX0RJU1RBTkNFKSB7DQogICAgICAgICAgICAgICAg
ICAgICAgICBpZiAoZHggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGly
ZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgICAgICAgICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRo
aXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyDlkIzm
lrnlkJHlvoDkuIvpgIMNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRo
aXMuRElSRUNUSU9OLkRPV047DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN2TXlUYW5r
LlkgPD0gdGhpcy5EQU5HRVJfRElTVEFOQ0UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAg
IGlmIChkeCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24g
PSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJF
Q1RJT04uTEVGVDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAg
ICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWQjOaWueWQkeW+
gOS4iumAgw0KICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJF
Q1RJT04uVVA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoN
CiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8g5LiN5Lya5Ye6546w
DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyB0aGlz
LmxvZygiZGlzdGFuY2VWZXIgOiAiICsgZGlzdGFuY2VWZXIpDQogICAgICAgICAgICBpZiAo
YWJzRHggPD0gdGhpcy5EQU5HRVJfRElTVEFOQ0UpIHsNCiAgICAgICAgICAgICAgICAvLyDl
sI/kuo7lronlhajot53nprvvvIzov5znprsNCiAgICAgICAgICAgICAgICAvLyDlpoLmnpzp
naDov5HovrnnlYzvvIzovazlkJHnprvlvIDvvIwg5ZCm5YiZ5ZCM5ZCR6L+c56a7DQogICAg
ICAgICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyDlvoDl
j7Pot5ENCiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c6Z2g6L+R6L6555WM77yM6L2s
5ZCR56a75byA77yMIOWQpuWImeWQjOWQkei/nOemuw0KICAgICAgICAgICAgICAgICAgICBp
ZiAodGhpcy5zdk15VGFuay5YID49IGNhbnZhcy53aWR0aC10aGlzLkRBTkdFUl9ESVNUQU5D
RSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkRPV047DQog
ICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uUklHSFQ7DQogICAgICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgICAgICAvLyDlvoDlt6bot5HvvIzlpoLmnpwNCiAgICAgICAgICAgICAgICAgICAgaWYg
KHRoaXMuc3ZNeVRhbmsuWCA8PSB0aGlzLkRBTkdFUl9ESVNUQU5DRSkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkRPV047DQogICAgICAgICAgICAgICAg
ICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlv
biA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZGly
ZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
ICAgLy8g5LiN5Lya5Ye6546wDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAg
ICByZXR1cm4gdGhpcy5jaGVja0lmTmVlZFR1cm5EaXJlY3Rpb24oZGlyZWN0aW9uKTsNCiAg
ICB9DQoNCiAgICBhcHByb2FjaChkeCwgZHkpIHsNCiAgICAgICAgbGV0IGFic0R4ID0gTWF0
aC5hYnMoZHgpOw0KICAgICAgICBsZXQgYWJzRHkgPSBNYXRoLmFicyhkeSk7DQogICAgICAg
IGlmIChhYnNEeCA+IGFic0R5KSB7DQogICAgICAgICAgICAvLyDlvoDmsLTlubPmlrnlkJHn
p7vliqgNCiAgICAgICAgICAgIGlmIChkeCA+IDApIHsNCiAgICAgICAgICAgICAgICByZXR1
cm4gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgICAgfQ0K
ICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAg
ICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLkRPV047DQogICAgICAg
ICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gVE9ETyBTQ0og5piv5ZCm6KaB6ICD6JmR
6YeN5ZCI55qE5oOF5Ya1DQogICAgfQ0KDQogICAgZXNjYXBlNEVuZW15KGJlc3RNZXRhbCkg
ew0KICAgICAgICAvLyDnu5Xpmpznoo3nianpgIPnprsNCiAgICAgICAgLy8gMS4g5Yik5pat
6LCB5pu06Z2g6L+R5Lit5b+D54K577yM5Lul5Yik5pat5piv5ZCm5Y+v5Lul6YCD56a7DQog
ICAgICAgIC8vIDIuIOagueaNruebuOWvueS9jee9ruehruWumumanOeijeeJqe+8jCDlubbn
p7vliqjliLDnm7jlupTpobbngrkNCiAgICAgICAgLy8gMy4g5qC55o2u6Led56a75piv5ZCm
5aKe5Yqg5p2l56Gu5a6a57uV6KGM5pa55ZCRDQoNCiAgICAgICAgbGV0IG15VGFua0NlbnRl
ciA9IHtYOnRoaXMuc3ZNeVRhbmsuWCArIHRoaXMuVEFOS19XSURUSC8yLCBZOnRoaXMuc3ZN
eVRhbmsuWSArIHRoaXMuVEFOS19XSURUSC8yfTsNCiAgICAgICAgbGV0IG1ldGFsQ2VudGVy
ID0ge1g6YmVzdE1ldGFsWzBdICsgdGhpcy5NRVRBTF9XSURUSC8yLCBZOmJlc3RNZXRhbFsx
XSArIHRoaXMuTUVUQUxfV0lEVEgvMn07DQogICAgICAgIGxldCBjZW50ZXJEeCA9IG15VGFu
a0NlbnRlci5YIC0gbWV0YWxDZW50ZXIuWDsNCiAgICAgICAgbGV0IGNlbnRlckR5ID0gbXlU
YW5rQ2VudGVyLlkgLSBtZXRhbENlbnRlci5ZOw0KDQogICAgICAgIGlmICh0aGlzLnJvbGxp
bmdNZXRhbChjZW50ZXJEeCwgY2VudGVyRHkpKSB7DQogICAgICAgICAgICByZXR1cm4gdGhp
cy5yb2xsTWV0YWwoY2VudGVyRHgsIGNlbnRlckR5LCBiZXN0TWV0YWwpOw0KICAgICAgICB9
IGVsc2Ugew0KICAgICAgICAgICAgLy8g5b6A5pyA5bCP6Ze06Led5aKe5Yqg55qE5pa55ZCR
56e75YqoDQogICAgICAgICAgICByZXR1cm4gdGhpcy5hcHByb2FjaE1ldGFsKGJlc3RNZXRh
bCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByb2xsTWV0YWwoZHgsIGR5LCBtZXRhbCkg
ew0KICAgICAgICAvLyDlr7nkuo7mr4/kuKrljLrln5/vvIzorqHnrpfkuInkuKrmlrnlkJHv
vIjkuKTkuKrnp7vliqjmlrnlkJHkuI7lvZPliY3kuI3liqjnmoTmlrnlkJHvvInlk6rkuKrk
uI7nm67moIfot53nprvovoPov5zvvIzliJnlvoDpgqPkuKrmlrnlkJHnp7vliqgNCiAgICAg
ICAgbGV0IGRpcmVjdGlvbnMgPSB0aGlzLmdldFR3b1JvbGxEaXJlY3Rpb25zKGR4LCBkeSk7
DQogICAgICAgIGRpcmVjdGlvbnMucHVzaCh0aGlzLkRJUkVDVElPTi5TVE9QKTsNCiAgICAg
ICAgbGV0IGNvcHlPZk15VGFuayA9IHRoaXMuY29weU9mVGFuayh0aGlzLnN2TXlUYW5rKTsN
CiAgICAgICAgbGV0IHRhcmdldFRhbmsgPSB0aGlzLnRhcmdldFRhbmtJbmZvWzJdOw0KICAg
ICAgICBsZXQgbWF4RGlzdGFuY2UgPSAwOw0KICAgICAgICBsZXQgZmluYWxEaXJlY3Rpb24g
PSB0aGlzLkRJUkVDVElPTi5TVE9QOw0KICAgICAgICBmb3IobGV0IGk9MDtpPGRpcmVjdGlv
bnMubGVuZ3RoO2krKykgew0KICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IGRpcmVjdGlv
bnNbaV07DQogICAgICAgICAgICBjb3B5T2ZNeVRhbmsuZGlyZWN0aW9uID0gZGlyZWN0aW9u
Ow0KICAgICAgICAgICAgbGV0IGltYWdpbmFyeVRhbmsgPSB0aGlzLmltYWdpbmVNb3ZlKDIs
IGNvcHlPZk15VGFuaywgdHJ1ZSk7DQogICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSB0aGlz
LmNhbGN1bGF0ZURpc3RhbmNlV2l0aE1ldGFsKGltYWdpbmFyeVRhbmssIHRhcmdldFRhbmss
IG1ldGFsKTsNCiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IG1heERpc3RhbmNlKSB7DQog
ICAgICAgICAgICAgICAgbWF4RGlzdGFuY2UgPSBkaXN0YW5jZTsNCiAgICAgICAgICAgICAg
ICBmaW5hbERpcmVjdGlvbiA9IGRpcmVjdGlvbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAg
fQ0KICAgICAgICByZXR1cm4gZmluYWxEaXJlY3Rpb247DQogICAgfQ0KDQoNCg0KICAgIC8q
Kg0KICAgICAqIOiOt+WPluW9k+WJjee7lemanOeijeeJqeaXtuWPr+iDveeahOS4pOS4quaW
ueWQke+8jOaOkumZpOaOieWcqOaVjOaWueaJk+WHu+iMg+WbtOWGheeahOaWueWQke+8jOWN
s+WcqOWQjOS4gOi9tOe6v+S4iueahA0KICAgICAqIEBwYXJhbSBkeCDmsLTlubPmlrnlkJHk
uIrnmoTkuK3lv4PngrnnmoTlt64NCiAgICAgKiBAcGFyYW0gZHkg56uW55u05pa55ZCR5LiK
55qE5Lit5b+D54K555qE5beuDQogICAgICovDQogICAgZ2V0VHdvUm9sbERpcmVjdGlvbnMo
ZHgsIGR5KSB7DQogICAgICAgIGxldCBkaXJlY3Rpb25zID0gW107DQogICAgICAgIGxldCBt
aW5EaXN0YW5jZSA9ICh0aGlzLlRBTktfV0lEVEggKyB0aGlzLk1FVEFMX1dJRFRIKS8yOw0K
ICAgICAgICBsZXQgbWF4RGlzdGFuY2UgPSBtaW5EaXN0YW5jZSArIHRoaXMuc3ZNeVRhbmsu
c3BlZWQ7DQogICAgICAgIGxldCBhYnNEeCA9IE1hdGguYWJzKGR4KTsNCiAgICAgICAgbGV0
IGFic0R5ID0gTWF0aC5hYnMoZHkpOw0KICAgICAgICBpZiAoYWJzRHggPCBtaW5EaXN0YW5j
ZSAmJiBhYnNEeSA+PSBtaW5EaXN0YW5jZSAmJiBhYnNEeSA8IG1heERpc3RhbmNlKSB7DQog
ICAgICAgICAgICAvLyDlnKjpmpznoo3niannmoTkuIrkuIvkuKTovrkNCiAgICAgICAgICAg
IGRpcmVjdGlvbnMgPSBbdGhpcy5ESVJFQ1RJT04uTEVGVCwgdGhpcy5ESVJFQ1RJT04uUklH
SFRdOw0KICAgICAgICB9DQogICAgICAgIGlmIChhYnNEeSA8IG1pbkRpc3RhbmNlICYmIGFi
c0R4ID49IG1pbkRpc3RhbmNlICYmIGFic0R4IDwgbWF4RGlzdGFuY2UpIHsNCiAgICAgICAg
ICAgIC8vIOWcqOmanOeijeeJqeeahOW3puWPs+S4pOi+uQ0KICAgICAgICAgICAgZGlyZWN0
aW9ucyA9IFt0aGlzLkRJUkVDVElPTi5VUCwgdGhpcy5ESVJFQ1RJT04uRE9XTl07DQogICAg
ICAgIH0NCiAgICAgICAgaWYgKGFic0R4ID49IG1pbkRpc3RhbmNlICYmIGFic0R4IDwgbWF4
RGlzdGFuY2UgJiYgYWJzRHkgPj0gbWluRGlzdGFuY2UgJiYgYWJzRHkgPCBtYXhEaXN0YW5j
ZSkgew0KICAgICAgICAgICAgaWYgKGR4IDwgMCAmJiBkeSA8IDApIHsNCiAgICAgICAgICAg
ICAgICBkaXJlY3Rpb25zID0gW3RoaXMuRElSRUNUSU9OLlJJR0hULCB0aGlzLkRJUkVDVElP
Ti5ET1dOXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChkeCA8IDAgJiYgZHkg
PiAwKSB7DQogICAgICAgICAgICAgICAgZGlyZWN0aW9ucyA9IFt0aGlzLkRJUkVDVElPTi5S
SUdIVCwgdGhpcy5ESVJFQ1RJT04uVVBdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
aWYgKGR4ID4gMCAmJiBkeSA8IDApIHsNCiAgICAgICAgICAgICAgICBkaXJlY3Rpb25zID0g
W3RoaXMuRElSRUNUSU9OLkxFRlQsIHRoaXMuRElSRUNUSU9OLkRPV05dOw0KICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgaWYgKGR4ID4gMCAmJiBkeSA+IDApIHsNCiAgICAgICAgICAg
ICAgICBkaXJlY3Rpb25zID0gW3RoaXMuRElSRUNUSU9OLkxFRlQsIHRoaXMuRElSRUNUSU9O
LlVQXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyDlhbbku5bmg4Xl
hrXkuI3lnKjnu5XooYzojIPlm7TlhoUNCg0KICAgICAgICByZXR1cm4gZGlyZWN0aW9uczsN
Cg0KICAgIH0NCg0KICAgIGlzSW5Db25uZWN0UG9pbnRBcmVhKGFic0R4LCBhYnNEeSkgew0K
ICAgICAgICBsZXQgbWluRGlzdGFuY2UgPSAodGhpcy5UQU5LX1dJRFRIICsgdGhpcy5NRVRB
TF9XSURUSCkvMjsNCiAgICAgICAgcmV0dXJuIChhYnNEeCA+PSBtaW5EaXN0YW5jZSAmJiBh
YnNEeSA+PSBtaW5EaXN0YW5jZSk7DQogICAgfQ0KDQogICAgcm9sbGluZ01ldGFsKGR4LCBk
eSkgew0KICAgICAgICBsZXQgcm9sbGluZ0Rpc3RhbmNlID0gdGhpcy5UQU5LX1dJRFRILzIg
KyB0aGlzLk1FVEFMX1dJRFRILzIgKyB0aGlzLnN2TXlUYW5rLnNwZWVkOw0KICAgICAgICBp
ZiAoTWF0aC5hYnMoZHgpIDwgcm9sbGluZ0Rpc3RhbmNlICYmIE1hdGguYWJzKGR5KSA8IHJv
bGxpbmdEaXN0YW5jZSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0N
CiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGFwcHJvYWNoTWV0YWwobWV0
YWwpIHsNCiAgICAgICAgbGV0IGRpcmVjdGlvbjsNCg0KICAgICAgICBsZXQgbmVhcmVzdFZl
cnRleE9mVGFuayA9IHRoaXMuZ2V0TmVhcmVzdFZlcnRleE9mVGFuayh0aGlzLnN2TXlUYW5r
LCBtZXRhbCk7DQogICAgICAgIGxldCBuZWFyZXN0VmVydGV4ID0gdGhpcy5nZXROZWFyZXN0
VmVydGV4T2ZNZXRhbChtZXRhbCk7DQoNCiAgICAgICAgbGV0IGR4ID0gbmVhcmVzdFZlcnRl
eE9mVGFuay5YIC0gbmVhcmVzdFZlcnRleC5YOw0KICAgICAgICBsZXQgZHkgPSBuZWFyZXN0
VmVydGV4T2ZUYW5rLlkgLSBuZWFyZXN0VmVydGV4Llk7DQogICAgICAgIC8vIGR4LGR5IOW6
lOivpeS7pei3neemu+WdpuWFi+acgOi/keeahOmhtueCueadpeiuoeeulw0KICAgICAgICBp
ZiAoTWF0aC5hYnMoZHgpID4gTWF0aC5hYnMoZHkpKSB7DQogICAgICAgICAgICBpZiAoZHgg
PiAwKSB7DQogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVG
VDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0g
dGhpcy5ESVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAgICAgZGlyZWN0aW9u
ID0gdGhpcy5ESVJFQ1RJT04uVVA7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
ICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkRPV047DQogICAgICAgICAgICB9
DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjsNCiAgICB9DQoNCiAgICBm
aW5kQmVzdE1ldGFsMkVzY2FwZSgpIHsNCiAgICAgICAgbGV0IG1pbkRpc3RhbmNlID0gdGhp
cy5NQVhfRElTVEFOQ0U7DQogICAgICAgIGxldCBiZXN0TWV0YWw7DQogICAgICAgIGxldCB0
YXJnZXRUYW5rID0gdGhpcy50YXJnZXRUYW5rSW5mb1syXTsNCiAgICAgICAgZm9yKGxldCBp
PTA7IGk8YW1ldGFsLmxlbmd0aDtpKyspIHsNCiAgICAgICAgICAgIGxldCBtZXRhbCA9IGFt
ZXRhbFtpXTsNCiAgICAgICAgICAgIC8vIOi3neemu+iuoeeul+mhu+S9v+eUqOacgOi/keeC
ue+8jOiAjOS4jeiDveS9v+eUqOWbuuWumueCuQ0KICAgICAgICAgICAgbGV0IG5lYXJlc3RW
ZXJ0ZXhPZlRhbmsgPSB0aGlzLmdldE5lYXJlc3RWZXJ0ZXhPZlRhbmsodGhpcy5zdk15VGFu
aywgbWV0YWwpOw0KICAgICAgICAgICAgbGV0IG5lYXJlc3RWZXJ0ZXggPSB0aGlzLmdldE5l
YXJlc3RWZXJ0ZXhPZk1ldGFsKG1ldGFsKTsNCg0KICAgICAgICAgICAgbGV0IG5lYXJlc3RW
ZXJ0ZXhPZk15VGFuayA9IHRoaXMuZ2V0TmVhcmVzdFZlcnRleE9mVGFua3ModGhpcy5zdk15
VGFuaywge1g6dGFyZ2V0VGFuay5YK3RoaXMuVEFOS19XSURUSC8yLCBZOnRhcmdldFRhbmsu
WSt0aGlzLlRBTktfV0lEVEgvMn0pOw0KICAgICAgICAgICAgbGV0IG5lYXJlc3RWZXJ0ZXhP
ZlRhcmdldCA9IHRoaXMuZ2V0TmVhcmVzdFZlcnRleE9mVGFua3ModGFyZ2V0VGFuaywge1g6
dGhpcy5zdk15VGFuay5YK3RoaXMuVEFOS19XSURUSC8yLCBZOnRoaXMuc3ZNeVRhbmsuWSt0
aGlzLlRBTktfV0lEVEgvMn0pOw0KDQogICAgICAgICAgICBsZXQgZHgxID0gbmVhcmVzdFZl
cnRleE9mTXlUYW5rLlggLSBuZWFyZXN0VmVydGV4T2ZUYXJnZXQuWDsNCiAgICAgICAgICAg
IGxldCBkeDIgPSBuZWFyZXN0VmVydGV4T2ZUYW5rLlggLSBuZWFyZXN0VmVydGV4Llg7DQog
ICAgICAgICAgICBsZXQgZHkxID0gbmVhcmVzdFZlcnRleE9mTXlUYW5rLlkgLSBuZWFyZXN0
VmVydGV4T2ZUYXJnZXQuWTsNCiAgICAgICAgICAgIGxldCBkeTIgPSBuZWFyZXN0VmVydGV4
T2ZUYW5rLlkgLSBuZWFyZXN0VmVydGV4Llk7DQogICAgICAgICAgICBpZiAodGhpcy5pbkRh
bmdlckFyZWEodGhpcy5zdk15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAgICAg
ICAvLyDkuKTogIXot53nprvlsI/kuo7lronlhajot53nprsNCiAgICAgICAgICAgICAgICBp
ZiAoKGR4MSAqIGR4MiA+IDAgJiYgTWF0aC5hYnMoZHgxKSA8IE1hdGguYWJzKGR4MikpIHx8
IChkeTEgKiBkeTIgPiAwICYmIE1hdGguYWJzKGR5MSkgPCBNYXRoLmFicyhkeTIpKSkgew0K
ICAgICAgICAgICAgICAgICAgICAvLyDpmpznoo3niankuI7mlYzmlrnlnablhYvlnKjmiJHm
lrnnmoTlkIzkuIDkvqfkuJTmiJHmlrnot53nprvmlYzmlrnmr5Tot53nprvpmpznoo3mm7To
v5HvvIzliJnkuI3opoENCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHRlbXBEaXN0YW5j
ZSA9IHRoaXMuZ2V0RGlzdGFuY2VPZlBvaW50cyh0aGlzLnN2TXlUYW5rLCB7WDptZXRhbFsw
XSwgWTptZXRhbFsxXX0pOw0KICAgICAgICAgICAgaWYgKHRlbXBEaXN0YW5jZSA8IG1pbkRp
c3RhbmNlKSB7DQogICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSB0ZW1wRGlzdGFuY2U7
DQogICAgICAgICAgICAgICAgYmVzdE1ldGFsID0gbWV0YWw7DQogICAgICAgICAgICB9DQog
ICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGJlc3RNZXRhbDsNCiAgICB9DQoNCiAgICBnZXRO
ZWFyZXN0VmVydGV4T2ZUYW5rcyh0YW5rLCBjZW50ZXJQb2ludCkgew0KICAgICAgICBsZXQg
bmVhcmVzdFZlcnRleCA9IHt9Ow0KICAgICAgICBsZXQgdmVydGV4MSA9IHtYOnRhbmsuWCwg
WTp0YW5rLll9Ow0KICAgICAgICBsZXQgdmVydGV4MiA9IHtYOnRhbmsuWCArIHRoaXMuVEFO
S19XSURUSCwgWTp0YW5rLll9Ow0KICAgICAgICBsZXQgdmVydGV4MyA9IHtYOnRhbmsuWCAr
IHRoaXMuVEFOS19XSURUSCwgWTp0YW5rLlkgKyB0aGlzLlRBTktfV0lEVEh9Ow0KICAgICAg
ICBsZXQgdmVydGV4NCA9IHtYOnRhbmsuWCwgWTp0YW5rLlkgKyB0aGlzLlRBTktfV0lEVEh9
Ow0KICAgICAgICBsZXQgdmVydGV4cyA9IFt2ZXJ0ZXgxLCB2ZXJ0ZXgyLCB2ZXJ0ZXgzLCB2
ZXJ0ZXg0XTsNCg0KICAgICAgICBsZXQgbWluRGlzdGFuY2UgPSB0aGlzLk1BWF9ESVNUQU5D
RTsNCiAgICAgICAgZm9yKGxldCBpPTA7aTx2ZXJ0ZXhzLmxlbmd0aDtpKyspIHsNCiAgICAg
ICAgICAgIGxldCB2ZXJ0ZXggPSB2ZXJ0ZXhzW2ldOw0KICAgICAgICAgICAgbGV0IGRpc3Rh
bmNlID0gdGhpcy5nZXREaXN0YW5jZU9mUG9pbnRzKHtYOmNlbnRlclBvaW50LlgsIFk6Y2Vu
dGVyUG9pbnQuWX0sIHZlcnRleCk7DQogICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5E
aXN0YW5jZSkgew0KICAgICAgICAgICAgICAgIG1pbkRpc3RhbmNlID0gZGlzdGFuY2U7DQog
ICAgICAgICAgICAgICAgbmVhcmVzdFZlcnRleCA9IHZlcnRleDsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmVhcmVzdFZlcnRleDsNCiAgICB9DQoNCiAg
ICBnZXROZWFyZXN0VmVydGV4T2ZUYW5rKHRhbmssIG1ldGFsKSB7DQogICAgICAgIGxldCBu
ZWFyZXN0VmVydGV4ID0ge307DQogICAgICAgIGxldCB2ZXJ0ZXgxID0ge1g6dGFuay5YLCBZ
OnRhbmsuWX07DQogICAgICAgIGxldCB2ZXJ0ZXgyID0ge1g6dGFuay5YICsgdGhpcy5UQU5L
X1dJRFRILCBZOnRhbmsuWX07DQogICAgICAgIGxldCB2ZXJ0ZXgzID0ge1g6dGFuay5YICsg
dGhpcy5UQU5LX1dJRFRILCBZOnRhbmsuWSArIHRoaXMuVEFOS19XSURUSH07DQogICAgICAg
IGxldCB2ZXJ0ZXg0ID0ge1g6dGFuay5YLCBZOnRhbmsuWSArIHRoaXMuVEFOS19XSURUSH07
DQogICAgICAgIGxldCB2ZXJ0ZXhzID0gW3ZlcnRleDEsIHZlcnRleDIsIHZlcnRleDMsIHZl
cnRleDRdOw0KDQogICAgICAgIGxldCBtaW5EaXN0YW5jZSA9IHRoaXMuTUFYX0RJU1RBTkNF
Ow0KICAgICAgICBmb3IobGV0IGk9MDtpPHZlcnRleHMubGVuZ3RoO2krKykgew0KICAgICAg
ICAgICAgbGV0IHZlcnRleCA9IHZlcnRleHNbaV07DQogICAgICAgICAgICBsZXQgZGlzdGFu
Y2UgPSB0aGlzLmdldERpc3RhbmNlT2ZQb2ludHMoe1g6bWV0YWxbMF0rdGhpcy5NRVRBTF9X
SURUSC8yLCBZOm1ldGFsWzFdK3RoaXMuTUVUQUxfV0lEVEgvMn0sIHZlcnRleCk7DQogICAg
ICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkgew0KICAgICAgICAgICAgICAg
IG1pbkRpc3RhbmNlID0gZGlzdGFuY2U7DQogICAgICAgICAgICAgICAgbmVhcmVzdFZlcnRl
eCA9IHZlcnRleDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4g
bmVhcmVzdFZlcnRleDsNCiAgICB9DQoNCiAgICBnZXROZWFyZXN0VmVydGV4T2ZNZXRhbCht
ZXRhbCkgew0KICAgICAgICBsZXQgbmVhcmVzdFZlcnRleCA9IHt9Ow0KICAgICAgICBsZXQg
dmVydGV4MSA9IHtYOm1ldGFsWzBdLCBZOm1ldGFsWzFdfTsNCiAgICAgICAgbGV0IHZlcnRl
eDIgPSB7WDptZXRhbFswXSArIHRoaXMuTUVUQUxfV0lEVEgsIFk6bWV0YWxbMV19Ow0KICAg
ICAgICBsZXQgdmVydGV4MyA9IHtYOm1ldGFsWzBdICsgdGhpcy5NRVRBTF9XSURUSCwgWTpt
ZXRhbFsxXSArIHRoaXMuTUVUQUxfV0lEVEh9Ow0KICAgICAgICBsZXQgdmVydGV4NCA9IHtY
Om1ldGFsWzBdLCBZOm1ldGFsWzFdICsgdGhpcy5NRVRBTF9XSURUSH07DQogICAgICAgIGxl
dCB2ZXJ0ZXhzID0gW3ZlcnRleDEsIHZlcnRleDIsIHZlcnRleDMsIHZlcnRleDRdOw0KDQog
ICAgICAgIGxldCBtaW5EaXN0YW5jZSA9IHRoaXMuTUFYX0RJU1RBTkNFOw0KICAgICAgICBm
b3IobGV0IGk9MDtpPHZlcnRleHMubGVuZ3RoO2krKykgew0KICAgICAgICAgICAgbGV0IHZl
cnRleCA9IHZlcnRleHNbaV07DQogICAgICAgICAgICAvLyDorqHnrpfkuK3ngrnkuI7lkITp
obbngrnnmoTot53nprsNCiAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IHRoaXMuZ2V0RGlz
dGFuY2VPZlBvaW50cyh7WDp0aGlzLnN2TXlUYW5rLlgrdGhpcy5UQU5LX1dJRFRILzIsIFk6
dGhpcy5zdk15VGFuay5ZK3RoaXMuVEFOS19XSURUSC8yfSwgdmVydGV4KTsNCiAgICAgICAg
ICAgIGlmIChkaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7DQogICAgICAgICAgICAgICAgbWlu
RGlzdGFuY2UgPSBkaXN0YW5jZTsNCiAgICAgICAgICAgICAgICBuZWFyZXN0VmVydGV4ID0g
dmVydGV4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBuZWFy
ZXN0VmVydGV4Ow0KICAgIH0NCg0KICAgIGNoZWNrSWZOZWVkVHVybkRpcmVjdGlvbihkaXJl
Y3Rpb24pIHsNCiAgICAgICAgbGV0IGNvcHlPZlRhbmsgPSB0aGlzLmNvcHlPZlRhbmsodGhp
cy5zdk15VGFuayk7DQogICAgICAgIGNvcHlPZlRhbmsuZGlyZWN0aW9uID0gZGlyZWN0aW9u
Ow0KICAgICAgICBsZXQgcG9pbnQgPSB0aGlzLmltYWdpbmVNb3ZlKDEsIGNvcHlPZlRhbmss
IHRydWUpOw0KICAgICAgICBpZiAocG9pbnQuWCA9PT0gY29weU9mVGFuay5YICYmIHBvaW50
LlkgPT09IGNvcHlPZlRhbmsuWSkgew0KICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy50
dXJuRGlyZWN0aW9uV2hlbkNvbGxpZGUoZGlyZWN0aW9uKTsNCiAgICAgICAgfQ0KICAgICAg
ICByZXR1cm4gZGlyZWN0aW9uOw0KICAgIH0NCg0KICAgIHR1cm5EaXJlY3Rpb25XaGVuQ29s
bGlkZShkaXJlY3Rpb24pIHsNCiAgICAgICAgbGV0IGZpbmFsRGlyZWN0aW9uOw0KICAgICAg
ICBzd2l0Y2ggKGRpcmVjdGlvbikgew0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElP
Ti5VUDoNCiAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uRE9XTjoNCiAgICAgICAg
ICAgICAgICBpZiAodGhpcy5zdk15VGFuay5YIDwgY2FudmFzLndpZHRoLzIpIHsNCiAgICAg
ICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsN
CiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBmaW5hbERp
cmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5M
RUZUOg0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5SSUdIVDoNCiAgICAgICAg
ICAgICAgICBpZiAodGhpcy5zdk15VGFuay5YIDwgY2FudmFzLmhlaWdodC8yKSB7DQogICAg
ICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsN
CiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBmaW5hbERp
cmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmluYWxEaXJl
Y3Rpb247DQogICAgfQ0KDQogICAgc3RvcEFuZEZpcmUoZHgsIGR5KSB7DQogICAgICAgIC8v
IOaUu+WHu+WMuuWfn++8jOWBnOatouW5tuaUu+WHuyDopoHogIPomZHmlrnlkJENCiAgICAg
ICAgbGV0IGFic0RYID0gTWF0aC5hYnMoZHgpOw0KICAgICAgICBsZXQgYWJzRHkgPSBNYXRo
LmFicyhkeSk7DQogICAgICAgIGlmIChhYnNEWCA+IGFic0R5KSB7DQogICAgICAgICAgICBp
ZiAoZHggPiAwKSB7DQogICAgICAgICAgICAgICAgLy8g5oiR5pa55Zyo5Y+z6L65DQogICAg
ICAgICAgICAgICAgaWYgKHRoaXMuc3ZNeVRhbmsuZGlyZWN0aW9uID09PSB0aGlzLkRJUkVD
VElPTi5MRUZUKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElP
Ti5TVE9QOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAg
IHJldHVybiB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8g5oiR5pa55Zyo5bem6L65DQog
ICAgICAgICAgICAgICAgaWYgKHRoaXMuc3ZNeVRhbmsuZGlyZWN0aW9uID09PSB0aGlzLkRJ
UkVDVElPTi5SSUdIVCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJF
Q1RJT04uU1RPUDsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg
ICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKGR5ID4g
MCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbiA9PT0g
dGhpcy5ESVJFQ1RJT04uVVApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMu
RElSRUNUSU9OLlNUT1A7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgICAgIH0N
CiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuc3ZNeVRh
bmsuZGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5ET1dOKSB7DQogICAgICAgICAgICAg
ICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5TVE9QOw0KICAgICAgICAgICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5ET1dO
Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0N
Cg0KICAgIHN1cGVyQXR0YWNrKGR4LCBkeSkgew0KICAgICAgICBpZiAodGhpcy5zdXBlckF0
dGFja0RpcmVjdGlvbnMubGVuZ3RoID4gMCAmJiB0aGlzLmZpcnN0QXR0YWNrTG9vcENvdW50
ID4gMCkgew0KICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5sb29wQ291bnQgLSB0aGlz
LmZpcnN0QXR0YWNrTG9vcENvdW50Ow0KICAgICAgICAgICAgaWYgKGluZGV4IDwgdGhpcy5z
dXBlckF0dGFja0RpcmVjdGlvbnMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJu
IHRoaXMuc3VwZXJBdHRhY2tEaXJlY3Rpb25zW2luZGV4XTsNCiAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgdGhpcy5zdXBlckF0dGFja0RpcmVjdGlvbnMgPSBbXTsN
CiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0QXR0YWNrTG9vcENvdW50ID0gMDsNCiAgICAg
ICAgICAgICAgICB0aGlzLmluU3VwZXJBdHRhY2tNb2RlID0gZmFsc2U7DQogICAgICAgICAg
ICB9DQogICAgICAgIH0gDQogICAgICAgIGxldCBhYnNEWCA9IE1hdGguYWJzKGR4KTsNCiAg
ICAgICAgbGV0IGFic0R5ID0gTWF0aC5hYnMoZHkpOw0KICAgICAgICBsZXQgZmlyc3REaXJl
Y3Rpb24gPSB0aGlzLkRJUkVDVElPTi5TVE9QOw0KICAgICAgICBsZXQgYWZ0ZXJEaXJlY3Rp
b25zID0gdGhpcy5ESVJFQ1RJT04uU1RPUDsNCiAgICAgICAgLy8g6YeN5ZCI77yM5byA54Gr
DQogICAgICAgIGlmIChhYnNEWCA+IGFic0R5KSB7DQogICAgICAgICAgICBpZiAoZHggPiAw
KSB7DQogICAgICAgICAgICAgICAgLy8g5oiR5pa55Zyo5Y+z6L65DQogICAgICAgICAgICAg
ICAgZmlyc3REaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgICAg
fSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjlt6bovrkNCiAgICAgICAg
ICAgICAgICBmaXJzdERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAgICAgIGFm
dGVyRGlyZWN0aW9ucyA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgICAgICBhZnRlckRpcmVjdGlvbnMgPSB0aGlzLkRJUkVDVElPTi5E
T1dOOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYg
KGR5ID4gMCkgew0KICAgICAgICAgICAgICAgIGZpcnN0RGlyZWN0aW9uID0gdGhpcy5ESVJF
Q1RJT04uVVA7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGZpcnN0
RGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgIGlmIChkeCA+IDApIHsNCiAgICAgICAgICAgICAgICBhZnRlckRpcmVjdGlvbnMg
PSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAg
ICAgICAgICBhZnRlckRpcmVjdGlvbnMgPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAg
ICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB2YXIgYnJlYWtlZCA9IGZhbHNlOw0KICAg
ICAgICBmb3IobGV0IGo9MDtqPDUgJiYgIWJyZWFrZWQ7aisrKSB7DQogICAgICAgICAgICB0
aGlzLnN1cGVyQXR0YWNrRGlyZWN0aW9ucy5wdXNoKFtmaXJzdERpcmVjdGlvbiwgdHJ1ZV0p
Ow0KICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8NjsgaSsrKSB7DQogICAgICAgICAgICAg
ICAgdmFyIGNvcHlPZk15VGFuayA9IHRoaXMuY29weU9mVGFuayh0aGlzLnN2TXlUYW5rKTsN
CiAgICAgICAgICAgICAgICBjb3B5T2ZNeVRhbmsuZGlyZWN0aW9uID0gYWZ0ZXJEaXJlY3Rp
b25zOw0KICAgICAgICAgICAgICAgIHZhciBzdGVwID0gaiAqIDYgKyBpOw0KICAgICAgICAg
ICAgICAgIHZhciB0YW5rQWZ0ZXJNb3ZlID0gdGhpcy5pbWFnaW5lTW92ZShzdGVwLCBjb3B5
T2ZNeVRhbmssIHRydWUpOw0KICAgICAgICAgICAgICAgIGlmICgoYWZ0ZXJEaXJlY3Rpb25z
ID09PSB0aGlzLkRJUkVDVElPTi5VUCAmJiB0YW5rQWZ0ZXJNb3ZlLlkgPD0gMCkNCiAgICAg
ICAgICAgICAgICAgICAgfHwgKGFmdGVyRGlyZWN0aW9ucyA9PT0gdGhpcy5ESVJFQ1RJT04u
RE9XTiAmJiB0YW5rQWZ0ZXJNb3ZlLlkgPj0gY2FudmFzLmhlaWdodC10aGlzLlRBTktfV0lE
VEgpDQogICAgICAgICAgICAgICAgICAgIHx8IChhZnRlckRpcmVjdGlvbnMgPT09IHRoaXMu
RElSRUNUSU9OLkxFRlQgJiYgdGFua0FmdGVyTW92ZS5YIDw9IDApDQogICAgICAgICAgICAg
ICAgICAgIHx8IChhZnRlckRpcmVjdGlvbnMgPT09IHRoaXMuRElSRUNUSU9OLlJJR0hUICYm
IHRhbmtBZnRlck1vdmUuWCA+PSBjYW52YXMud2lkdGgtdGhpcy5UQU5LX1dJRFRIKSkgew0K
ICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtlZCA9IHRydWU7DQogICAgICAgICAgICAg
ICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAg
dGhpcy5zdXBlckF0dGFja0RpcmVjdGlvbnMucHVzaChbYWZ0ZXJEaXJlY3Rpb25zLCBmYWxz
ZV0pOyAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmZpcnN0
QXR0YWNrTG9vcENvdW50ID0gdGhpcy5sb29wQ291bnQ7DQogICAgICAgIHJldHVybiBbZmly
c3REaXJlY3Rpb24sIHRydWVdOw0KICAgIH0NCg0KICAgIG5lYXJBdHRhY2soZHgsIGR5KSB7
DQogICAgICAgIGxldCBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlNUT1A7DQog
ICAgICAgIGxldCBhYnNEeCA9IE1hdGguYWJzKGR4KTsNCiAgICAgICAgbGV0IGFic0R5ID0g
TWF0aC5hYnMoZHkpOw0KICAgICAgICBpZiAoYWJzRHggPCBhYnNEeSkgew0KICAgICAgICAg
ICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhp
cy5ESVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmIChkeSA+IDApIHsNCiAgICAg
ICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkRPV047DQogICAg
ICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhp
cy5ESVJFQ1RJT04uVVA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhp
cy5maXJlSWdub3JlRGlyZWN0aW9uID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIFtmaW5hbERp
cmVjdGlvbiwgZmFsc2VdOw0KICAgIH0NCg0KICAgIHB1cmVBdHRhY2soZHgsIGR5KSB7DQog
ICAgICAgIC8vIOaUu+WHu+WMuuWfn++8jOWBnOatouW5tuaUu+WHuyDopoHogIPomZHmlrnl
kJENCiAgICAgICAgbGV0IGFic0RYID0gTWF0aC5hYnMoZHgpOw0KICAgICAgICBsZXQgYWJz
RHkgPSBNYXRoLmFicyhkeSk7DQoNCiAgICAgICAgaWYgKGFic0RYID4gYWJzRHkpIHsNCiAg
ICAgICAgICAgIGlmIChkeCA+PSB0aGlzLm1pbkF0dGFja0Rpc3RhbmNlKSB7DQogICAgICAg
ICAgICAgICAgLy8g5oiR5pa55Zyo5Y+z6L65DQogICAgICAgICAgICAgICAgcmV0dXJuIHRo
aXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgIC8vIOaIkeaWueWcqOW3pui+uQ0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJ
UkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAg
ICAgICAgIGlmIChkeSA+PSB0aGlzLm1pbkF0dGFja0Rpc3RhbmNlKSB7DQogICAgICAgICAg
ICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAg
ICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGF0dGFjayhkeCwgZHkpIHsNCiAgICAg
ICAgLy8g5pS75Ye75Yy65Z+f77yM5YGc5q2i5bm25pS75Ye7IOimgeiAg+iZkeaWueWQkQ0K
ICAgICAgICBsZXQgYWJzRFggPSBNYXRoLmFicyhkeCk7DQogICAgICAgIGxldCBhYnNEeSA9
IE1hdGguYWJzKGR5KTsNCg0KICAgICAgICBsZXQgdGFyZ2V0VGFuayA9IHRoaXMudGFyZ2V0
VGFua0luZm9bMl07DQogICAgICAgIGlmIChhYnNEWCA+IGFic0R5KSB7DQogICAgICAgICAg
ICBpZihhYnNEeSA+PSB0aGlzLk1JTl9GSVJFX09GRlNFVC03ICYmIGFic0RYIDw9IDg0KSB7
DQogICAgICAgICAgICAgICAgaWYgKChkeCA8IDAgJiYgdGFyZ2V0VGFuay5kaXJlY3Rpb24g
PT09IHRoaXMuRElSRUNUSU9OLkxFRlQpIHx8IChkeCA+IDAgJiYgdGFyZ2V0VGFuay5kaXJl
Y3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLlJJR0hUKSkgew0KICAgICAgICAgICAgICAgICAg
ICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5E
SVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAg
ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIGlmIChkeCA+PSB0aGlzLm1pbkF0dGFja0Rpc3RhbmNlKSB7DQogICAgICAgICAgICAg
ICAgLy8g5oiR5pa55Zyo5Y+z6L65DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRElS
RUNUSU9OLkxFRlQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8v
IOaIkeaWueWcqOW3pui+uQ0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElP
Ti5SSUdIVDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAg
IGlmIChhYnNEWCA+PSB0aGlzLk1JTl9GSVJFX09GRlNFVC03ICAmJiBhYnNEeSA8PSA4NCkg
ew0KICAgICAgICAgICAgICAgIGlmIChkeSA8IDAgJiYgdGFyZ2V0VGFuay5kaXJlY3Rpb24g
PT09IHRoaXMuRElSRUNUSU9OLlVQIHx8IGR5ID4gMCAmJiB0YXJnZXRUYW5rLmRpcmVjdGlv
biA9PT0gdGhpcy5ESVJFQ1RJT04uRE9XTikgew0KICAgICAgICAgICAgICAgICAgICBpZiAo
ZHggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJ
T04uTEVGVDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAg
ICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAg
IGlmIChkeSA+PSB0aGlzLm1pbkF0dGFja0Rpc3RhbmNlKSB7DQogICAgICAgICAgICAgICAg
cmV0dXJuIHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAg
ICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlzVGFyZ2V0RGFuZ2Vyb3VzRGlyZWN0aW9uKHRh
cmdldFRhbmssIGR4LCBkeSkgew0KICAgICAgICBzd2l0Y2godGFyZ2V0VGFuay5kaXJlY3Rp
b24pIHsNCiAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uVVA6DQogICAgICAgICAg
ICAgICAgaWYgKGR5IDwgMCAmJiBNYXRoLmFicyhkeCkgPCAzMCkgew0KICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAg
ICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5ET1dOOg0KICAg
ICAgICAgICAgICAgIGlmIChkeSA+IDAgJiYgTWF0aC5hYnMoZHgpIDwgMzApIHsNCiAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAg
ICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5MRUZU
Og0KICAgICAgICAgICAgICAgIGlmIChkeCA8IDAgJiYgTWF0aC5hYnMoZHkpIDwgMzApIHsN
CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElP
Ti5SSUdIVDoNCiAgICAgICAgICAgICAgICBpZiAoZHggPiAwICYmIE1hdGguYWJzKGR5KSA8
IDMwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICByZXR1
cm4gZmFsc2U7DQogICAgfQ0KDQoNCiAgICBhZnRlclN0ZXBPbmUoZHgsIGR5KSB7DQogICAg
ICAgIGxldCBzaG91bGRGaXJlID0gZmFsc2U7DQogICAgICAgIGxldCBmaW5hbERpcmVjdGlv
biA9IHRoaXMuRElSRUNUSU9OLlNUT1A7DQoNCiAgICAgICAgbGV0IHRhcmdldFRhbmsgPSB0
aGlzLnRhcmdldFRhbmtJbmZvWzJdOw0KICAgICAgICBpZiAodGFyZ2V0VGFuay5YID09PSAw
KSB7DQogICAgICAgICAgICBpZiAodGFyZ2V0VGFuay5ZID09PSAwIHx8IHRhcmdldFRhbmsu
WSA9PT0gY2FudmFzLmhlaWdodC10aGlzLlRBTktfV0lEVEgpIHsNCiAgICAgICAgICAgICAg
ICBzaG91bGRGaXJlID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAg
ICAgIGlmICh0YXJnZXRUYW5rLlggPT09IGNhbnZhcy53aWR0aC10aGlzLlRBTktfV0lEVEgp
IHsNCiAgICAgICAgICAgIGlmICh0YXJnZXRUYW5rLlkgPT09IDAgfHwgdGFyZ2V0VGFuay5Z
ID09PSBjYW52YXMuaGVpZ2h0LXRoaXMuVEFOS19XSURUSCkgew0KICAgICAgICAgICAgICAg
IHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAg
ICAgaWYgKCFzaG91bGRGaXJlICYmIHRoaXMuaXNUYXJnZXREYW5nZXJvdXNEaXJlY3Rpb24o
dGFyZ2V0VGFuaywgZHgsIGR5KSkgew0KICAgICAgICAgICAgLy8g5Lik5q2l6Z2e5b+F5p2A
55qE5oOF5Ya16KaB5Yik5pat5pWM5pa55Z2m5YWL5piv5ZCm6L2s5ZCR5LqG77yM5aaC5p6c
6L2s5ZCR5LqG6Lef5oiR5pa555u45a+555qE5pa55ZCR77yM5YiZ5byA54GrDQogICAgICAg
ICAgICAvLyDmlYzmlrnosIPovazmlrnlkJHlh4blpIfmiZPmiJHku6zvvIzmiJHku6zkuZ/l
vIDngasNCiAgICAgICAgICAgIHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgICB9DQoNCiAg
ICAgICAgbGV0IGFic0RYID0gTWF0aC5hYnMoZHgpOw0KICAgICAgICBsZXQgYWJzRHkgPSBN
YXRoLmFicyhkeSk7DQogICAgICAgIGlmIChzaG91bGRGaXJlKSB7DQogICAgICAgICAgICBp
ZiAoYWJzRFggPCAzMCAmJiBhYnNEeSA8IDMwKSB7DQogICAgICAgICAgICAgICAgLy8g5Lik
5Liq5pa55ZCR6YO95Y+v5omT77yM5YiZ6YCJ5oup5LiO5b2T5YmN5pa55ZCR55u45ZCM55qE
5pa55ZCRDQogICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbjEgPSB0aGlzLkRJUkVDVElP
Ti5TVE9QOw0KICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24yID0gdGhpcy5ESVJFQ1RJ
T04uU1RPUDsNCiAgICAgICAgICAgICAgICBpZiAoZHggPj0gdGhpcy5taW5BdHRhY2tEaXN0
YW5jZSkgew0KICAgICAgICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjlj7PovrkNCiAgICAg
ICAgICAgICAgICAgICAgZGlyZWN0aW9uMSA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7DQogICAg
ICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8g5oiR5pa55Zyo
5bem6L65DQogICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjEgPSB0aGlzLkRJUkVDVElP
Ti5SSUdIVDsNCiAgICAgICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAgICAgaWYg
KGR5ID49IHRoaXMubWluQXR0YWNrRGlzdGFuY2UpIHsNCiAgICAgICAgICAgICAgICAgICAg
ZGlyZWN0aW9uMiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjIgPSB0aGlzLkRJUkVDVElPTi5E
T1dOOw0KICAgICAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgICAgICBpZiAodGhp
cy5zdk15VGFuay5kaXJlY3Rpb24gPT09IGRpcmVjdGlvbjEpIHsNCiAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuIFtkaXJlY3Rpb24xLCB0cnVlXTsNCiAgICAgICAgICAgICAgICB9IGVs
c2UgaWYgKHRoaXMuc3ZNeVRhbmsuZGlyZWN0aW9uID09PSBkaXJlY3Rpb24yKSB7DQogICAg
ICAgICAgICAgICAgICAgIHJldHVybiBbZGlyZWN0aW9uMiwgdHJ1ZV07DQogICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBUT0RP
IFNDSiDliKTmlq3lr7nmiYvmlrnlrZDlvLnmlbDph4/lj4rmtojlpLHml7bpl7TvvIzlhrPl
rprmmK/lkKbopoHov5vlhaXmlLvlh7vojIPlm7QNCiAgICAgICAgLy8g5a+55omL5pa55oqK
5a2Q5by55omT5a6MLOabtOaUueacgOWwj+i3neemuw0KICAgICAgICBpZiAodGhpcy5lbmVt
eUJ1bGxldHMubGVuZ3RoID09PSA1KSB7DQogICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9
IHRoaXMuYXR0YWNrKGR4LCBkeSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBz
d2l0Y2godGFyZ2V0VGFuay5kaXJlY3Rpb24pIHsNCiAgICAgICAgICAgICAgICBjYXNlIHRo
aXMuRElSRUNUSU9OLlVQOg0KICAgICAgICAgICAgICAgICAgICBpZiAoZHkgPCAwKSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzRHkgPCAzMCkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlz
LkRJUkVDVElPTi5ET1dOOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAg
ICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLnB1cmVBdHRhY2soZHgs
IGR5KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVh
azsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLkRPV046DQogICAgICAg
ICAgICAgICAgICAgIGlmIChkeSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlm
IChhYnNEeSA8IDMwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkRmly
ZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAg
ICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAg
ICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJl
Y3Rpb24gPSB0aGlzLnB1cmVBdHRhY2soZHgsIGR5KTsNCiAgICAgICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRo
aXMuRElSRUNUSU9OLkxFRlQ6DQogICAgICAgICAgICAgICAgICAgIGlmIChkeCA8IDApIHsN
CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhYnNEWCA8IDMwKSB7DQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc2hvdWxkRmlyZSA9IHRydWU7DQogICAgICAgICAgICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRo
aXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLnB1cmVBdHRhY2so
ZHgsIGR5KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBi
cmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLlJJR0hUOg0KICAg
ICAgICAgICAgICAgICAgICBpZiAoZHggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICBpZiAoYWJzRFggPCAzMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3Vs
ZEZpcmUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAg
ICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZmlu
YWxEaXJlY3Rpb24gPSB0aGlzLnB1cmVBdHRhY2soZHgsIGR5KTsNCiAgICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAg
ICAgICAgfQ0KDQogICAgICAgIHJldHVybiBbZmluYWxEaXJlY3Rpb24sIHNob3VsZEZpcmVd
Ow0KICAgIH0NCg0KICAgIHZlcnlDYXV0aW9uQXR0YWNrKGR4LCBkeSkgew0KDQogICAgICAg
IGxldCBhYnNEWCA9IE1hdGguYWJzKGR4KTsNCiAgICAgICAgbGV0IGFic0R5ID0gTWF0aC5h
YnMoZHkpOw0KDQogICAgICAgIGxldCBzaG91bGRGaXJlID0gZmFsc2U7DQoNCiAgICAgICAg
bGV0IHRhcmdldFRhbmsgPSB0aGlzLnRhcmdldFRhbmtJbmZvWzJdOw0KICAgICAgICBpZiAo
dGFyZ2V0VGFuay5YID09PSAwKSB7DQogICAgICAgICAgICBpZiAodGFyZ2V0VGFuay5ZID09
PSAwIHx8IHRhcmdldFRhbmsuWSA9PT0gY2FudmFzLmhlaWdodC10aGlzLlRBTktfV0lEVEgp
IHsNCiAgICAgICAgICAgICAgICBzaG91bGRGaXJlID0gdHJ1ZTsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0YXJnZXRUYW5rLlggPT09IGNhbnZhcy53aWR0
aC10aGlzLlRBTktfV0lEVEgpIHsNCiAgICAgICAgICAgIGlmICh0YXJnZXRUYW5rLlkgPT09
IDAgfHwgdGFyZ2V0VGFuay5ZID09PSBjYW52YXMuaGVpZ2h0LXRoaXMuVEFOS19XSURUSCkg
ew0KICAgICAgICAgICAgICAgIHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgICAgICAgfQ0K
ICAgICAgICB9DQoNCg0KICAgICAgICBsZXQgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVD
VElPTi5TVE9QOw0KICAgICAgICBzd2l0Y2godGFyZ2V0VGFuay5kaXJlY3Rpb24pIHsNCiAg
ICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uVVA6DQogICAgICAgICAgICAgICAgaWYg
KGR5ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjkuIvpnaLvvIzl
j6/ku6Xpmo/kvr/otbANCiAgICAgICAgICAgICAgICAgICAgaWYgKGFic0RYID4gYWJzRHkp
IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJF
Q1RJT04uVVA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICBpZiAoZHggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgICAg
ICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbERp
cmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5E
T1dOOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAg
ICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgICBpZiAo
ZHkgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOaIkeaWueWcqOS4iumdou+8jOWP
r+S7pemaj+S+v+i1sA0KICAgICAgICAgICAgICAgICAgICBpZiAoYWJzRFggPiBhYnNEeSkg
ew0KICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVD
VElPTi5ET1dOOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAgICAg
ICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxE
aXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04u
VVA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAg
ICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5MRUZUOg0KICAgICAgICAgICAgICAgIGlmIChk
eCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8g5oiR5pa55Zyo5Y+z6Z2i77yM5Y+v
5Lul6ZqP5L6/6LWwDQogICAgICAgICAgICAgICAgICAgIGlmIChhYnNEeSA+IGFic0RYKSB7
DQogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNU
SU9OLkxFRlQ7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgICAgICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJl
Y3Rpb24gPSB0aGlzLkRJUkVDVElPTi5ET1dOOw0KICAgICAgICAgICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAg
ICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2Ug
dGhpcy5ESVJFQ1RJT04uUklHSFQ6DQogICAgICAgICAgICAgICAgaWYgKGR4IDwgMCkgew0K
ICAgICAgICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjlt6bpnaLvvIzlj6/ku6Xpmo/kvr/o
tbANCiAgICAgICAgICAgICAgICAgICAgaWYgKGFic0R5ID4gYWJzRFgpIHsNCiAgICAgICAg
ICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uUklHSFQ7
DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJl
Y3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0
aGlzLkRJUkVDVElPTi5ET1dOOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAg
ICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KDQogICAg
ICAgIHJldHVybiBbZmluYWxEaXJlY3Rpb24sIHNob3VsZEZpcmVdOw0KICAgIH0NCg0KICAg
IGVzY2FwZUZvckFwcHJvYWNoKGR4LCBkeSkgew0KICAgICAgICBsZXQgZGlyZWN0aW9uOw0K
ICAgICAgICBsZXQgYWJzRHggPSBNYXRoLmFicyhkeCk7DQogICAgICAgIGxldCBhYnNEeSA9
IE1hdGguYWJzKGR5KTsNCiAgICAgICAgaWYgKGFic0R4ID49IGFic0R5KSB7DQogICAgICAg
ICAgICBpZiAoZHggPiAwKSB7DQogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5E
SVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg
IGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICAgICAgICB9DQogICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAg
ICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uVVA7DQog
ICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tJZk5l
ZWRUdXJuRGlyZWN0aW9uKGRpcmVjdGlvbik7DQogICAgfQ0KDQogICAgZ29BbmRGaXJlKGR4
LCBkeSkgew0KICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uU1RPUDsN
CiAgICAgICAgaWYgKGR4ID49IHRoaXMuRklSRV9NQVhfRElTVEFOQ0UpIHsNCiAgICAgICAg
ICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICAgIH0NCiAgICAg
ICAgaWYgKGR4IDw9IC10aGlzLkZJUkVfTUFYX0RJU1RBTkNFKSB7DQogICAgICAgICAgICBk
aXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgfQ0KICAgICAgICBp
ZiAoZHkgPj0gdGhpcy5GSVJFX01BWF9ESVNUQU5DRSkgew0KICAgICAgICAgICAgZGlyZWN0
aW9uID0gdGhpcy5ESVJFQ1RJT04uVVA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGR5IDw9
IC10aGlzLkZJUkVfTUFYX0RJU1RBTkNFKSB7DQogICAgICAgICAgICBkaXJlY3Rpb24gPSB0
aGlzLkRJUkVDVElPTi5ET1dOOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBkaXJlY3Rp
b247DQogICAgfQ0KDQogICAgZmluZE5lYXJlc3RUYW5rKCkgew0KICAgICAgICAvLyDpkojl
r7npmpznoo3nianov5vooYzlpITnkIbvvIzmnInpmpznoo3nianml7bpnIDopoHnibnmroro
rqHnrpcNCiAgICAgICAgbGV0IGhpZ2hlc3RTY29yZSA9IC10aGlzLk1BWF9ESVNUQU5DRTsN
Cg0KICAgICAgICAvLyDnprvmiJHmlrnmnIDov5HnmoRUYW5r5L2N572uDQogICAgICAgIGxl
dCBkaXN0YW5jZVZlciA9IGNhbnZhcy5oZWlnaHQ7DQogICAgICAgIGxldCBkaXN0YW5jZUhv
ciA9IGNhbnZhcy53aWR0aDsNCg0KICAgICAgICBsZXQgbmVhcmVzdFRhbms7DQoNCiAgICAg
ICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFsbEVuZW15VGFuay5sZW5ndGg7IGkrKykg
ew0KICAgICAgICAgICAgbGV0IHRhbmsgPSB0aGlzLmFsbEVuZW15VGFua1tpXTsNCiAgICAg
ICAgICAgIC8vIOaVjOaWueWdpuWFiw0KICAgICAgICAgICAgbGV0IGR4ID0gdGhpcy5zdk15
VGFuay5YIC0gdGFuay5YOw0KICAgICAgICAgICAgbGV0IGR5ID0gdGhpcy5zdk15VGFuay5Z
IC0gdGFuay5ZOw0KDQogICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlT2ZUYW5r
KHRhbmspOw0KICAgICAgICAgICAgDQoNCiAgICAgICAgICAgIGlmIChzY29yZSA+IGhpZ2hl
c3RTY29yZSkgew0KICAgICAgICAgICAgICAgIGhpZ2hlc3RTY29yZSA9IHNjb3JlOw0KICAg
ICAgICAgICAgICAgIGRpc3RhbmNlSG9yID0gZHg7DQogICAgICAgICAgICAgICAgZGlzdGFu
Y2VWZXIgPSBkeTsNCiAgICAgICAgICAgICAgICBuZWFyZXN0VGFuayA9IHRhbms7DQogICAg
ICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gY29uc29sZS5sb2coInRhbmsgc2Nv
cmUgaXMgOiAiLCBuZWFyZXN0VGFuaywgaGlnaGVzdFNjb3JlKQ0KICAgICAgICByZXR1cm4g
W2Rpc3RhbmNlSG9yLCBkaXN0YW5jZVZlciwgbmVhcmVzdFRhbmtdOw0KICAgIH0NCg0KICAg
IHNjb3JlT2ZUYW5rKHRhbmspIHsNCiAgICAgICAgbGV0IGRpc3RhbmNlID0gdGhpcy5nZXRU
YW5rRGlzdGFuY2UodGhpcy5zdk15VGFuaywgdGFuayk7DQogICAgICAgIGxldCBtaW5EaXN0
YW5jZU9mQm91bmRMUiA9IE1hdGgubWluKHRhbmsuWCwgY2FudmFzLndpZHRoIC0gdGFuay5Y
KTsNCiAgICAgICAgbGV0IG1pbkRpc3RhbmNlT2ZCb3VuZFRCID0gTWF0aC5taW4odGFuay5Z
LCBjYW52YXMuaGVpZ2h0IC0gdGFuay5ZKTsNCiAgICAgICAgbGV0IHNjb3JlID0gLWRpc3Rh
bmNlICsgbWluRGlzdGFuY2VPZkJvdW5kTFIvOCArIG1pbkRpc3RhbmNlT2ZCb3VuZFRCLzY7
DQogICAgICAgIHJldHVybiBzY29yZTsNCiAgICB9DQoNCiAgICBnZXRUYW5rRGlzdGFuY2Uo
dGFuazEsIHRhbmsyKSB7DQogICAgICAgIC8vIOaVjOaWueWdpuWFiw0KICAgICAgICBsZXQg
ZHggPSB0YW5rMS5YIC0gdGFuazIuWDsNCiAgICAgICAgbGV0IGR5ID0gdGFuazEuWSAtIHRh
bmsyLlk7DQoNCiAgICAgICAgbGV0IHJlYWxEaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBv
dyhkeCwgMikgKyBNYXRoLnBvdyhkeSwgMikpOw0KICAgICAgICByZXR1cm4gcmVhbERpc3Rh
bmNlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWIpOaWreS4pOS4quWdpuWFi+aYr+WQ
puiiq+manOeijeeJqemYu+malA0KICAgICAqIOmmluWFiOaehOmAoOS4pOS4quS7peWdpuWF
i+S4reW/g+eCueS4uuS4reW/g++8jOS7peWtkOW8ueebtOW+hOS4uui+uemVv+eahOato+aW
ueW9og0KICAgICAqIOi/nuaOpeS4pOS4quato+aWueW9oueahOWbm+S4qumhtueCue+8jOW9
ouaIkOWbm+S4qumVv+aWueW9ou+8jOWIpOaWreWbm+S4qumVv+aWueW9ouS4jumanOeijeeJ
qeeahOeisOaSnuaDheWGtQ0KICAgICAqIOWmguaenOWbm+S4qumVv+aWueW9ouS4reS7u+S9
leS4gOS4quWPkeeUn+eisOaSnu+8jOivtOaYjuS4pOS4quWdpuWFi+iiq+mYu+malO+8jOWQ
puWImeS4jeiiq+mYu+malA0KICAgICAqIEBwYXJhbSB0YW5rMQ0KICAgICAqIEBwYXJhbSB0
YW5rMg0KICAgICAqLw0KICAgIGlzQmxvY2tCeU1ldGFsKHRhbmsxLCB0YW5rMikgew0KICAg
ICAgICBpZiAoIXRoaXMuaXNDb3VudGVyU3RyaWtlKCkpIHsNCiAgICAgICAgICAgIHJldHVy
biBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICAvLyDmnoTlu7rkuKTkuKrmraPmlrnlvaIN
CiAgICAgICAgbGV0IGRlbHRhID0gKHRoaXMuVEFOS19XSURUSC10aGlzLkJVTExFVF9XSURU
SCkvMjsNCiAgICAgICAgbGV0IHNxdWFyZTEgPSB7WDp0YW5rMS5YK2RlbHRhLCBZOnRhbmsx
LlkrZGVsdGEsIFI6dGhpcy5CVUxMRVRfV0lEVEh9Ow0KICAgICAgICBsZXQgc3F1YXJlMiA9
IHtYOnRhbmsyLlgrZGVsdGEsIFk6dGFuazIuWStkZWx0YSwgUjp0aGlzLkJVTExFVF9XSURU
SH07DQogICAgICAgIC8vIOW+l+WIsOWbm+S4qumVv+aWueW9og0KICAgICAgICBsZXQgcmVj
dHMgPSB0aGlzLmdldEZvdXJSZWN0T2ZUd29TcXVhcmVzKHNxdWFyZTEsIHNxdWFyZTIsIHRo
aXMuQlVMTEVUX1dJRFRIKTsNCiAgICAgICAgLy8g5Yik5pat6ZW/5pa55b2i5LiO6Zqc56KN
54mp5piv5ZCm56Kw5pKeDQogICAgICAgIGZvcihsZXQgaT0wO2k8cmVjdHMubGVuZ3RoO2kr
Kykgew0KICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tpXTsNCiAgICAgICAgICAgIGZv
cihsZXQgaj0wO2o8YW1ldGFsLmxlbmd0aDtqKyspIHsNCiAgICAgICAgICAgICAgICBsZXQg
bWV0YWwgPSBhbWV0YWxbal07DQogICAgICAgICAgICAgICAgaWYgKHRoaXMucmVjdENvbGxp
c2lvbk1ldGFsKHJlY3QueDEsIHJlY3QueTEsIHJlY3QueDIsIHJlY3QueTIsIG1ldGFsKSkg
ew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAg
IH0NCg0KICAgIC8vIOiOt+WPluWIsOS4pOS4quWdpuWFi+W9ouaIkOeahOWbm+adoemVv+aW
ueW9og0KICAgIGdldEZvdXJSZWN0T2ZUd29TcXVhcmVzKHMxLCBzMiwgcikgew0KICAgICAg
ICBsZXQgZHggPSBzMS5YIC0gczIuWDsNCiAgICAgICAgbGV0IGR5ID0gczEuWSAtIHMyLlk7
DQogICAgICAgIC8vIOWumuS5iemdoOW3pu+8jOS4iu+8jOWPs++8jOS4i+eahOWdpuWFiw0K
ICAgICAgICBsZXQgdHQsIHRwLCB0ciwgdGQ7DQogICAgICAgIC8vIOi+uemVvzsNCiAgICAg
ICAgbGV0IHcgPSByOyAgDQogICAgICAgIGlmIChkeCA+IDApIHsNCiAgICAgICAgICAgIGlm
IChkeSA+IDApIHsNCiAgICAgICAgICAgICAgICB0dCA9IHMyOw0KICAgICAgICAgICAgICAg
IHRwID0gczI7DQogICAgICAgICAgICAgICAgdHIgPSBzMTsNCiAgICAgICAgICAgICAgICB0
ZCA9IHMxOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0dCA9IHMy
Ow0KICAgICAgICAgICAgICAgIHRwID0gczE7DQogICAgICAgICAgICAgICAgdHIgPSBzMTsN
CiAgICAgICAgICAgICAgICB0ZCA9IHMyOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVs
c2Ugew0KICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAgICAgIHR0ID0g
czE7DQogICAgICAgICAgICAgICAgdHAgPSBzMjsNCiAgICAgICAgICAgICAgICB0ciA9IHMy
Ow0KICAgICAgICAgICAgICAgIHRkID0gczE7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgIHR0ID0gczE7DQogICAgICAgICAgICAgICAgdHAgPSBzMTsNCiAgICAg
ICAgICAgICAgICB0ciA9IHMyOw0KICAgICAgICAgICAgICAgIHRkID0gczI7DQogICAgICAg
ICAgICB9DQogICAgICAgIH0NCiAgICAgICAgbGV0IHJlY3QxID0ge3gxOnR0LlgsIHkxOnRw
LlksIHgyOnRyLlgrdywgeTI6dHAuWSt3fTsNCiAgICAgICAgbGV0IHJlY3QyID0ge3gxOnRy
LlgsIHkxOnRwLlksIHgyOnRyLlgrdywgeTI6dGQuWSt3fTsNCiAgICAgICAgbGV0IHJlY3Qz
ID0ge3gxOnR0LlgsIHkxOnRkLlksIHgyOnRyLlgrdywgeTI6dGQuWSt3fTsNCiAgICAgICAg
bGV0IHJlY3Q0ID0ge3gxOnR0LlgsIHkxOnRwLlksIHgyOnR0LlgrdywgeTI6dGQuWSt3fTsN
CiAgICAgICAgcmV0dXJuIFtyZWN0MSwgcmVjdDIsIHJlY3QzLCByZWN0NF07DQogICAgfQ0K
DQogICAgZ2V0RGlzdGFuY2VPZlBvaW50cyhwb2ludDEsIHBvaW50Mikgew0KICAgICAgICBy
ZXR1cm4gdGhpcy5nZXREaXN0YW5jZU9mKHBvaW50MS5YLXBvaW50Mi5YLCBwb2ludDEuWS1w
b2ludDIuWSk7DQogICAgfQ0KDQogICAgY2FsY3VsYXRlRGlzdGFuY2VXaXRoTWV0YWwodGFu
azEsIHRhbmsyLCBtZXRhbCkgew0KICAgICAgICBsZXQgZGlzdGFuY2U7DQogICAgICAgIGxl
dCBkeCA9IE1hdGguYWJzKHRhbmsxLlggLSB0YW5rMi5YKTsNCiAgICAgICAgbGV0IGR5ID0g
TWF0aC5hYnModGFuazEuWSAtIHRhbmsyLlkpOw0KDQogICAgICAgIGlmICh0aGlzLmlzUG9p
bnRSZWFjaGFibGUodGFuazEsIHRhbmsyLCBtZXRhbCkpIHsNCiAgICAgICAgICAgIGRpc3Rh
bmNlID0gZHggKyBkeTsNCiAgICAgICAgICAgIHJldHVybiBkaXN0YW5jZTsNCiAgICAgICAg
fQ0KDQogICAgICAgIGxldCBwb2ludHMgPSB0aGlzLmZpbmRUd29Db25uZWN0UG9pbnQodGFu
azEsIG1ldGFsKTsNCiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggIT09IDIpIHsNCiAgICAg
ICAgICAgIHRoaXMubG9nKCJzaGl0LCDmn6Xpl67popgiKTsNCiAgICAgICAgICAgIHJldHVy
biAwOw0KICAgICAgICB9DQoNCiAgICAgICAgbGV0IGRpc3RhbmNlcyA9IFtdOw0KICAgICAg
ICBmb3IobGV0IGk9MDtpPHBvaW50cy5sZW5ndGg7aSsrKSB7DQogICAgICAgICAgICBsZXQg
cG9pbnQgPSBwb2ludHNbaV07DQogICAgICAgICAgICBsZXQgZHgxID0gTWF0aC5hYnModGFu
azEuWCAtIHBvaW50LlgpOw0KICAgICAgICAgICAgbGV0IGR5MSA9IE1hdGguYWJzKHRhbmsx
LlkgLSBwb2ludC5ZKTsNCiAgICAgICAgICAgIGxldCBkeDIgPSBNYXRoLmFicyh0YW5rMi5Y
IC0gcG9pbnQuWCk7DQogICAgICAgICAgICBsZXQgZHkyID0gTWF0aC5hYnModGFuazIuWSAt
IHBvaW50LlkpOw0KICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gZHgxICsgZHkxICsgZHgy
ICsgZHkyOw0KICAgICAgICAgICAgZGlzdGFuY2VzLnB1c2goZGlzdGFuY2UpOw0KICAgICAg
ICB9DQoNCiAgICAgICAgcmV0dXJuIE1hdGgubWluLmFwcGx5KG51bGwsIGRpc3RhbmNlcyk7
DQoNCiAgICB9DQoNCiAgICBmaW5kVHdvQ29ubmVjdFBvaW50KHRhbmssIG1ldGFsKSB7DQog
ICAgICAgIGlmIChtZXRhbCA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICByZXR1cm4g
W107DQogICAgICAgIH0NCiAgICAgICAgbGV0IHBvaW50cyA9IFtdOw0KICAgICAgICBsZXQg
Y2VudGVyT2ZNZXRhbCA9IHtYOm1ldGFsWzBdK3RoaXMuTUVUQUxfV0lEVEgvMixZOm1ldGFs
WzFdK3RoaXMuTUVUQUxfV0lEVEgvMn07DQogICAgICAgIGZvcihsZXQgaT0wO2k8dGhpcy5z
dk5vU3RvcERpcmVjdGlvbnMubGVuZ3RoO2krKykgew0KICAgICAgICAgICAgbGV0IGRpcmVj
dGlvbiA9IHRoaXMuc3ZOb1N0b3BEaXJlY3Rpb25zW2ldOw0KICAgICAgICAgICAgbGV0IGNv
cHlPZlRhbmsgPSB0aGlzLmNvcHlPZlRhbmsodGFuayk7DQogICAgICAgICAgICBjb3B5T2ZU
YW5rLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjsNCiAgICAgICAgICAgIC8vIFRPRE8gU0NKIOWP
r+S8mOWMluS4uuS6jOWIhuazleafpeaJviAyMj0xNTAvNw0KICAgICAgICAgICAgbGV0IGxh
c3RJbWFnaW5hcnlUYW5rID0ge1g6MCwgWTowfTsNCiAgICAgICAgICAgIGZvcihsZXQgc3Rl
cD0xO3N0ZXA8PTIyO3N0ZXArKykgew0KICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hcnlU
YW5rID0gdGhpcy5pbWFnaW5lTW92ZShzdGVwLCBjb3B5T2ZUYW5rLCB0cnVlKTsNCiAgICAg
ICAgICAgICAgICBpZiAoaW1hZ2luYXJ5VGFuay5YID09PSBsYXN0SW1hZ2luYXJ5VGFuay5Y
ICYmIGltYWdpbmFyeVRhbmsuWSA9PT0gbGFzdEltYWdpbmFyeVRhbmsuWSkgew0KICAgICAg
ICAgICAgICAgICAgICAvLyDpgYfliLDovrnnlYzvvIzlgZzmraLmraTmlrnlkJHkuIrnmoTl
r7vmib4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIGxhc3RJbWFnaW5hcnlUYW5rID0gaW1hZ2luYXJ5VGFuazsNCiAg
ICAgICAgICAgICAgICBsZXQgY2VudGVyT2ZUYW5rID0ge1g6aW1hZ2luYXJ5VGFuay5YK3Ro
aXMuVEFOS19XSURUSC8yLCBZOmltYWdpbmFyeVRhbmsuWSt0aGlzLlRBTktfV0lEVEgvMn07
DQogICAgICAgICAgICAgICAgbGV0IGFic0R4ID0gTWF0aC5hYnMoY2VudGVyT2ZUYW5rLlgt
Y2VudGVyT2ZNZXRhbC5YKTsNCiAgICAgICAgICAgICAgICBsZXQgYWJzRHkgPSBNYXRoLmFi
cyhjZW50ZXJPZlRhbmsuWS1jZW50ZXJPZk1ldGFsLlkpOw0KICAgICAgICAgICAgICAgIGlm
ICh0aGlzLmlzSW5Db25uZWN0UG9pbnRBcmVhKGFic0R4LCBhYnNEeSkpIHsNCiAgICAgICAg
ICAgICAgICAgICAgcG9pbnRzLnB1c2goaW1hZ2luYXJ5VGFuayk7DQogICAgICAgICAgICAg
ICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAg
ICAgfQ0KICAgICAgICByZXR1cm4gcG9pbnRzOw0KDQogICAgfQ0KDQogICAgLy8g55uu5qCH
54K55a+55LqO5Y6f5aeL54K55piv5ZCm5Y+v6L6+77yM5aaC5p6c5Y+v6YCa6L+H5LiA5qyh
6L2s5ZCR5Yiw6L6+77yM5YiZ5Y+v6L6+DQogICAgaXNQb2ludFJlYWNoYWJsZShvcmlnaW5Q
b2ludCwgdGFyZ2V0UG9pbnQsIG1ldGFsKSB7DQogICAgICAgIGlmIChtZXRhbCA9PT0gdW5k
ZWZpbmVkKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAg
ICAvLyDmib7liLDkuKTkuKrlnablhYvlvaLmiJDnmoTmraPmlrnlvaLkuIrnmoTlj6blpJbk
uKTkuKrngrkNCiAgICAgICAgLy8g5YiG5Yir5LuO6L+Z5Lik5Liq54K55Ye65Y+R5YiwdGFu
azEsIHRhbmsy6L+e57q/77yM55yL55yL6L+e57q/5b2i5oiQ55qE6ZW/5pa55b2i5p2h5piv
5ZCm5LiO6Zqc56KN54mp55u456Kw5pKe77yM5aaC5p6c5a2Y5Zyo5LiN55u45Lqk55qE5oOF
5Ya177yM5YiZ5Lik6ICF6Led56a75Y2z5Li6ZHgrZHkNCiAgICAgICAgbGV0IHR3b090aGVy
UG9pbnRzID0gdGhpcy5nZXRPdGhlclR3b1BvaW50cyhvcmlnaW5Qb2ludCwgdGFyZ2V0UG9p
bnQpOw0KICAgICAgICBsZXQgcmVhY2hhYmxlID0gZmFsc2U7DQogICAgICAgIGZvcihsZXQg
aT0wO2k8dHdvT3RoZXJQb2ludHMubGVuZ3RoO2krKykgew0KICAgICAgICAgICAgbGV0IHBv
aW50ID0gdHdvT3RoZXJQb2ludHNbaV07DQogICAgICAgICAgICBsZXQgcmVjdHMgPSB0aGlz
LmdldFR3b1JlY3RzRnJvbVBvaW50KHBvaW50LCBvcmlnaW5Qb2ludCwgdGFyZ2V0UG9pbnQp
Ow0KICAgICAgICAgICAgbGV0IGNvbGxpZGUgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvcihs
ZXQgaj0wOyBqPHJlY3RzLmxlbmd0aDtqKyspIHsNCiAgICAgICAgICAgICAgICBsZXQgcmVj
dCA9IHJlY3RzW2pdOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY3RDb2xsaXNpb25N
ZXRhbChyZWN0LngxLCByZWN0LnkxLCByZWN0LngyLCByZWN0LnkyLCBtZXRhbCkpIHsNCiAg
ICAgICAgICAgICAgICAgICAgY29sbGlkZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAg
IGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAg
ICAgLy8g5b2T5YmN54K55LiN6IO955So5L2c6L+e5o6l54K5DQogICAgICAgICAgICBpZiAo
IWNvbGxpZGUpIHsNCiAgICAgICAgICAgICAgICByZWFjaGFibGUgPSB0cnVlOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHJlYWNoYWJsZTsNCg0KICAg
IH0NCg0KICAgIGdldE90aGVyVHdvUG9pbnRzKHQxLCB0Mikgew0KICAgICAgICBsZXQgcDEg
PSB7WDp0Mi5YLCBZOnQxLll9Ow0KICAgICAgICBsZXQgcDIgPSB7WDp0MS5YLCBZOnQyLll9
Ow0KICAgICAgICByZXR1cm4gW3AxLCBwMl07DQogICAgfQ0KDQogICAgZ2V0VHdvUmVjdHNG
cm9tUG9pbnQocG9pbnQsIHQxLCB0Mikgew0KICAgICAgICBsZXQgdyA9IHRoaXMuVEFOS19X
SURUSDsNCiAgICAgICAgbGV0IHJlY3QxLCByZWN0MjsNCiAgICAgICAgaWYgKHQxLlggPT09
IHQyLlggfHwgdDEuWSA9PT0gdDIuWSkgew0KICAgICAgICAgICAgLy8g5Y6f5aeL54K55LiO
55uu5qCH54K55Zyo5ZCM5LiA5rC05bmz57q/5oiW56uW55u057q/5LiKDQogICAgICAgICAg
ICByZWN0MSA9IHt4MTpwb2ludC5YLCB5MTpwb2ludC5ZLCB4Mjpwb2ludC5YK3csIHkyOnBv
aW50Llkrd307DQogICAgICAgICAgICAvLyDku47lsI/liLDlpKcNCiAgICAgICAgICAgIGlm
ICh0MS5ZID4gdDIuWSB8fCB0MS5YID4gdDIuWCkgew0KICAgICAgICAgICAgICAgIHJlY3Qy
ID0ge3gxOnQyLlgsIHkxOnQyLlksIHgyOnQxLlgrdywgeTI6dDEuWSt3fTsNCiAgICAgICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmVjdDIgPSB7eDE6dDEuWCwgeTE6dDEu
WSwgeDI6dDIuWCt3LCB5Mjp0Mi5ZK3d9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVs
c2Ugew0KICAgICAgICAgICAgaWYgKHBvaW50LlggPT09IHQxLlgpIHsNCiAgICAgICAgICAg
ICAgICBpZiAocG9pbnQuWSA8IHQxLlkpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBv
aW50LlggPiB0Mi5YKSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICByZWN0MSA9IHt4MTpw
b2ludC5YLCB5MTpwb2ludC5ZLCB4Mjp0MS5YK3csIHkyOnQxLlkrd307DQogICAgICAgICAg
ICAgICAgICAgICAgICByZWN0MiA9IHt4MTp0Mi5YLCB5MTp0Mi5ZLCB4Mjpwb2ludC5YK3cs
IHkyOnBvaW50Llkrd307DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgICAgICAgICByZWN0MSA9IHt4MTpwb2ludC5YLCB5MTpwb2ludC5ZLCB4Mjp0
MS5YK3csIHkyOnQxLlkrd307DQogICAgICAgICAgICAgICAgICAgICAgICByZWN0MiA9IHt4
MTpwb2ludC5YLCB5MTpwb2ludC5ZLCB4Mjp0Mi5YK3csIHkyOnQyLlkrd307DQogICAgICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgICAgICBpZiAocG9pbnQuWCA+IHQyLlgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAg
IHJlY3QxID0ge3gxOnQxLlgsIHkxOnQxLlksIHgyOnBvaW50LlgrdywgeTI6cG9pbnQuWSt3
fTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QyID0ge3gxOnQyLlgsIHkxOnQyLlks
IHgyOnBvaW50LlgrdywgeTI6cG9pbnQuWSt3fTsNCiAgICAgICAgICAgICAgICAgICAgfSBl
bHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QxID0ge3gxOnQxLlgsIHkxOnQx
LlksIHgyOnBvaW50LlgrdywgeTI6cG9pbnQuWSt3fTsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIHJlY3QyID0ge3gxOnBvaW50LlgsIHkxOnBvaW50LlksIHgyOnQyLlgrdywgeTI6dDIu
WSt3fTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gcG9pbnQuWCA9PT0gcG9pbnQu
WA0KICAgICAgICAgICAgICAgIGlmIChwb2ludC5ZIDwgdDIuWSkgew0KICAgICAgICAgICAg
ICAgICAgICBpZiAocG9pbnQuWCA+IHQxLlgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAg
IHJlY3QxID0ge3gxOnQxLlgsIHkxOnQxLlksIHgyOnBvaW50LlgrdywgeTI6cG9pbnQuWSt3
fTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QyID0ge3gxOnBvaW50LlgsIHkxOnBv
aW50LlksIHgyOnQyLlgrdywgeTI6dDIuWSt3fTsNCiAgICAgICAgICAgICAgICAgICAgfSBl
bHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QxID0ge3gxOnBvaW50LlgsIHkx
OnBvaW50LlksIHgyOnQyLlgrdywgeTI6dDIuWSt3fTsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIHJlY3QyID0ge3gxOnBvaW50LlgsIHkxOnBvaW50LlksIHgyOnQxLlgrdywgeTI6dDEu
WSt3fTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICAgIGlmIChwb2ludC5YID4gdDEuWCkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgcmVjdDEgPSB7eDE6dDEuWCwgeTE6dDEuWSwgeDI6cG9pbnQuWCt3
LCB5Mjpwb2ludC5ZK3d9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjdDIgPSB7eDE6
dDIuWCwgeTE6dDIuWSwgeDI6cG9pbnQuWCt3LCB5Mjpwb2ludC5ZK3d9Ow0KICAgICAgICAg
ICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjdDIgPSB7
eDE6cG9pbnQuWCwgeTE6cG9pbnQuWSwgeDI6dDEuWCt3LCB5Mjp0MS5ZK3d9Ow0KICAgICAg
ICAgICAgICAgICAgICAgICAgcmVjdDEgPSB7eDE6dDIuWCwgeTE6dDIuWSwgeDI6cG9pbnQu
WCt3LCB5Mjpwb2ludC5ZK3d9Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIFty
ZWN0MSwgcmVjdDJdOw0KDQogICAgfQ0KDQogICAgLy8g5o6n5Yi256e75YqoICAg5Li+5L6L
5a2Q77yaICDlkJHlt6bnp7vliqjvvJogdGhpcy5TVk1vdmUodGhpcy5ESVJFQ1RJT04uTEVG
VCkNCiAgICBTVk1vdmUoZGlyZWN0aW9uKSB7DQogICAgICAgIGlmICh0eXBlb2YgZGlyZWN0
aW9uID09PSB1bmRlZmluZWQpIHJldHVybjsNCiAgICAgICAgdGhpcy5zdk1vdmVFdi5rZXlD
b2RlID0gdGhpcy5TVkdldERpcmVjdGlvbktleUNvZGUoZGlyZWN0aW9uKTsNCiAgICAgICAg
ZG9jdW1lbnQub25rZXlkb3duKHRoaXMuc3ZNb3ZlRXYpOw0KICAgIH0NCg0KICAgIC8vIOW8
gOeBqw0KICAgIFNWRmlyZSgpIHsNCiAgICAgICAgbGV0IG5vdyA9IChuZXcgRGF0ZSgpKS52
YWx1ZU9mKCk7DQogICAgICAgIGlmIChub3cgLSB0aGlzLmZpcmV0aW1lc3RhbXAgPj0gdGhp
cy5NSU5fRklSRV9JTlRFUlZBTCkgew0KICAgICAgICAgICAgdGhpcy5maXJldGltZXN0YW1w
ID0gbm93Ow0KICAgICAgICAgICAgdGhpcy5zdkZpcmVFdi5rZXlDb2RlID0gdGhpcy5zdlR5
cGUgPT09ICJBIiA/IDMyIDogODsNCiAgICAgICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93bih0
aGlzLnN2RmlyZUV2KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIOagueaNrueOqeWu
tui/lOWbnuato+ehrueahOaWueWQkWtleUNvZGUNCiAgICBTVkdldERpcmVjdGlvbktleUNv
ZGUoZGlyZWN0aW9uKSB7DQogICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7DQogICAgICAg
ICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLlVQOg0KICAgICAgICAgICAgICAgIHJldHVybiB0
aGlzLnN2VHlwZSA9PT0gIkEiID8gODcgOiAzODsNCiAgICAgICAgICAgIGNhc2UgdGhpcy5E
SVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdlR5cGUgPT09
ICJBIiA/IDgzIDogNDA7DQogICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLkxFRlQ6
DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3ZUeXBlID09PSAiQSIgPyA2NSA6IDM3
Ow0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5SSUdIVDoNCiAgICAgICAgICAg
ICAgICByZXR1cm4gdGhpcy5zdlR5cGUgPT09ICJBIiA/IDY4IDogMzk7DQogICAgICAgIH0N
CiAgICB9DQoNCiAgICBTVkdldERpcmVjdGlvblN0cihkaXJlY3Rpb24pIHsNCiAgICAgICAg
c3dpdGNoIChkaXJlY3Rpb24pIHsNCiAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04u
VVA6DQogICAgICAgICAgICAgICAgcmV0dXJuICJVUCI7DQogICAgICAgICAgICBjYXNlIHRo
aXMuRElSRUNUSU9OLkRPV046DQogICAgICAgICAgICAgICAgcmV0dXJuICJET1dOIjsNCiAg
ICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uTEVGVDoNCiAgICAgICAgICAgICAgICBy
ZXR1cm4gIkxFRlQiOw0KICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5SSUdIVDoN
CiAgICAgICAgICAgICAgICByZXR1cm4gIlJJR0hUIjsNCiAgICAgICAgICAgIGRlZmF1bHQ6
DQogICAgICAgICAgICAgICAgcmV0dXJuICJTVE9QIjsNCiAgICAgICAgfQ0KICAgIH0NCg0K
ICAgIGlzQ291bnRlclN0cmlrZSgpIHsNCiAgICAgICAgcmV0dXJuIGFtZXRhbC5sZW5ndGgg
PiAwOw0KICAgIH0NCg0KICAgIHJlY3RDb2xsaXNpb25NZXRhbCh4MSwgeTEsIHgyLCB5Miwg
bWV0YWwpIHsNCiAgICAgICAgaWYgKG1ldGFsID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAg
ICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBsZXQgZHggPSB4Mi14MTsN
CiAgICAgICAgbGV0IGR5ID0geTIteTE7DQogICAgICAgIC8v6Zqc56KN6Zi75oyhDQogICAg
ICAgIGlmKHgxPm1ldGFsWzBdIC0gZHggJiYgeDEgPCBtZXRhbFswXSArIG1ldGFsWzJdICYm
IHkxID4gbWV0YWxbMV0tZHkgJiYgeTE8bWV0YWxbMV0gKyBtZXRhbFszXSkgew0KICAgICAg
ICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0K
ICAgIH0NCg0KICAgIGNvbGxpc2lvbk1ldGFsKHgseSxyKSB7DQogICAgICAgIC8v6Zqc56KN
6Zi75oyhDQogICAgICAgIGNvbnN0IG1ldGFsID0gYW1ldGFsOw0KICAgICAgICBpZihtZXRh
bC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBmb3IodmFyIGkgPSAwO2k8bWV0YWwubGVu
Z3RoO2krKykgew0KICAgICAgICAgICAgICAgIGlmKHg+bWV0YWxbaV1bMF0gLSByICYmIHgg
PCBtZXRhbFtpXVswXSArIG1ldGFsW2ldWzJdICYmIHkgPiBtZXRhbFtpXVsxXS1yICYmIHk8
bWV0YWxbaV1bMV0gKyBtZXRhbFtpXVszXSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAg
ICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAg
bG9nKC4uLmRhdGEpIHsNCiAgICAgICAgaWYgKHRoaXMuREVCVUcpIHsNCiAgICAgICAgICAg
IGNvbnNvbGUubG9nKGRhdGEuam9pbignICcpKTsNCg0KICAgICAgICB9DQogICAgfQ0KDQog
ICAgZXJyb3IoLi4uZGF0YSkgew0KICAgICAgICBpZiAodGhpcy5ERUJVRykgew0KICAgICAg
ICAgICAgY29uc29sZS5lcnJvcihkYXRhLmpvaW4oJyAnKSk7DQogICAgICAgIH0NCiAgICB9
DQoNCiAgICBzZXROYW1lKCkgew0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgN
CiAgICAgICAgICAgIGBQbGF5ZXIke3RoaXMudHlwZSA9PT0gIkEiID8gMSA6IDJ9YmFyTmFt
ZWANCiAgICAgICAgICApLnZhbHVlID0gIumXqueUtSINCiAgICAgICAgZG9jdW1lbnQuZ2V0
RWxlbWVudEJ5SWQoDQogICAgICAgIGBQbGF5ZXIke3RoaXMudHlwZSA9PT0gIkEiID8gMSA6
IDJ9TmFtZWANCiAgICAgICAgKS50ZXh0Q29udGVudCA9ICLpl6rnlLUiDQogICAgfQ0KDQog
ICAgLy8gUGxheWVyQS9QbGF5ZXJCDQp9KSgiQSIpOw==
--B_3686584859_2020502391
Content-type: text/javascript; name="playerB.js";
 x-mac-creator="4F50494D"
Content-ID: <0A77239A4DCDF24D87F19D0129345107@sohu-inc.com>
Content-disposition: attachment;
	filename="playerB.js"
Content-transfer-encoding: base64

Ly8gUGxheWVyQS9QbGF5ZXJCDQp3aW5kb3cucGxheWVyQiA9IG5ldyAoY2xhc3MgUGxheWVy
Q29udHJvbCB7DQogIC8vIEEg6YCJ5omLICAgQiDpgInmiYsNCiAgY29uc3RydWN0b3IodHlw
ZSkgew0KICAgICAgdGhpcy50eXBlID0gdHlwZTsNCiAgICAgIHRoaXMuc3ZNb3ZlRXYgPSBu
ZXcgQ3VzdG9tRXZlbnQoImtleWRvd24iKTsNCiAgICAgIHRoaXMuc3ZGaXJlRXYgPSBuZXcg
Q3VzdG9tRXZlbnQoImtleWRvd24iKTsNCiAgICAgIHRoaXMuZmlyZXRpbWVzdGFtcCA9IChu
ZXcgRGF0ZSgpKS52YWx1ZU9mKCk7DQogICAgICB0aGlzLnN2TXlUYW5rOy8v5oiR55qE5Z2m
5YWLOw0KICAgICAgdGhpcy5lbmVteVRhbmsgLy8g5pWM5pa55Z2m5YWLOw0KICAgICAgdGhp
cy5teUJ1bGxldHMgPSBbXTsNCiAgICAgIHRoaXMuZW5lbXlCdWxsZXRzID0gW107DQogICAg
ICB0aGlzLnN2VHlwZSA9IHR5cGU7DQogICAgICB0aGlzLlRBTktfU1BFRUQgPSA3Ow0KICAg
ICAgdGhpcy5UQU5LX1dJRFRIID0gNTA7DQogICAgICB0aGlzLkJVTExFVF9XSURUSCA9IDEw
Ow0KICAgICAgdGhpcy5kYW5nZXJCdWxsZXRzID0gW107DQogICAgICB0aGlzLkNIRUNLX1NU
RVAgPSAyNTsNCiAgICAgIHRoaXMuREFOR0VSX1NURVAgPSAxODsNCiAgICAgIHRoaXMuTk9f
Q09MTElERSA9IC0xOw0KICAgICAgdGhpcy5CRVNUX1NDT1JFID0gMTAwMDsNCiAgICAgIHRo
aXMuV09SU1RfU0NPUkUgPSAtMTAwMDsNCiAgICAgIHRoaXMuc3ZBbGxEaXJlY3Rpb25zID0g
W3RoaXMuRElSRUNUSU9OLlVQLCB0aGlzLkRJUkVDVElPTi5ET1dOLCB0aGlzLkRJUkVDVElP
Ti5MRUZULCB0aGlzLkRJUkVDVElPTi5SSUdIVCwgdGhpcy5ESVJFQ1RJT04uU1RPUF07DQog
ICAgICB0aGlzLnN2Tm9TdG9wRGlyZWN0aW9ucyA9IFt0aGlzLkRJUkVDVElPTi5ET1dOLCB0
aGlzLkRJUkVDVElPTi5VUCwgIHRoaXMuRElSRUNUSU9OLkxFRlQsIHRoaXMuRElSRUNUSU9O
LlJJR0hUXTsNCiAgICAgIHRoaXMubG9vcENvdW50ID0gMDsNCiAgICAgIC8vIOWNsemZqei3
neemuw0KICAgICAgdGhpcy5EQU5HRVJfRElTVEFOQ0UgPSAzICogdGhpcy5UQU5LX1dJRFRI
Ow0KICAgICAgdGhpcy5CRVNUX0ZJUkVfRElTVEFOQ0UgPSA0ICogdGhpcy5UQU5LX1dJRFRI
Ow0KICAgICAgLy8g5pS75Ye76Led56a7KOe8k+WGsui3neemuzLlgI3lnablhYvlrr3luqYp
DQogICAgICB0aGlzLkZJUkVfTUFYX0RJU1RBTkNFID0gdGhpcy5EQU5HRVJfRElTVEFOQ0Ug
KyAyICogdGhpcy5UQU5LX1dJRFRIOw0KICAgICAgLy8g6Z2e5a6J5YWo5o6l6L+R6Led56a7
DQogICAgICB0aGlzLlVOU0FGRV9BUFBST0FDSF9ESVNUQU5DRSA9IHRoaXMuREFOR0VSX0RJ
U1RBTkNFICsgdGhpcy5UQU5LX1dJRFRILzI7DQoNCiAgICAgIHRoaXMuTUFYX0RFRFVDRV9D
T1VOVCA9IDI7DQogICAgICB0aGlzLk1BWF9ERURVQ0VfQ09VTlRfRk9SX09ORV9ESVIgPSAx
NTsNCg0KICAgICAgdGhpcy5UQU5LX01PVkVfREFOR0VSX1NURVAgPSB0aGlzLk1BWF9ERURV
Q0VfQ09VTlQgKyAxOw0KDQogICAgICB0aGlzLnRhcmdldFRhbmtJbmZvID0gW107DQogICAg
ICB0aGlzLkRFQlVHID0gZmFsc2U7DQoNCiAgICAgIHRoaXMuc2hvdWxkRmlyZUxvb3BUaW1l
cyA9IFtdOw0KICAgICAgdGhpcy5pbWFnaW5hcnlNZXRhbEJ1bGxldHMgPSBbXTsNCiAgICAg
IHRoaXMuSU1HSU5BUllfQlVMTEVUX1dJRFRIID0gMTAwOw0KDQogICAgICB0aGlzLmFsbEVu
ZW15VGFuayA9IFtdOw0KICAgICAgdGhpcy5CRVNUX0RJU1RBTkNFX09GX0NFTlRFUiA9IDU1
Ow0KICAgICAgLy8g5pyA5bCP5byA54Gr5pe26Ze06Ze06ZqUDQogICAgICB0aGlzLk1JTl9G
SVJFX0lOVEVSVkFMID0gMDsNCiAgICAgIC8vIOS4iuS4gOasoeWvueaJi+aWueaWueWQkeS4
iueahOW8gOeBqw0KICAgICAgdGhpcy5sYXN0RW5lbXlEaXJlY3Rpb25GaXJlID0gMDsNCiAg
ICAgIHRoaXMuTUVUQUxfV0lEVEggPSAxMDA7DQogICAgICB0aGlzLk1BWF9ESVNUQU5DRSA9
IDA7DQogICAgICB0aGlzLk1JTl9GSVJFX09GRlNFVCA9ICh0aGlzLlRBTktfV0lEVEggKyB0
aGlzLkJVTExFVF9XSURUSCkvMjsNCiAgICAgIHRoaXMuU1VQRVJfTUlOX0ZJUkVfT0ZGU0VU
ID0gdGhpcy5NSU5fRklSRV9PRkZTRVQ7DQoNCiAgICAgIHRoaXMubXlDb2xsaWRlTnVtID0g
MDsNCiAgICAgIHRoaXMuZW5lbXlDb2xsaWRlTnVtID0gMDsNCg0KICAgICAgdGhpcy5hbGxF
bmVteUJ1bGxldHMgPSBbXTsNCiAgICAgIHRoaXMuYWxsQUlUYW5rQ291bnQgPSAwOw0KICAg
ICAgdGhpcy5zdXBlckF0dGFja0RpcmVjdGlvbnMgPSBbXTsNCiAgICAgIHRoaXMuZmlyc3RB
dHRhY2tMb29wQ291bnQgPSAwOw0KICAgICAgdGhpcy5TVVBFUl9BVFRBQ0tfRElTVEFOQ0Ug
PSAyLjUgKiB0aGlzLlRBTktfV0lEVEg7DQogICAgICB0aGlzLlNVUEVSX0FUVEFDSF9NQVhf
RElTVEFOQ0UgPSA4ICogdGhpcy5UQU5LX1dJRFRIOw0KICAgICAgdGhpcy5BVFRBQ0tfRElT
VEFOQ0UgPSA2ICogdGhpcy5UQU5LX1dJRFRIOw0KICAgICAgdGhpcy5pblN1cGVyQXR0YWNr
TW9kZSA9IGZhbHNlOw0KICAgICAgdGhpcy5taW5BdHRhY2tEaXN0YW5jZSA9IDEwOw0KICAg
ICAgdGhpcy5BVFRBQ0tfTUlOX0RJU1RBTkNFX0NPTlNUID0gMTk4Ow0KICAgICAgdGhpcy5B
VFRBQ0tfTUlOX0RJU1RBTkNFID0gdGhpcy5BVFRBQ0tfTUlOX0RJU1RBTkNFX0NPTlNUOw0K
ICAgICAgdGhpcy5sYXN0RW5lbXlEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5TVE9QOw0K
ICAgICAgdGhpcy5maXJlSWdub3JlRGlyZWN0aW9uID0gZmFsc2U7DQogIH0NCg0KICBsYW5k
KCkgew0KICAgICAgLy8g5b2T5YmN55qE5Z2m5YWL5a6e5L6LDQogICAgICB0aGlzLnN2TXlU
YW5rID0gdW5kZWZpbmVkOw0KICAgICAgdGhpcy5lbmVteVRhbmsgPSB1bmRlZmluZWQ7DQog
ICAgICAvLyBQbGF5ZXJBL1BsYXllckINCiAgICAgIGFNeVRhbmtDb3VudC5mb3JFYWNoKGVs
ZW1lbnQgPT4gew0KICAgICAgICAgIHZhciBjID0gZWxlbWVudDsNCiAgICAgICAgICBpZiAo
Y1snaWQnXSA9PSAyMDApIHsNCiAgICAgICAgICAgICAgdGhpcy5zdk15VGFuayA9IGM7DQog
ICAgICAgICAgfQ0KICAgICAgICAgIGlmIChjWydpZCddID09IDEwMCkgew0KICAgICAgICAg
ICAgICB0aGlzLmVuZW15VGFuayA9IGM7DQogICAgICAgICAgfQ0KICAgICAgfSk7DQoNCiAg
ICAgIC8vIFBsYXllckEvUGxheWVyQg0KICAgICAgdGhpcy5teUJ1bGxldHMgPSBhTXlCdWxs
ZXRDb3VudDI7DQogICAgICB0aGlzLmVuZW15QnVsbGV0cyA9IGFNeUJ1bGxldENvdW50MTsN
CiAgICAgIHRoaXMubXlDb2xsaWRlTnVtID0gcGxheWVyMkNvbGxpZGVOdW07DQogICAgICB0
aGlzLmVuZW15Q29sbGlkZU51bSA9IHBsYXllcjFDb2xsaWRlTnVtOw0KDQoNCiAgICAgIGlm
ICghdGhpcy5zdk15VGFuaykgcmV0dXJuIG5hbWU7DQoNCiAgICAgIHRoaXMuTUFYX0RJU1RB
TkNFID0gKGNhbnZhcy53aWR0aCArIGNhbnZhcy5oZWlnaHQpKjI7DQoNCiAgICAgIGlmICh0
aGlzLmxvb3BDb3VudCA9PT0gMCkgew0KICAgICAgICAgIC8vIOiusOW9lUFJ5Z2m5YWL55qE
5Yid5aeL5pWw6YePDQogICAgICAgICAgdGhpcy5hbGxBSVRhbmtDb3VudCA9IGFUYW5rQ291
bnQubGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyDmnoTlu7rmiYDmnInmlYzmlrnlnabl
hYsNCiAgICAgIHRoaXMuYWxsRW5lbXlUYW5rLnB1c2guYXBwbHkodGhpcy5hbGxFbmVteVRh
bmssIGFUYW5rQ291bnQpOw0KICAgICAgaWYgKHRoaXMuZW5lbXlUYW5rICYmIHRoaXMuaXND
b3VudGVyU3RyaWtlKCkpIHsNCiAgICAgICAgICB0aGlzLmFsbEVuZW15VGFuay5wdXNoKHRo
aXMuZW5lbXlUYW5rKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKHRoaXMuYWxsRW5lbXlUYW5r
Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgIHJldHVybiBuYW1lOw0KICAgICAgfQ0KDQog
ICAgICBpZiAodGhpcy5sb29wQ291bnQgPT09IDAgJiYgdGhpcy5pc0NvdW50ZXJTdHJpa2Uo
KSkgew0KICAgICAgICAgIHRoaXMuY3JlYXRlSW1hZ2luYXJ5QnVsbGV0cygpOw0KICAgICAg
fQ0KDQogICAgICB0aGlzLmxvb3BDb3VudCsrOw0KDQogICAgICB0aGlzLmxvZygic3RhcnQ9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0+Iik7DQoNCiAgICAgIHRoaXMuZXJyb3Io
Iui/m+ihjOesrCIgKyB0aGlzLmxvb3BDb3VudCArICLmrKHlvqrnjq8iKTsNCg0KICAgICAg
bGV0IGFycmF5ID0gdGhpcy50cmFjZUFuZEZpcmVWMigpOw0KICAgICAgbGV0IGRpcmVjdGlv
biA9IGFycmF5WzBdOw0KICAgICAgbGV0IHRhcmdldFRhbmsgPSBhcnJheVsxXTsNCiAgICAg
IGxldCBzaG91bGRGaXJlID0gYXJyYXlbMl07DQoNCiAgICAgIGxldCBmaW5hbERpcmVjdGlv
biA9IGRpcmVjdGlvbjsNCiAgICAgIGlmICh0YXJnZXRUYW5rID09PSB0aGlzLmVuZW15VGFu
aykgew0KICAgICAgICAgIGxldCBkeCA9IHRoaXMuc3ZNeVRhbmsuWCAtIHRhcmdldFRhbmsu
WDsNCiAgICAgICAgICBsZXQgZHkgPSB0aGlzLnN2TXlUYW5rLlkgLSB0YXJnZXRUYW5rLlk7
DQogICAgICAgICAgaWYgKCF0aGlzLmluTXVzdERpZUFyZWEyKGR4LCBkeSkpIHsNCiAgICAg
ICAgICAgICAgLy8g5b+F5q275bGA6Z2i5LiL5LiN6Lqy6YG/DQogICAgICAgICAgICAgIGZp
bmFsRGlyZWN0aW9uID0gdGhpcy5DaGVja0lmSW5kYW5nZXJBbmRBdm9pZChkaXJlY3Rpb24p
Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuZmlyZUlnbm9yZURp
cmVjdGlvbiA9IHRydWU7DQogICAgICAgICAgICAgIHRoaXMubG9nKCLlj6rnrqHmiZMiKTsN
CiAgICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZpbmFsRGlyZWN0aW9u
ID0gdGhpcy5DaGVja0lmSW5kYW5nZXJBbmRBdm9pZChkaXJlY3Rpb24pOw0KICAgICAgfQ0K
ICAgICAgDQogICAgICANCiAgICAgIGlmIChmaW5hbERpcmVjdGlvbiAhPT0gZGlyZWN0aW9u
KSB7DQogICAgICAgICAgLy8g5pyA57uI5pa55ZCR5LiO6K6+5a6a5pa55ZCR5LiN5LiA6Ie0
77yM6YCA5Ye66LaF57qn5pS75Ye75qih5byPDQogICAgICAgICAgdGhpcy5pblN1cGVyQXR0
YWNrTW9kZSA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuc3VwZXJBdHRhY2tEaXJlY3Rpb25z
ID0gW107DQogICAgICAgICAgdGhpcy5maXJzdEF0dGFja0xvb3BDb3VudCA9IDA7DQogICAg
ICAgICAgLy8g6IiN5byDdHJhY2VBbmRGaXJl6Zi25q615Lqn55Sf55qE5piv5ZCm5byA54Gr
DQogICAgICAgICAgc2hvdWxkRmlyZSA9IGZhbHNlOw0KICAgICAgfQ0KDQogICAgICBpZiAo
dGhpcy5pc0NvdW50ZXJTdHJpa2UoKSAmJiB0aGlzLnRhcmdldFRhbmtJbmZvWzJdID09PSB0
aGlzLmVuZW15VGFuayAmJiB0aGlzLmFsbEVuZW15VGFuay5sZW5ndGggPD0gMTApIHsNCiAg
ICAgICAgICBpZiAodGhpcy5hbGxFbmVteVRhbmsubGVuZ3RoID09PSAxICYmIHRoaXMuaXNC
bG9ja0J5TWV0YWwodGhpcy5zdk15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAg
ICAgLy8g5Y+q5pyJ5a+55omL5pa55Z2m5YWL5LiU5pyJ6Zqc56KN54mp6Zi75oyh5pe26K6+
572u5Li6OA0KICAgICAgICAgICAgICB0aGlzLkRBTkdFUl9TVEVQID0gODsNCiAgICAgICAg
ICB9IGVsc2UgaWYgKHRoaXMuaW5TdXBlckF0dGFja01vZGUpIHsNCiAgICAgICAgICAgICAg
dGhpcy5EQU5HRVJfU1RFUCA9IDE1Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAg
ICAgIHRoaXMuREFOR0VSX1NURVAgPSAxODsNCiAgICAgICAgICB9DQogICAgICB9IGVsc2Ug
ew0KICAgICAgICAgIHRoaXMuREFOR0VSX1NURVAgPSAxODsNCiAgICAgIH0NCg0KICAgICAg
dGhpcy5sb2coIkRBTkdFUl9TVEVQIiwgdGhpcy5EQU5HRVJfU1RFUCk7DQogICAgICANCiAg
ICAgIHRoaXMubG9nKCJwb3NpdGlvbnM6ICIsIHRoaXMuc3ZNeVRhbmsuWCwgdGhpcy5zdk15
VGFuay5ZLCB0YXJnZXRUYW5rLlgsIHRhcmdldFRhbmsuWSk7DQoNCiAgICAgIC8vIFBsYXll
ckEvUGxheWVyQg0KICAgICAgaWYgKGZpbmFsRGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElP
Ti5MRUZUICYmIHRoaXMubG9vcENvdW50IC0gdGhpcy5sYXN0RW5lbXlEaXJlY3Rpb25GaXJl
ID49IDgwICYmIHRoaXMuYWxsRW5lbXlUYW5rLmxlbmd0aCA+PSAxICYmIHRhcmdldFRhbmsg
IT09IHRoaXMuZW5lbXlUYW5rKSB7DQogICAgICAgICAgc2hvdWxkRmlyZSA9IHRydWU7DQog
ICAgICAgICAgdGhpcy5sYXN0RW5lbXlEaXJlY3Rpb25GaXJlID0gdGhpcy5sb29wQ291bnQ7
DQogICAgICB9DQoNCiAgICAgIC8vIOajgOa1i+atpOaWueWQkeS4iuaYr+WQpuacieaVjOS6
uu+8jOWmguaenOacie+8jOWImeW8gOeBqw0KICAgICAgc2hvdWxkRmlyZSB8fD0gdGhpcy5z
aG91bGRGaXJlT25EaXJlY3Rpb24oZmluYWxEaXJlY3Rpb24pOw0KDQogICAgICAvLyDkvb/n
lKjmlbDnu4TorrDlvZVzaG91bGRGaXJlTG9vcFRpbWUNCiAgICAgIGlmIChzaG91bGRGaXJl
ICYmIHRoaXMuc2hvdWxkRmlyZUxvb3BUaW1lcy5sZW5ndGggPCA1KSB7DQogICAgICAgICAg
dGhpcy5sb2coInNob3VsZEZpcmUiLCB0aGlzLmxvb3BDb3VudCk7DQogICAgICAgICAgbGV0
IHNob3VsZEZpcmVMb29wVGltZSA9IDA7DQogICAgICAgICAgaWYgKHRoaXMuZmlyZUlnbm9y
ZURpcmVjdGlvbikgew0KICAgICAgICAgICAgICBzaG91bGRGaXJlTG9vcFRpbWUgPSB0aGlz
Lmxvb3BDb3VudDsNCiAgICAgICAgICAgICAgdGhpcy5maXJlSWdub3JlRGlyZWN0aW9uID0g
ZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgc2hvdWxkRmlyZUxv
b3BUaW1lID0gZmluYWxEaXJlY3Rpb24gPT09IHRoaXMuc3ZNeVRhbmsuZGlyZWN0aW9uID8g
dGhpcy5sb29wQ291bnQgOiB0aGlzLmxvb3BDb3VudCArIDE7DQogICAgICAgICAgfQ0KICAg
ICAgICAgIGlmICh0aGlzLnNob3VsZEZpcmVMb29wVGltZXMubGVuZ3RoID4gMCkgew0KICAg
ICAgICAgICAgICAvLyDpmLLmraLov57nu63kuKTkuKrlrZDlvLnlj5Hlh7rnmoTmg4XlhrUN
CiAgICAgICAgICAgICAgLy8gVE9ETyBTQ0oNCiAgICAgICAgICAgICAgLy8gaWYgKHRoaXMu
c2hvdWxkRmlyZUxvb3BUaW1lc1t0aGlzLnNob3VsZEZpcmVMb29wVGltZXMubGVuZ3RoLTFd
ICE9PSB0aGlzLmxvb3BDb3VudCkgew0KICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zaG91
bGRGaXJlTG9vcFRpbWVzLnB1c2goc2hvdWxkRmlyZUxvb3BUaW1lKTsNCiAgICAgICAgICAg
ICAgLy8gfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuc2hvdWxk
RmlyZUxvb3BUaW1lcy5wdXNoKHNob3VsZEZpcmVMb29wVGltZSk7DQogICAgICAgICAgfQ0K
ICAgICAgfQ0KDQogICAgICB0aGlzLmxvZygiZmluYWxEaXJlY3Rpb24iLCBmaW5hbERpcmVj
dGlvbik7DQoNCiAgICAgIHRoaXMuU1ZNb3ZlKGZpbmFsRGlyZWN0aW9uKTsNCg0KICAgICAg
dGhpcy5sb2coInNob3VsZEZpcmVMb29wVGltZXM6ICIsIHRoaXMuc2hvdWxkRmlyZUxvb3BU
aW1lcyk7DQoNCiAgICAgIC8vIOmBjeWOhnNob3VsZEZpcmVMb29wVGltZXPvvIwgcmVtb3Zl
5o6J5bCP5LqO5b2T5YmNbG9vcHRpbWXnmoTmnaHnm64NCiAgICAgIGZvcihsZXQgaT0wOyBp
PHRoaXMuc2hvdWxkRmlyZUxvb3BUaW1lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxl
dCBmaXJlTG9vcFRpbWUgPSB0aGlzLnNob3VsZEZpcmVMb29wVGltZXNbaV07DQogICAgICAg
ICAgaWYgKGZpcmVMb29wVGltZSA9PT0gdGhpcy5sb29wQ291bnQgJiYgZmluYWxEaXJlY3Rp
b24gPT09IGRpcmVjdGlvbikgew0KICAgICAgICAgICAgICB0aGlzLmxvZygicmVhbCBzaG91
bGRGaXJlIik7DQogICAgICAgICAgICAgIHRoaXMuU1ZGaXJlKCk7DQogICAgICAgICAgfQ0K
ICAgICAgICAgIGlmIChmaXJlTG9vcFRpbWUgPD0gdGhpcy5sb29wQ291bnQpIHsNCiAgICAg
ICAgICAgICAgdGhpcy5zaG91bGRGaXJlTG9vcFRpbWVzLnNwbGljZShpLCAxKTsNCiAgICAg
ICAgICAgICAgaS0tOw0KICAgICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5sb2co
InRhcmdldFRhbmsuZGlyZWN0aW9uIiwgdGhpcy5TVkdldERpcmVjdGlvblN0cih0YXJnZXRU
YW5rLmRpcmVjdGlvbikpOw0KDQogICAgICBpZiAodGFyZ2V0VGFuayA9PT0gdGhpcy5lbmVt
eVRhbmspIHsNCiAgICAgICAgICB0aGlzLmxhc3RFbmVteURpcmVjdGlvbiA9IHRhcmdldFRh
bmsuZGlyZWN0aW9uOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmxvZygiZW5kPD09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0iKTsNCg0KICAgICAgdGhpcy5zZXROYW1lKCk7DQoN
CiAgfQ0KDQogIGxlYXZlKCkgew0KICAgICAgdGhpcy5zZXROYW1lKCk7DQogICAgICBkb2N1
bWVudC5vbmtleXVwKHRoaXMuc3ZNb3ZlRXYpOw0KICAgICAgZG9jdW1lbnQub25rZXl1cCh0
aGlzLnN2RmlyZUV2KTsNCiAgICAgIGlmICh0aGlzLkRFQlVHKSB7DQogICAgICAgICAgZm9y
KGxldCBpPTA7IGk8dGhpcy5kYW5nZXJCdWxsZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAg
ICAgICAgIHRoaXMuZGFuZ2VyQnVsbGV0c1tpXS5jb2xvciA9ICd5ZWxsb3cnOw0KICAgICAg
ICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5kYW5nZXJCdWxsZXRzID0gW107DQogICAg
ICB0aGlzLmFsbEVuZW15VGFuayA9IFtdOw0KICAgICAgdGhpcy5hbGxFbmVteUJ1bGxldHMg
PSBbXTsNCiAgICAgIGlmICh0aGlzLkRFQlVHKSB7DQogICAgICAgICAgLy8gdGhpcy50YXJn
ZXRUYW5rSW5mb1syXS5pbWcgPSBpbWcwDQogICAgICB9DQogIH0NCg0KICB0eXBlOw0KICAv
LyDmlrnlkJHnmoTliKvlkI0NCiAgRElSRUNUSU9OID0gew0KICAgICAgVVA6IDAsDQogICAg
ICBSSUdIVDogMSwNCiAgICAgIERPV046IDIsDQogICAgICBMRUZUOiAzLA0KICAgICAgU1RP
UDogNCwNCiAgfTsNCg0KICBnZXROYW1lKCkgew0KICAgICAgcmV0dXJuICLpl6rnlLUiOw0K
ICB9DQoNCiAgaXNCdWxsZXRJbkRpcmVjdGlvbihteUJ1bGxldCwgZmluYWxEaXJlY3Rpb24s
IHRhcmdldFRhbmspIHsNCiAgICAgIGxldCBkaXJlY3Rpb24gPSBmaW5hbERpcmVjdGlvbjsN
CiAgICAgIGlmIChkaXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLlNUT1ApIHsNCiAgICAg
ICAgICBkaXJlY3Rpb24gPSB0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbjsNCiAgICAgIH0NCiAg
ICAgIGlmIChteUJ1bGxldC5YIC0gdGhpcy5zdk15VGFuay5YID09PSB0aGlzLlRBTktfV0lE
VEgvMikgew0KICAgICAgICAgIGlmICgoZGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5V
UCAmJiBteUJ1bGxldC5ZIDwgdGhpcy5zdk15VGFuay5ZICYmIG15QnVsbGV0LlkgPiB0YXJn
ZXRUYW5rLlkpIHx8IChkaXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLkRPV04gJiYgbXlC
dWxsZXQuWSA+IHRoaXMuc3ZNeVRhbmsuWSAmJiBteUJ1bGxldC5ZIDwgdGFyZ2V0VGFuay5Z
KSkgew0KICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICB9
IGVsc2UgaWYgKG15QnVsbGV0LlkgLSB0aGlzLnN2TXlUYW5rLlkgPT09IHRoaXMuVEFOS19X
SURUSC8yKSB7DQogICAgICAgICAgaWYgKChkaXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9O
LkxFRlQgJiYgbXlCdWxsZXQuWCA8IHRoaXMuc3ZNeVRhbmsuWCAmJiBteUJ1bGxldC5YID4g
dGFyZ2V0VGFuay5YKSB8fCAoZGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5SSUdIVCAm
JiBteUJ1bGxldC5YID4gdGhpcy5zdk15VGFuay5YICYmIG15QnVsbGV0LlggPCB0YXJnZXRU
YW5rLlgpKSB7DQogICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAg
ICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgfQ0KDQogIGhhc015QnVsbGV0SW5EaXJl
Y3Rpb24oZGlyZWN0aW9uLCB0YXJnZXRUYW5rKSB7DQogICAgICBmb3IobGV0IGk9MDtpPHRo
aXMubXlCdWxsZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IG15QnVsbGV0ID0g
dGhpcy5teUJ1bGxldHNbaV07DQogICAgICAgICAgaWYgKHRoaXMuaXNCdWxsZXRJbkRpcmVj
dGlvbihteUJ1bGxldCwgZGlyZWN0aW9uLCB0YXJnZXRUYW5rKSkgew0KICAgICAgICAgICAg
ICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gZmFs
c2U7DQogIH0NCg0KICAvLyDlnKjmraTmlrnlkJHkuIrmmK/lkKblupTor6XlvIDngasNCiAg
c2hvdWxkRmlyZU9uRGlyZWN0aW9uKGRpcmVjdGlvbikgew0KICAgICAgaWYgKGRpcmVjdGlv
biA9PT0gdGhpcy5ESVJFQ1RJT04uU1RPUCkgew0KICAgICAgICAgIGRpcmVjdGlvbiA9IHRo
aXMuc3ZNeVRhbmsuZGlyZWN0aW9uOw0KICAgICAgfQ0KDQogICAgICBsZXQgdGFyZ2V0VGFu
ayA9IHRoaXMudGFyZ2V0VGFua0luZm9bMl07DQogICAgICBpZiAodGFyZ2V0VGFuayA9PT0g
dGhpcy5lbmVteVRhbmspIHsNCiAgICAgICAgICAvLyDpkojlr7nlr7nmiYvmlrnlnablhYvo
v5vooYzlpITnkIYNCiAgICAgICAgICBsZXQgZHggPSB0aGlzLnN2TXlUYW5rLlggLSB0YXJn
ZXRUYW5rLlg7DQogICAgICAgICAgbGV0IGR5ID0gdGhpcy5zdk15VGFuay5ZIC0gdGFyZ2V0
VGFuay5ZOw0KICAgICAgICAgIGlmICh0aGlzLm15QnVsbGV0cy5sZW5ndGggPj0gMykgew0K
ICAgICAgICAgICAgICBpZiAodGhpcy5pbk11c3REaWVBcmVhMihkeCwgZHkpKSB7DQogICAg
ICAgICAgICAgICAgICB0aGlzLmxvZygiaW4gTXVzdERpZUFyZWEiKTsNCiAgICAgICAgICAg
ICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
ICAgICAgICAgdGhpcy5sb2coIk5PVCBpbiBNdXN0RGllQXJlYSIpOw0KICAgICAgICAgICAg
ICAgICAgLy8g6Z2e5b+F5p2A5qih5byP5Lmf5LiN5piv6LaF57qn5pS75Ye75qih5byP77yM
5YiZ5LiN6IO95aSa546pM+S4quWtkOW8ue+8iOeVmeS4pOS4quWtkOW8ueWcqOW/headgOaX
tuS9v+eUqO+8iQ0KICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluU3VwZXJBdHRhY2tN
b2RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAg
ICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5bmg4Xl
hrXotbDkuIvpnaINCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy8gMS4g5aaC5p6c5pa55ZCR6YCa6YGT5YaF
5Z2m5YWL5pWw6YeP5aSa5LqO5pyJ5pWI5a2Q5by55pWw6YeP77yM5YiZ5byA54GrDQogICAg
ICAvLyAyLiDnibnmrormg4XlhrXvvIzlpoLmnpzpgJrpgZPlhoXmnIDov5HlnablhYvot53n
prvlpKfkuo7ljYrkuKrlsY/luZXvvIzliJnlj6rlj5HkuIDkuKrlrZDlvLkNCiAgICAgIGxl
dCBpbmZvID0gdGhpcy5nZXRUYW5rQW5kQnVsbGV0c0luZm9PbkRpcmVjdGlvbnMoZGlyZWN0
aW9uKTsNCiAgICAgIGxldCB0YW5rQ291bnQgPSBpbmZvWzBdOw0KICAgICAgbGV0IG15QnVs
bGV0Q291bnQgPSBpbmZvWzFdOw0KICAgICAgbGV0IG5lYXJlc3REaXN0YW5jZSA9IGluZm9b
Ml07DQogICAgICBpZiAodGFua0NvdW50IDw9IDApIHsNCiAgICAgICAgICByZXR1cm4gZmFs
c2U7DQogICAgICB9DQogICAgICB0aGlzLmVycm9yKCJuZWFyZXN0RGlzdGFuY2UiLCBuZWFy
ZXN0RGlzdGFuY2UpOw0KICAgICAgaWYgKG5lYXJlc3REaXN0YW5jZSA8PSBjYW52YXMud2lk
dGgqMy80KSB7DQogICAgICAgICAgbGV0IHNwYXJlTnVtID0gMTsNCiAgICAgICAgICBpZiAo
dGFyZ2V0VGFuayA9PT0gdGhpcy5lbmVteVRhbmspIHsNCiAgICAgICAgICAgICAgbGV0IGR4
ID0gdGhpcy5zdk15VGFuay5YIC0gdGFyZ2V0VGFuay5YOw0KICAgICAgICAgICAgICBsZXQg
ZHkgPSB0aGlzLnN2TXlUYW5rLlkgLSB0YXJnZXRUYW5rLlk7DQogICAgICAgICAgICAgIGlm
ICh0aGlzLmluTXVzdERpZUFyZWEyKGR4LCBkeSkpIHsNCiAgICAgICAgICAgICAgICAgIC8v
IOS4jeiDveWQneaDnOWtkOW8uQ0KICAgICAgICAgICAgICAgICAgc3BhcmVOdW0gPSAxOw0K
ICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgc3BhcmVOdW0gPSAw
Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChteUJ1bGxl
dENvdW50IDwgdGFua0NvdW50K3NwYXJlTnVtKSB7DQogICAgICAgICAgICAgIHJldHVybiB0
cnVlOw0KICAgICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGV0IG1heEJ1
bGxldHNDb3VudCA9IDI7DQogICAgICAgICAgaWYgKHRhcmdldFRhbmsgPT09IHRoaXMuZW5l
bXlUYW5rKSB7DQogICAgICAgICAgICAgIGxldCBkeCA9IHRoaXMuc3ZNeVRhbmsuWCAtIHRh
cmdldFRhbmsuWDsNCiAgICAgICAgICAgICAgbGV0IGR5ID0gdGhpcy5zdk15VGFuay5ZIC0g
dGFyZ2V0VGFuay5ZOw0KICAgICAgICAgICAgICBpZiAodGhpcy5pbk11c3REaWVBcmVhMihk
eCwgZHkpKSB7DQogICAgICAgICAgICAgICAgICAvLyDkuI3og73lkJ3mg5zlrZDlvLkNCiAg
ICAgICAgICAgICAgICAgIG1heEJ1bGxldHNDb3VudCA9IDI7DQogICAgICAgICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICAgICAgICBtYXhCdWxsZXRzQ291bnQgPSAxOw0KICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICAgIA0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAo
bXlCdWxsZXRDb3VudCA8IG1heEJ1bGxldHNDb3VudCkgew0KICAgICAgICAgICAgICByZXR1
cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2U7DQog
IH0NCg0KICBnZXRUYW5rQW5kQnVsbGV0c0luZm9PbkRpcmVjdGlvbnMoZGlyZWN0aW9uKSB7
DQogICAgICBsZXQgdGFua0NvdW50ID0gMDsNCiAgICAgIGxldCBteUJ1bGxldENvdW50ID0g
MDsNCiAgICAgIGxldCBtaW5ZT25VcCA9IGNhbnZhcy5oZWlnaHQ7DQogICAgICBsZXQgbWF4
WU9uVXAgPSAtMTsNCg0KICAgICAgbGV0IG1pbllPbkRvd24gPSBjYW52YXMuaGVpZ2h0Ow0K
ICAgICAgbGV0IG1heFlPbkRvd24gPSAtMTsNCg0KICAgICAgbGV0IG1pblhPbkxlZnQgPSBj
YW52YXMud2lkdGg7DQogICAgICBsZXQgbWF4WE9uTGVmdCA9IC0xOw0KDQogICAgICBsZXQg
bWluWE9uUmlnaHQgPSBjYW52YXMud2lkdGg7DQogICAgICBsZXQgbWF4WE9uUmlnaHQgPSAt
MTsNCg0KICAgICAgbGV0IG5lYXJlc3REaXN0YW5jZSA9IDA7DQogICAgICBmb3IobGV0IGk9
MDtpPHRoaXMuYWxsRW5lbXlUYW5rLmxlbmd0aDtpKyspIHsNCiAgICAgICAgICBsZXQgZW5l
bXkgPSB0aGlzLmFsbEVuZW15VGFua1tpXTsNCiAgICAgICAgICBpZiAodGhpcy5pc0Jsb2Nr
QnlNZXRhbCh0aGlzLnN2TXlUYW5rLCBlbmVteSkpIHsNCiAgICAgICAgICAgICAgY29udGlu
dWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7DQogICAg
ICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uVVA6DQogICAgICAgICAgICAgICAgICBp
ZiAoTWF0aC5hYnModGhpcy5zdk15VGFuay5YIC0gZW5lbXkuWCkgPCB0aGlzLk1JTl9GSVJF
X09GRlNFVCAmJiBlbmVteS5ZIDwgdGhpcy5zdk15VGFuay5ZKSB7DQogICAgICAgICAgICAg
ICAgICAgICAgdGFua0NvdW50ICsrOw0KICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmVt
eS5ZIDwgbWluWU9uVXApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWU9uVXAg
PSBlbmVteS5ZOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAg
ICAgICBpZiAoZW5lbXkuWSA+IG1heFlPblVwKSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICAgIG1heFlPblVwID0gZW5lbXkuWTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmVh
cmVzdERpc3RhbmNlID0gdGhpcy5zdk15VGFuay5ZIC0gbWF4WU9uVXA7DQogICAgICAgICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAg
YnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uUklHSFQ6DQogICAg
ICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5zdk15VGFuay5ZIC0gZW5lbXkuWSkg
PCB0aGlzLk1JTl9GSVJFX09GRlNFVCAmJiBlbmVteS5YID4gdGhpcy5zdk15VGFuay5YKSB7
DQogICAgICAgICAgICAgICAgICAgICAgdGFua0NvdW50ICsrOw0KICAgICAgICAgICAgICAg
ICAgICAgIGlmIChlbmVteS5YID4gbWF4WE9uUmlnaHQpIHsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgbWF4WE9uUmlnaHQgPSBlbmVteS5YOw0KICAgICAgICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5lbXkuWCA8IG1pblhPblJpZ2h0KSB7
DQogICAgICAgICAgICAgICAgICAgICAgICAgIG1pblhPblJpZ2h0ID0gZW5lbXkuWDsNCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgbmVhcmVzdERpc3RhbmNlID0gbWluWE9uUmlnaHQg
LSB0aGlzLnN2TXlUYW5rLlg7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNh
c2UgdGhpcy5ESVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFi
cyh0aGlzLnN2TXlUYW5rLlggLSBlbmVteS5YKSA8IHRoaXMuTUlOX0ZJUkVfT0ZGU0VUICYm
IGVuZW15LlkgPiB0aGlzLnN2TXlUYW5rLlkpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0
YW5rQ291bnQgKys7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZW15LlkgPiBtYXhZ
T25Eb3duKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIG1heFlPbkRvd24gPSBlbmVt
eS5ZOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICBp
ZiAoZW5lbXkuWSA8IG1pbllPbkRvd24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
bWluWU9uRG93biA9IGVuZW15Llk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIG5lYXJl
c3REaXN0YW5jZSA9IG1pbllPbkRvd24gLSB0aGlzLnN2TXlUYW5rLlk7DQogICAgICAgICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAg
YnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uTEVGVDoNCiAgICAg
ICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlkgLSBlbmVteS5ZKSA8
IHRoaXMuTUlOX0ZJUkVfT0ZGU0VUICYmIGVuZW15LlggPCB0aGlzLnN2TXlUYW5rLlgpIHsN
CiAgICAgICAgICAgICAgICAgICAgICB0YW5rQ291bnQgKys7DQogICAgICAgICAgICAgICAg
ICAgICAgaWYgKGVuZW15LlggPCBtaW5YT25MZWZ0KSB7DQogICAgICAgICAgICAgICAgICAg
ICAgICAgIG1pblhPbkxlZnQgPSBlbmVteS5YOw0KICAgICAgICAgICAgICAgICAgICAgIH0N
CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5lbXkuWCA+IG1heFhPbkxlZnQpIHsNCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgbWF4WE9uTGVmdCA9IGVuZW15Llg7DQogICAgICAg
ICAgICAgICAgICAgICAgICAgIG5lYXJlc3REaXN0YW5jZSA9IHRoaXMuc3ZNeVRhbmsuWCAt
IG1heFhPbkxlZnQ7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgfQ0K
DQogICAgICBmb3IobGV0IGk9MDtpPHRoaXMubXlCdWxsZXRzLmxlbmd0aDtpKyspIHsNCiAg
ICAgICAgICBsZXQgYnVsbGV0ID0gdGhpcy5teUJ1bGxldHNbaV07DQogICAgICAgICAgc3dp
dGNoIChkaXJlY3Rpb24pIHsNCiAgICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5V
UDoNCiAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlggLSBi
dWxsZXQuWCkgPCB0aGlzLlRBTktfV0lEVEggJiYgYnVsbGV0LlkgPCB0aGlzLnN2TXlUYW5r
LlkgJiYgYnVsbGV0LlkgPiBtaW5ZT25VcCkgew0KICAgICAgICAgICAgICAgICAgICAgIG15
QnVsbGV0Q291bnQgKys7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAg
ICBicmVhazsNCiAgICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5SSUdIVDoNCiAg
ICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlkgLSBidWxsZXQu
WSkgPCB0aGlzLlRBTktfV0lEVEggJiYgYnVsbGV0LlggPiB0aGlzLnN2TXlUYW5rLlggJiYg
YnVsbGV0LlggPCBtYXhYT25SaWdodCkgew0KICAgICAgICAgICAgICAgICAgICAgIG15QnVs
bGV0Q291bnQgKys7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBi
cmVhazsNCiAgICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5ET1dOOg0KICAgICAg
ICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuc3ZNeVRhbmsuWCAtIGJ1bGxldC5YKSA8
IHRoaXMuVEFOS19XSURUSCAmJiBidWxsZXQuWSA+IHRoaXMuc3ZNeVRhbmsuWSAmJiBidWxs
ZXQuWSA8IG1heFlPbkRvd24pIHsNCiAgICAgICAgICAgICAgICAgICAgICBteUJ1bGxldENv
dW50ICsrOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgYnJlYWs7
DQogICAgICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uTEVGVDoNCiAgICAgICAgICAg
ICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlkgLSBidWxsZXQuWSkgPCB0aGlz
LlRBTktfV0lEVEggJiYgYnVsbGV0LlggPCB0aGlzLnN2TXlUYW5rLlggJiYgYnVsbGV0Llgg
PiBtaW5YT25MZWZ0KSB7DQogICAgICAgICAgICAgICAgICAgICAgbXlCdWxsZXRDb3VudCAr
KzsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAg
ICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIFt0YW5rQ291bnQsIG15QnVsbGV0
Q291bnQsIG5lYXJlc3REaXN0YW5jZV07DQogICAgICANCiAgfQ0KDQogIGNyZWF0ZUltYWdp
bmFyeUJ1bGxldHMoKSB7DQogICAgICBsZXQgdyA9IGNhbnZhcy53aWR0aDsNCiAgICAgIGxl
dCBoID0gY2FudmFzLmhlaWdodDsNCiAgICAgIGxldCBpbWFnaW5hcnlCdWxsZXQxID0gbmV3
IEJ1bGxldCgnbWV0YWwxJywgMCwgMSwgNCwgdy80LCBoLzQpOw0KICAgICAgbGV0IGltYWdp
bmFyeUJ1bGxldDIgPSBuZXcgQnVsbGV0KCdtZXRhbDInLCAwLCAxLCA0LCB3KjMvNCwgaC80
KTsNCiAgICAgIGxldCBpbWFnaW5hcnlCdWxsZXQzID0gbmV3IEJ1bGxldCgnbWV0YWwzJywg
MCwgMSwgNCwgdy80LCBoKjMvNCk7DQogICAgICBsZXQgaW1hZ2luYXJ5QnVsbGV0NCA9IG5l
dyBCdWxsZXQoJ21ldGFsNCcsIDAsIDEsIDQsIHcqMy80LCBoKjMvNCk7DQogICAgICBpbWFn
aW5hcnlCdWxsZXQxLndpZHRoID0gdGhpcy5JTUdJTkFSWV9CVUxMRVRfV0lEVEg7DQogICAg
ICBpbWFnaW5hcnlCdWxsZXQyLndpZHRoID0gdGhpcy5JTUdJTkFSWV9CVUxMRVRfV0lEVEg7
DQogICAgICBpbWFnaW5hcnlCdWxsZXQzLndpZHRoID0gdGhpcy5JTUdJTkFSWV9CVUxMRVRf
V0lEVEg7DQogICAgICBpbWFnaW5hcnlCdWxsZXQ0LndpZHRoID0gdGhpcy5JTUdJTkFSWV9C
VUxMRVRfV0lEVEg7DQogICAgICB0aGlzLmltYWdpbmFyeU1ldGFsQnVsbGV0cy5wdXNoKGlt
YWdpbmFyeUJ1bGxldDEpOw0KICAgICAgdGhpcy5pbWFnaW5hcnlNZXRhbEJ1bGxldHMucHVz
aChpbWFnaW5hcnlCdWxsZXQyKTsNCiAgICAgIHRoaXMuaW1hZ2luYXJ5TWV0YWxCdWxsZXRz
LnB1c2goaW1hZ2luYXJ5QnVsbGV0Myk7DQogICAgICB0aGlzLmltYWdpbmFyeU1ldGFsQnVs
bGV0cy5wdXNoKGltYWdpbmFyeUJ1bGxldDQpOw0KICB9DQoNCiAgLy8g5qOA5p+l5piv5ZCm
5aSE5LqO5Y2x6Zmp5Lit77yM5bm26L+U5Zue5Y+v6KGM55qE5pa55ZCR5pWw57uEDQogIENo
ZWNrSWZJbmRhbmdlckFuZEF2b2lkKGlucHV0RGlyZWN0aW9uKSB7DQogICAgICB0aGlzLmxv
ZygiaW5wdXQgZGlyZWN0aW9uIDogIiwgdGhpcy5TVkdldERpcmVjdGlvblN0cihpbnB1dERp
cmVjdGlvbikpOw0KICAgICAgbGV0IGZpbmFsRGlyZWN0aW9uID0gaW5wdXREaXJlY3Rpb247
DQogICAgICAvLyDlpoLmnpzmo4DmtYvlh7rljbHpmanvvIzliJnoiI3lvIPovpPlhaXmlrnl
kJHvvIzph43mlrDorqHnrpflh7rlj6/ooYzmlrnlkJHvvIzlkKbliJnkvb/nlKjovpPlhaXm
lrnlkJHov5vooYzmjqjmvJQxLTLmraXvvIzlho3pgInmi6nmlrnlkJENCiAgICAgIGxldCBj
cmFzaCA9IGZhbHNlOw0KICAgICAgLy8g5bGA6Z2i5oC75b6X5YiGDQogICAgICBsZXQgdG90
YWxTY29yZSA9IDA7DQogICAgICBsZXQgYWxsQ29sbGlkZVRpbWUgPSAiIjsNCiAgICAgIGxl
dCBhbGxTY29yZSA9ICIiOw0KICAgICAgLy8g5qOA5rWL5a2Q5by5LCDmib7lh7rljbHpmanl
rZDlvLnku6wNCiAgICAgIHRoaXMuYWxsRW5lbXlCdWxsZXRzLnB1c2guYXBwbHkodGhpcy5h
bGxFbmVteUJ1bGxldHMsIGFCdWxsZXRDb3VudCk7DQogICAgICBpZiAodGhpcy5pc0NvdW50
ZXJTdHJpa2UoKSkgew0KICAgICAgICAgIHRoaXMuYWxsRW5lbXlCdWxsZXRzLnB1c2guYXBw
bHkodGhpcy5hbGxFbmVteUJ1bGxldHMsIHRoaXMuZW5lbXlCdWxsZXRzKTsNCiAgICAgIH0N
CiAgICAgIHRoaXMuYWxsRW5lbXlCdWxsZXRzLnB1c2guYXBwbHkodGhpcy5hbGxFbmVteUJ1
bGxldHMsIHRoaXMuaW1hZ2luYXJ5TWV0YWxCdWxsZXRzKTsNCiAgICAgIGZvciAobGV0IGkg
PSAwOyBpIDwgdGhpcy5hbGxFbmVteUJ1bGxldHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAg
ICBsZXQgYnVsbGV0ID0gdGhpcy5hbGxFbmVteUJ1bGxldHNbaV07DQogICAgICAgICAgaWYg
KCFidWxsZXQuaGFzT3duUHJvcGVydHkoIndpZHRoIikpIHsNCiAgICAgICAgICAgICAgYnVs
bGV0LndpZHRoID0gYnVsbGV0V2lkdGg7DQogICAgICAgICAgfQ0KICAgICAgICAgIGxldCBk
aXNIb3IgPSB0aGlzLnN2TXlUYW5rLlggLSBidWxsZXQuWDsNCiAgICAgICAgICBsZXQgZGlz
VmVyID0gdGhpcy5zdk15VGFuay5ZIC0gYnVsbGV0Llk7DQogICAgICAgICAgbGV0IGRhbmdl
ckRpcyA9IHRhbmtXaWR0aCAqIDU7DQogICAgICAgICAgLy8g5Yid5aeL5YC8Ow0KICAgICAg
ICAgIGJ1bGxldC5jb2xsaWRlVGltZSA9IC0yOyANCiAgICAgICAgICBpZiAoTWF0aC5wb3co
ZGlzSG9yLCAyKSArIE1hdGgucG93KGRpc1ZlciwgMikgPD0gTWF0aC5wb3coZGFuZ2VyRGlz
LCAyKSkgew0KICAgICAgICAgICAgICAvLyDljbHpmanlrZDlvLkNCiAgICAgICAgICAgICAg
aWYgKHRoaXMuREVCVUcpIHsNCiAgICAgICAgICAgICAgICAgIGJ1bGxldC5jb2xvciA9ICdy
ZWQnOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIC8vIOiuoeeul+WHuuWtkOW8
ueS4juWdpuWFi+W9k+WJjeS9jee9rui3neebuOaSnueahOaXtumXtA0KICAgICAgICAgICAg
ICBsZXQgYXJyYXkgPSB0aGlzLmdldEJ1bGxldFNjb3JlSW5mbyh0aGlzLnN2TXlUYW5rLCBi
dWxsZXQsIDEpOw0KICAgICAgICAgICAgICBpZiAoYXJyYXlbMF0pIHsNCiAgICAgICAgICAg
ICAgICAgIGNyYXNoID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0
b3RhbFNjb3JlICs9IGFycmF5WzFdOw0KICAgICAgICAgICAgICBhbGxDb2xsaWRlVGltZSAr
PSBhcnJheVsyXSArICIgfCAiOw0KICAgICAgICAgICAgICBhbGxTY29yZSArPSBhcnJheVsx
XSArICIgIjsNCg0KICAgICAgICAgICAgICB0aGlzLmRhbmdlckJ1bGxldHMucHVzaChidWxs
ZXQpOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGxldCBjdXJyZW50UG9zaXRpb25T
Y29yZSA9IHRoaXMuQkVTVF9TQ09SRTsNCiAgICAgIGlmICh0aGlzLmRhbmdlckJ1bGxldHMu
bGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMubG9nKCJpbiBkYW5nZXIhISEiKTsNCiAg
ICAgICAgICB0aGlzLmxvZygiYWxsQ29sbGlkZVRpbWUxIiwgYWxsQ29sbGlkZVRpbWUpOw0K
ICAgICAgICAgIHRoaXMubG9nKCJhbGxTY29yZTEiLCBhbGxTY29yZSk7DQogICAgICAgICAg
dGhpcy5sb2coInRvdGFsU2NvcmUxIiwgdG90YWxTY29yZSk7DQogICAgICAgICAgdGhpcy5s
b2coImJ1bGxldHMgY291bnQiLCB0aGlzLmRhbmdlckJ1bGxldHMubGVuZ3RoKTsNCiAgICAg
ICAgICBpZiAoY3Jhc2gpIHsNCiAgICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uU2NvcmUg
PSB0aGlzLldPUlNUX1NDT1JFOw0KICAgICAgICAgIH0NCiAgICAgICAgICBjdXJyZW50UG9z
aXRpb25TY29yZSA9IHRvdGFsU2NvcmUvdGhpcy5kYW5nZXJCdWxsZXRzLmxlbmd0aDsNCiAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5sb2coInNhZmUhISEiKTsNCiAgICAgIH0N
Cg0KDQogICAgICB0aGlzLmxvZygiY3VycmVudFBvc2l0aW9uU2NvcmU6IiwgY3VycmVudFBv
c2l0aW9uU2NvcmUpOw0KDQogICAgICBpZiAoY3VycmVudFBvc2l0aW9uU2NvcmUgPCB0aGlz
LkJFU1RfU0NPUkUpIHsNCiAgICAgICAgICB0aGlzLmVycm9yKCLmo4DmtYvmnInljbHpmanv
vIzpgY3ljoblkITkuKrmlrnlkJHojrflj5blvpfliIYiKTsNCiAgICAgICAgICAvLyDmnInl
jbHpmanvvIzpnIDopoHmiafooYzourLpgb/nrZbnlaUNCiAgICAgICAgICAvLyDpgY3ljobm
r4/kuKrmlrnlkJHvvIzlkJHlkI7mjqjmvJTkuIDmraXvvIzmo4Dmn6XlvpfliIYNCiAgICAg
ICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuZmluZFJlY29tbWVuZFBhdGgodGhpcy5zdkFs
bERpcmVjdGlvbnMsIGN1cnJlbnRQb3NpdGlvblNjb3JlKTsNCg0KICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAvLyDmsqHmnInljbHpmanvvIzkv53nlKjovpPlhaXnmoTmlrnlkJHov5vo
oYzkuIvkuIDmraXmjqjmvJTvvIzlho3pgInmi6nmlrnlkJENCiAgICAgICAgICB0aGlzLmxv
Zygi5qOA5rWL5rKh5pyJ5Y2x6Zmp77yM5L2/55So6L6T5YWl5pa55ZCR6L+b6KGM5o6o5ryU
Iik7DQogICAgICAgICAgbGV0IGFycmF5ID0gdGhpcy5zY29yZU9mRGlyZWN0aW9uKFtmaW5h
bERpcmVjdGlvbl0sIDEpOw0KICAgICAgICAgIGxldCBzY29yZSA9IGFycmF5WzBdOw0KICAg
ICAgICAgIHRoaXMubG9nKCLmjqjmvJTlkI7lvpfliIbvvJoiICsgc2NvcmUpOw0KICAgICAg
ICAgIGlmIChzY29yZSA8IGN1cnJlbnRQb3NpdGlvblNjb3JlKSB7DQogICAgICAgICAgICAg
IHRoaXMuZXJyb3IoIuS9v+eUqOi+k+WFpeaWueWQkeaOqOa8lOacieWNsemZqSIpOw0KICAg
ICAgICAgICAgICAvLyDljbHpmanvvIzmlLnlj5jmlrnlkJENCiAgICAgICAgICAgICAgbGV0
IHRlbXBEaXJlY3Rpb25zID0gW107DQogICAgICAgICAgICAgIHRoaXMuc3ZBbGxEaXJlY3Rp
b25zLmZvckVhY2goZGlyZWN0aW9uID0+IHsNCiAgICAgICAgICAgICAgICAgIC8vIOaOkumZ
pOaOieacieWNsemZqeeahOaWueWQkeS4jeWGjemBjeWOhg0KICAgICAgICAgICAgICAgICAg
aWYgKGRpcmVjdGlvbiAhPT0gZmluYWxEaXJlY3Rpb24pIHsNCiAgICAgICAgICAgICAgICAg
ICAgICB0ZW1wRGlyZWN0aW9ucy5wdXNoKGRpcmVjdGlvbik7DQogICAgICAgICAgICAgICAg
ICB9DQogICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9u
ID0gdGhpcy5maW5kUmVjb21tZW5kUGF0aCh0ZW1wRGlyZWN0aW9ucywgc2NvcmUpOw0KDQog
ICAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB0aGlzLmxvZygiZmluYWxEaXJlY3Rpb24i
LCB0aGlzLlNWR2V0RGlyZWN0aW9uU3RyKGZpbmFsRGlyZWN0aW9uKSk7DQoNCiAgICAgIC8v
IFRPRE8gU0NKIOagueaNrui6sumBv+aXtui/lOWbnueahOWPr+ihjOeahOaWueWQkeWSjOi3
neemu+ebruagh+i/nOi/keWGs+WumuWHuuS4gOS4quacgOe7iOaWueWQkQ0KICAgICAgcmV0
dXJuIGZpbmFsRGlyZWN0aW9uOw0KICB9DQoNCg0KICBmaW5kUmVjb21tZW5kUGF0aChpbnB1
dERpcmVjdGlvbnMsIGN1cnJlbnRTY29yZSkgew0KICAgICAgbGV0IHN0YW5kQnlQYXRoID0g
dW5kZWZpbmVkOw0KICAgICAgbGV0IGJlc3RQYXRoID0gdW5kZWZpbmVkOw0KICAgICAgbGV0
IHBhdGhzID0gW107DQogICAgICBpbnB1dERpcmVjdGlvbnMuZm9yRWFjaChkaXJlY3Rpb24g
PT4gew0KICAgICAgICAgIGxldCBtb3ZlbWVudHMgPSBbXTsNCiAgICAgICAgICBtb3ZlbWVu
dHMucHVzaCh0aGlzLk1vdmVtZW50KGRpcmVjdGlvbiwgMCkpOw0KICAgICAgICAgIGxldCBw
YXRoID0gdGhpcy5QYXRoKCk7DQogICAgICAgICAgcGF0aC5tb3ZlbWVudHMgPSBtb3ZlbWVu
dHM7DQogICAgICAgICAgcGF0aHMucHVzaChwYXRoKTsNCiAgICAgIH0pOw0KDQogICAgICBs
ZXQgcmVjb21tZW5kUGF0aCA9IHVuZGVmaW5lZDsNCg0KICAgICAgZm9yKGxldCBpPTE7IGk8
PXRoaXMuTUFYX0RFRFVDRV9DT1VOVDsgaSsrKSB7DQogICAgICAgICAgbGV0IGFycmF5ID0g
dGhpcy5kZWR1Y2UocGF0aHMsIGkpOw0KICAgICAgICAgIHBhdGhzID0gYXJyYXlbMF07DQog
ICAgICAgICAgYmVzdFBhdGggPSBhcnJheVsxXTsNCiAgICAgICAgICBzdGFuZEJ5UGF0aCA9
IGFycmF5WzJdOw0KICAgICAgICAgIGlmIChiZXN0UGF0aCAhPT0gdW5kZWZpbmVkKSB7DQog
ICAgICAgICAgICAgIHJlY29tbWVuZFBhdGggPSBiZXN0UGF0aDsNCiAgICAgICAgICAgICAg
YnJlYWs7DQogICAgICAgICAgfSBlbHNlIGlmIChzdGFuZEJ5UGF0aCAhPT0gdW5kZWZpbmVk
KSB7DQogICAgICAgICAgICAgIHJlY29tbWVuZFBhdGggPSBzdGFuZEJ5UGF0aDsNCiAgICAg
ICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBsZXQgZmlu
YWxEaXJlY3Rpb247DQogICAgICBsZXQgaGlnaGVzdFNjb3JlID0gdGhpcy5XT1JTVF9TQ09S
RTsNCg0KICAgICAgaWYgKHJlY29tbWVuZFBhdGggIT09IHVuZGVmaW5lZCkgew0KICAgICAg
ICAgIC8vIOaJvuWIsOS6huacgOWlveeahOi3r+W+hOaIluWkh+eUqOi3r+W+hA0KICAgICAg
ICAgIHRoaXMubG9nKCJmaW5kIGJlc3QgcGF0aCA6ICIsIHJlY29tbWVuZFBhdGgubW92ZW1l
bnRzKTsNCiAgICAgICAgICB0aGlzLmxvZygi5pyA57uI5o6o5ryU5o6o6I2Q6Lev5b6E77ya
IiwgcmVjb21tZW5kUGF0aC5tb3ZlbWVudHMpOw0KICAgICAgICAgIGhpZ2hlc3RTY29yZSA9
IHJlY29tbWVuZFBhdGgubW92ZW1lbnRzW3JlY29tbWVuZFBhdGgubW92ZW1lbnRzLmxlbmd0
aC0xXS5zY29yZTsNCiAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHJlY29tbWVuZFBhdGgu
bW92ZW1lbnRzWzBdLmRpcmVjdGlvbjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgLy8g
5aaC5p6cMuatpeaOqOa8lOS5i+WQjuS7jeeEtuayoeacieaJvuWIsOacgOS9s+i3r+W+hO+8
jOWImemHh+eUqOS4gOebtOW+gOS4gOS4quaWueWQkeenu+WKqOeahOetlueVpeWOu+aJvg0K
ICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuZGVkdWNlRm9yT25lRGlyZWN0aW9uKHRoaXMu
ZGFuZ2VyQnVsbGV0cyk7DQogICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSBhcnJheVswXTsN
CiAgICAgICAgICBsZXQgaGlnaGVzdFNjb3JlRnJvbURlZXBEZWR1Y2UgPSBhcnJheVsxXTsN
CiAgICAgICAgICB0aGlzLmxvZygiZmluYWwgZGlyZWN0aW9uIGZyb20gZGVlcCBkZWR1Y2Ug
aXMgIiAsIGZpbmFsRGlyZWN0aW9uKTsNCiAgICAgICAgICBpZiAoaGlnaGVzdFNjb3JlRnJv
bURlZXBEZWR1Y2UgPT09IHRoaXMuQkVTVF9TQ09SRSkgew0KICAgICAgICAgICAgICBoaWdo
ZXN0U2NvcmUgPSBoaWdoZXN0U2NvcmVGcm9tRGVlcERlZHVjZTsNCiAgICAgICAgICB9IGVs
c2Ugew0KICAgICAgICAgICAgICAvLyDlpoLmnpzkvp3nhLbmsqHmnInmib7liLDmnIDkvbPo
t6/lvoTvvIzpgInkuKrliIbmnIDpq5jnmoTvvIzlkKzlpKnnlLHlkb0NCiAgICAgICAgICAg
ICAgdGhpcy5sb2coIm5vdCBmaW5kIGJlc3QgcGF0aCBhbmQgcGF0aHMgY291bnQgOiAiLCBw
YXRocy5sZW5ndGgpOw0KICAgICAgICAgICAgICAvLyDmnKrmib7liLDmnIDlpb3ot6/lvoTv
vIzkvb/nlKjlvpfliIbmnIDpq5jnmoTpgqPkuKoNCiAgICAgICAgICAgICAgcGF0aHMuc29y
dCh0aGlzLnNvcnRQYXRocyk7DQogICAgICAgICAgICAgIGlmIChwYXRocy5sZW5ndGggPiAw
KSB7DQogICAgICAgICAgICAgICAgICByZWNvbW1lbmRQYXRoID0gcGF0aHNbMF07DQogICAg
ICAgICAgICAgICAgICBsZXQgdGVtcEhpZ2hlc3RTY29yZSA9IHJlY29tbWVuZFBhdGgubW92
ZW1lbnRzW3JlY29tbWVuZFBhdGgubW92ZW1lbnRzLmxlbmd0aC0xXS5zY29yZTsNCiAgICAg
ICAgICAgICAgICAgIC8vIOmAieaLqeWHujLmraXmjqjmvJTkuI7lpJrmraXlkIzmlrnlkJHm
jqjmvJTkuK3lvpfliIbmnIDpq5jnmoQNCiAgICAgICAgICAgICAgICAgIGlmICh0ZW1wSGln
aGVzdFNjb3JlID4gaGlnaGVzdFNjb3JlRnJvbURlZXBEZWR1Y2UpIHsNCiAgICAgICAgICAg
ICAgICAgICAgICBoaWdoZXN0U2NvcmUgPSB0ZW1wSGlnaGVzdFNjb3JlOw0KICAgICAgICAg
ICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gcmVjb21tZW5kUGF0aC5tb3ZlbWVudHNb
MF0uZGlyZWN0aW9uOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQog
ICAgICAgICAgICAgIGxldCBwYXRoZXMgPSAicGF0aHMgZnJvbSBkZWR1Y2UyIDogIjsNCiAg
ICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxwYXRocy5sZW5ndGg7aSsrKSB7DQogICAgICAg
ICAgICAgICAgICBsZXQgcGF0aCA9IHBhdGhzW2ldOw0KICAgICAgICAgICAgICAgICAgcGF0
aGVzICs9ICJbIiArIHBhdGgubW92ZW1lbnRzWzBdLmRpcmVjdGlvbiArICItIiArIHBhdGgu
bW92ZW1lbnRzWzBdLnNjb3JlICsgIiwgIiArIHBhdGgubW92ZW1lbnRzWzFdLmRpcmVjdGlv
biArICItIiArIHBhdGgubW92ZW1lbnRzWzFdLnNjb3JlICsgIl0sICI7DQogICAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgICAgdGhpcy5sb2coInBhdGgyOiIsIHBhdGhlcyk7DQogICAg
ICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB0aGlzLmxvZygiaGlnaGVzdCBzY29yZSBpcyAi
LCBoaWdoZXN0U2NvcmUpOw0KICAgICAgaWYgKGhpZ2hlc3RTY29yZSA+PSBjdXJyZW50U2Nv
cmUpIHsNCiAgICAgICAgICB0aGlzLmxvZygiZmluYWwgdXNlIHRoaXMgZGlyZWN0aW9uIiwg
dGhpcy5TVkdldERpcmVjdGlvblN0cihmaW5hbERpcmVjdGlvbikpOw0KICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICB0aGlzLmVycm9yKCJTVE9QIDog6ZyA6KaB5o+Q5YmN6L+b6KGM5rex
5LiA5bGC5o6o5ryUIik7DQogICAgICB9DQogICAgICByZXR1cm4gZmluYWxEaXJlY3Rpb247
DQogIH0NCg0KICBkZWR1Y2VJZkNyYXNoRm9ySW1hZ2luQnVsbGV0cyhidWxsZXRzKSB7DQog
ICAgICBmb3IobGV0IGs9MDtrPHRoaXMuc3ZOb1N0b3BEaXJlY3Rpb25zLmxlbmd0aDtrKysp
IHsNCiAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5zdk5vU3RvcERpcmVjdGlvbnNb
a107DQogICAgICAgICAgbGV0IGNyYXNoID0gZmFsc2U7DQogICAgICAgICAgZm9yKGxldCBp
PTE7aTw9MTAgJiYgIWNyYXNoOyBpKyspIHsNCiAgICAgICAgICAgICAgbGV0IHNjb3JlID0g
dGhpcy5zY29yZU9mTlNhbWVEaXJlY3Rpb25zKGRpcmVjdGlvbiwgaSwgYnVsbGV0cywgdGhp
cy50YXJnZXRUYW5rSW5mb1syXSk7DQogICAgICAgICAgICAgIGlmIChzY29yZSA+IDApIHsN
CiAgICAgICAgICAgICAgICAgIGlmIChzY29yZSA9PT0gdGhpcy5CRVNUX1NDT1JFKSB7DQog
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgY3Jhc2ggPSB0
cnVlOw0KICAgICAgICAgICAgICAgICAgLy8g55u45pKe5LqG77yM6IiN5byD5b2T5YmN5pa5
5ZCRDQogICAgICAgICAgICAgICAgICB0aGlzLmVycm9yKCJubyBiZXN0IHNjb3JlIGluIHRo
aXMgZGVyZWN0aW9uIiwgdGhpcy5TVkdldERpcmVjdGlvblN0cihkaXJlY3Rpb24pKTsNCiAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8vIOayoeacieac
gOWlveeahOWIhuaVsOeahOaDheWGteS4i++8jOi/lOWbnnRydWUs5Y2z5omA5pyJ5pa55ZCR
6YO95Lya55u45pKeDQogICAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGRlZHVjZUZvck9u
ZURpcmVjdGlvbihidWxsZXRzKSB7DQogICAgICBsZXQgaGlnaGVzdFNjb3JlID0gdGhpcy5X
T1JTVF9TQ09SRTsNCiAgICAgIGxldCBkaXJlY3Rpb25Pbk5vQmVzdCA9IHRoaXMuRElSRUNU
SU9OLlNUT1A7DQogICAgICBmb3IobGV0IGs9MDtrPHRoaXMuc3ZOb1N0b3BEaXJlY3Rpb25z
Lmxlbmd0aDtrKyspIHsNCiAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5zdk5vU3Rv
cERpcmVjdGlvbnNba107DQogICAgICAgICAgbGV0IGNyYXNoID0gZmFsc2U7DQogICAgICAg
ICAgZm9yKGxldCBpPTE7aTw9dGhpcy5NQVhfREVEVUNFX0NPVU5UX0ZPUl9PTkVfRElSICYm
ICFjcmFzaDsgaSsrKSB7DQogICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVP
Zk5TYW1lRGlyZWN0aW9ucyhkaXJlY3Rpb24sIGksIGJ1bGxldHMsIHRoaXMuc3ZNeVRhbmsp
Ow0KICAgICAgICAgICAgICAvLyDliY3kuKTmrKHnmoTpgY3ljobljIXlkKvlnKjkuoZkZWR1
Y2Uy6YeM6Z2i77yM5LiN5bqU6K+l5Lmf5LiN6ZyA6KaB6K6h566X5Zyo5YaFDQogICAgICAg
ICAgICAgIGlmIChzY29yZSA+IGhpZ2hlc3RTY29yZSAmJiBpPjIpIHsNCiAgICAgICAgICAg
ICAgICAgIGhpZ2hlc3RTY29yZSA9IHNjb3JlOw0KICAgICAgICAgICAgICAgICAgZGlyZWN0
aW9uT25Ob0Jlc3QgPSBkaXJlY3Rpb247DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgaWYgKHNjb3JlID4gMCkgew0KICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlID09PSB0
aGlzLkJFU1RfU0NPUkUpIHsNCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2RpcmVj
dGlvbiwgdGhpcy5CRVNUX1NDT1JFXTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGNyYXNoID0gdHJ1ZTsNCiAgICAg
ICAgICAgICAgICAgIC8vIOebuOaSnuS6hu+8jOiIjeW8g+W9k+WJjeaWueWQkQ0KICAgICAg
ICAgICAgICAgICAgdGhpcy5lcnJvcigibm8gYmVzdCBzY29yZSBpbiB0aGlzIGRlcmVjdGlv
biIsIHRoaXMuU1ZHZXREaXJlY3Rpb25TdHIoZGlyZWN0aW9uKSk7DQogICAgICAgICAgICAg
IH0NCiAgICAgICAgICB9DQogICAgICB9DQogICAgICAvLyDmsqHmnInmnIDlpb3nmoTliIbm
lbDnmoTmg4XlhrXkuIvvvIzov5Tlm57mnIDpq5jliIblj4rlhbbmlrnlkJENCiAgICAgIHJl
dHVybiBbZGlyZWN0aW9uT25Ob0Jlc3QsIGhpZ2hlc3RTY29yZV07DQogIH0NCg0KICBkZWR1
Y2UocGF0aHMsIHN0ZXApIHsNCiAgICAgIGlmIChzdGVwID09PSAxKSB7DQogICAgICAgICAg
Ly8g56ys5LiA5q2l5b6X5Yiw55qE5Li6V09SU1RfU0NPUkXnmoTmlrnlkJHopoHoiI3lvIMN
CiAgICAgICAgICBsZXQgcmVzdWx0UGF0aHMgPSBbXTsNCiAgICAgICAgICAvLyDlpIfpgIno
t6/lvoQNCiAgICAgICAgICBsZXQgc3RhbmRCeVBhdGggPSB1bmRlZmluZWQ7DQogICAgICAg
ICAgLy8g5pyA5aW96Lev5b6EDQogICAgICAgICAgbGV0IGJlc3RQYXRoID0gdW5kZWZpbmVk
Ow0KICAgICAgICAgIHRoaXMubG9nKCJkZWR1Y2UxPT09PT09PT09PT09PT09PT0+Iik7DQog
ICAgICAgICAgZm9yKGxldCBpPTA7aTxwYXRocy5sZW5ndGg7aSsrKSB7DQogICAgICAgICAg
ICAgIGxldCBwYXRoID0gcGF0aHNbaV07DQogICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24g
PSBwYXRoLm1vdmVtZW50c1swXS5kaXJlY3Rpb247DQogICAgICAgICAgICAgIGxldCBhcnJh
eSA9IHRoaXMuc2NvcmVPZkRpcmVjdGlvbihbZGlyZWN0aW9uXSwgMSk7DQogICAgICAgICAg
ICAgIGxldCBzY29yZSA9IGFycmF5WzBdOw0KICAgICAgICAgICAgICBsZXQgaW1hZ2luYXJ5
VGFuayA9IGFycmF5WzFdOw0KICAgICAgICAgICAgICBpZiAoc2NvcmUgPiAwKSB7DQogICAg
ICAgICAgICAgICAgICBwYXRoLm1vdmVtZW50c1swXS5zY29yZSA9IHNjb3JlOw0KICAgICAg
ICAgICAgICAgICAgcmVzdWx0UGF0aHMucHVzaChwYXRoKTsNCiAgICAgICAgICAgICAgICAg
IGlmIChzY29yZSA9PT0gdGhpcy5CRVNUX1NDT1JFKSB7DQogICAgICAgICAgICAgICAgICAg
ICAgLy8g5aaC5p6c6JC954K55L2N572u5LiN5L2z77yM5YiZ57un57ut5a+75om+5YW25LuW
5pa55ZCRDQogICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlT2ZQb3NpdGlvbiA9IHRo
aXMuaW1hZ2luYXJ5VGFua1Bvc2l0aW9uU2NvcmUoaW1hZ2luYXJ5VGFuayk7DQogICAgICAg
ICAgICAgICAgICAgICAgaWYgKHNjb3JlT2ZQb3NpdGlvbiA8IDApIHsNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgc3RhbmRCeVBhdGggPSBwYXRoOw0KICAgICAgICAgICAgICAgICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RQYXRoID0gcGF0
aDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAg
ICAgfQ0KICAgICAgICAgIHRoaXMubG9nKCJkZWR1Y2UxPD09PT09PT09PT09PT09PT09Iik7
DQogICAgICAgICAgcmV0dXJuIFtyZXN1bHRQYXRocywgYmVzdFBhdGgsIHN0YW5kQnlQYXRo
XTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5sb2coImRlZHVjZSIgKyBzdGVw
ICsgIj09PT09PT09PT09PT09PT09PT09PT4iKTsNCiAgICAgICAgICBsZXQgc3RhbmRieVBh
dGggPSB1bmRlZmluZWQ7DQogICAgICAgICAgbGV0IGJlc3RQYXRoID0gdW5kZWZpbmVkOw0K
ICAgICAgICAgIGxldCBmaW5hbFBhdGhzID0gW107DQogICAgICAgICAgbGV0IGZpbmRCZXN0
ID0gZmFsc2U7DQogICAgICAgICAgZm9yKGxldCBqPTA7ajxwYXRocy5sZW5ndGg7aisrKSB7
DQogICAgICAgICAgICAgIGxldCBwYXRoID0gcGF0aHNbal07DQogICAgICAgICAgICAgIGxl
dCB0ZW1wUGF0aHMgPSBbXTsNCiAgICAgICAgICAgICAgZm9yKGxldCBrPTA7IGs8dGhpcy5z
dkFsbERpcmVjdGlvbnMubGVuZ3RoOyBrKyspIHsNCiAgICAgICAgICAgICAgICAgIGxldCBk
aXJlY3Rpb24gPSB0aGlzLnN2QWxsRGlyZWN0aW9uc1trXTsNCiAgICAgICAgICAgICAgICAg
IGxldCBkaXJlY3Rpb25zID0gW107DQogICAgICAgICAgICAgICAgICAvLyDmi7zmjqXmiJDm
lrDnmoTot6/lvoQNCiAgICAgICAgICAgICAgICAgIGxldCBtb3ZlbWVudHMgPSBwYXRoLm1v
dmVtZW50czsNCiAgICAgICAgICAgICAgICAgIG1vdmVtZW50cy5mb3JFYWNoKG1vdmVtZW50
ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25zLnB1c2gobW92ZW1lbnQu
ZGlyZWN0aW9uKTsNCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAg
ZGlyZWN0aW9ucy5wdXNoKGRpcmVjdGlvbik7DQogICAgICAgICAgICAgICAgICBsZXQgYXJy
YXkgPSB0aGlzLnNjb3JlT2ZEaXJlY3Rpb24oZGlyZWN0aW9ucywgc3RlcCk7DQogICAgICAg
ICAgICAgICAgICBsZXQgc2NvcmUgPSBhcnJheVswXTsNCiAgICAgICAgICAgICAgICAgIGxl
dCBpbWFnaW5hcnlUYW5rID0gYXJyYXlbMV07DQogICAgICAgICAgICAgICAgICBpZiAoc2Nv
cmUgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBQYXRoID0gdGhpcy5Q
YXRoKCk7DQogICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBNb3ZlbWVudHMgPSBbXTsN
CiAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcE1vdmVtZW50ID0gdGhpcy5Nb3ZlbWVu
dChkaXJlY3Rpb24sIHNjb3JlKTsNCiAgICAgICAgICAgICAgICAgICAgICB0ZW1wTW92ZW1l
bnRzLnB1c2guYXBwbHkodGVtcE1vdmVtZW50cywgbW92ZW1lbnRzKTsNCiAgICAgICAgICAg
ICAgICAgICAgICB0ZW1wTW92ZW1lbnRzLnB1c2godGVtcE1vdmVtZW50KTsNCiAgICAgICAg
ICAgICAgICAgICAgICB0ZW1wUGF0aC5tb3ZlbWVudHMgPSB0ZW1wTW92ZW1lbnRzOw0KICAg
ICAgICAgICAgICAgICAgICAgIHRlbXBQYXRocy5wdXNoKHRlbXBQYXRoKTsNCiAgICAgICAg
ICAgICAgICAgICAgICBpZiAoc2NvcmUgPT09IHRoaXMuQkVTVF9TQ09SRSkgew0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAvLyDmib7liLDmnIDlpb3ot6/lvoTlkI7ov5Tlm54NCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgLy8g566XdGFua+S9jee9ruW+l+WIhg0KICAgICAg
ICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmVPZlBvc2l0aW9uID0gdGhpcy5pbWFnaW5h
cnlUYW5rUG9zaXRpb25TY29yZShpbWFnaW5hcnlUYW5rKTsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgaWYgKHNjb3JlT2ZQb3NpdGlvbiA8IDApIHsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0YW5kYnlQYXRoID0gdGVtcFBhdGg7DQogICAgICAgICAgICAgICAg
ICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0
UGF0aCA9IHRlbXBQYXRoOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluZEJl
c3QgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAg
ICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZmluYWxQ
YXRocy5wdXNoLmFwcGx5KGZpbmFsUGF0aHMsIHRlbXBQYXRocyk7DQogICAgICAgICAgICAg
IGlmIChmaW5kQmVzdCkgew0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAg
ICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5sb2coImRlZHVjZSIgKyBzdGVw
ICsgIjw9PT09PT09PT09PT09PT09PT09PT0iKTsNCiAgICAgICAgICByZXR1cm4gW2ZpbmFs
UGF0aHMsIGJlc3RQYXRoLCBzdGFuZGJ5UGF0aF07DQogICAgICB9DQogIH0NCg0KICAvLyDl
voDlkIzkuIDkuKrmlrnlkJHmjqjmvJRO5q2l5ZCO5YiG5p6Q5bGA6Z2i5b6X5YiGDQogIHNj
b3JlT2ZOU2FtZURpcmVjdGlvbnMoZGlyZWN0aW9uLCBzdGVwLCBidWxsZXRzLCB0YW5rKSB7
DQogICAgICBsZXQgaW1hZ2luYXJ5VGFuayA9IHRoaXMuY29weU9mVGFuayh0YW5rKTsNCiAg
ICAgIGltYWdpbmFyeVRhbmsuZGlyZWN0aW9uID0gZGlyZWN0aW9uOw0KDQogICAgICB0aGlz
LnByaW50TW92YWJsZVBvcygiYmVmb3JlIG1vdmUiLCBpbWFnaW5hcnlUYW5rKTsNCiAgICAg
IHRoaXMucHJpbnRCdWxsZXRzUG9zKCJiZWZvcmUgbW92ZSIsIGJ1bGxldHMpOw0KDQogICAg
ICBsZXQgYXJyYXkgPSB0aGlzLmltYWdpbmVBbGxNb3ZlTlN0ZXBGb3JPbmVEaXJlY3Rpb24o
YnVsbGV0cywgaW1hZ2luYXJ5VGFuaywgc3RlcCk7DQogICAgICBpbWFnaW5hcnlUYW5rID0g
YXJyYXlbMF07DQogICAgICBidWxsZXRzID0gYXJyYXlbMV07DQogICAgICB0aGlzLmxvZygi
5b2T5YmN6YGN5Y6G55qE5pa55ZCRKCIgKyBzdGVwICsgIuatpSk9IiwgdGhpcy5TVkdldERp
cmVjdGlvblN0cihkaXJlY3Rpb24pKTsNCg0KICAgICAgdGhpcy5wcmludE1vdmFibGVQb3Mo
ImFmdGVyIG1vdmUiLCBpbWFnaW5hcnlUYW5rKTsNCiAgICAgIHRoaXMucHJpbnRCdWxsZXRz
UG9zKCJhZnRlciBtb3ZlIiwgYnVsbGV0cyk7DQoNCiAgICAgIHJldHVybiB0aGlzLmFuYWx5
emVDdXJyZW50U2l0dWF0aW9uKGltYWdpbmFyeVRhbmssIGJ1bGxldHMsIHN0ZXAsIGRpcmVj
dGlvbik7DQogIH0NCg0KICAvLyDlkJHlkI7mjqjmvJRzdGVw5q2l5ZCO5YiG5p6Q5bGA6Z2i
5b6X5YiGDQogIHNjb3JlT2ZEaXJlY3Rpb24oZGlyZWN0aW9ucywgc3RlcCkgew0KICAgICAg
bGV0IGltYWdpbmFyeVRhbmsgPSB0aGlzLmNvcHlPZlRhbmsodGhpcy5zdk15VGFuayk7DQog
ICAgICBsZXQgYnVsbGV0cyA9IHRoaXMuZGFuZ2VyQnVsbGV0czsNCg0KICAgICAgdGhpcy5w
cmludE1vdmFibGVQb3MoImJlZm9yZSBtb3ZlIiwgaW1hZ2luYXJ5VGFuayk7DQogICAgICB0
aGlzLnByaW50QnVsbGV0c1BvcygiYmVmb3JlIG1vdmUiLCBidWxsZXRzKTsNCg0KICAgICAg
bGV0IGk9MDsNCiAgICAgIGRpcmVjdGlvbnMuZm9yRWFjaChkaXJlY3Rpb24gPT4gew0KICAg
ICAgICAgIGltYWdpbmFyeVRhbmsuZGlyZWN0aW9uID0gZGlyZWN0aW9uOw0KICAgICAgICAg
IGxldCBmaXJzdFN0ZXAgPSAoaSA9PT0gMCk7DQogICAgICAgICAgbGV0IGFycmF5ID0gdGhp
cy5pbWFnaW5lQWxsTW92ZU9uZVN0ZXAoYnVsbGV0cywgaW1hZ2luYXJ5VGFuaywgZmlyc3RT
dGVwKTsNCiAgICAgICAgICBpbWFnaW5hcnlUYW5rID0gYXJyYXlbMF07DQogICAgICAgICAg
YnVsbGV0cyA9IGFycmF5WzFdOw0KICAgICAgICAgIHRoaXMubG9nKCLlvZPliY3pgY3ljobn
moTmlrnlkJE9IiwgdGhpcy5TVkdldERpcmVjdGlvblN0cihkaXJlY3Rpb24pKTsNCiAgICAg
ICAgICBpKys7DQogICAgICB9KTsNCg0KICAgICAgdGhpcy5wcmludE1vdmFibGVQb3MoImFm
dGVyIG1vdmUiLCBpbWFnaW5hcnlUYW5rKTsNCiAgICAgIHRoaXMucHJpbnRCdWxsZXRzUG9z
KCJhZnRlciBtb3ZlIiwgYnVsbGV0cyk7DQoNCiAgICAgIHJldHVybiBbdGhpcy5hbmFseXpl
Q3VycmVudFNpdHVhdGlvbihpbWFnaW5hcnlUYW5rLCBidWxsZXRzLCBzdGVwLCBkaXJlY3Rp
b25zW2RpcmVjdGlvbnMubGVuZ3RoLTFdKSwgaW1hZ2luYXJ5VGFua107DQogIH0NCg0KICBh
bmFseXplQ3VycmVudFNpdHVhdGlvbihpbWFnaW5hcnlUYW5rLCBidWxsZXRzLCBzdGVwLCBk
aXJlY3Rpb24pIHsNCiAgICAgIGlmIChidWxsZXRzLmxlbmd0aCA8PSAwKSB7DQogICAgICAg
ICAgcmV0dXJuIHRoaXMuQkVTVF9TQ09SRTsNCiAgICAgIH0NCiAgICAgIGxldCB0b3RhbFNj
b3JlID0gMDsNCiAgICAgIGxldCBhbGxDb2xsaWRlVGltZSA9ICIiOw0KICAgICAgbGV0IGFs
bFNjb3JlID0gIiI7DQogICAgICAvLyDnlKjkuo7liKTmlq3miYDmnInljbHpmanlrZDlvLnn
moTmlrnlkJHmmK/lkKbnm7jlkIzvvIzlpoLmnpznm7jlkIzvvIzliJnoiI3lvIPlvoDlrZDl
vLnnm7jlkIzmlrnlkJHpgIPot5HnmoTot6/lvoTvvIzlpoLmnpzkuI3nm7jlkIzvvIzliJnl
voDnm7jlkIzmlrnlkJHot5HmmK/mnInlj6/og73pgIPohLHnmoQNCiAgICAgIGxldCBidWxs
ZXREaXJlY3Rpb24gPSBidWxsZXRzWzBdLmRpcmVjdGlvbjsNCiAgICAgIGxldCBhbGxCdWxs
ZXRzU2FtZURpcmVjdGlvbiA9IHRydWU7DQogICAgICBsZXQgaXNCZXN0U2NvcmUgPSB0cnVl
Ow0KICAgICAgbGV0IGNyYXNoID0gZmFsc2U7DQogICAgICBmb3IobGV0IGk9MDsgaTxidWxs
ZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IGJ1bGxldCA9IGJ1bGxldHNbaV07
DQogICAgICAgICAgbGV0IGFycmF5ID0gdGhpcy5nZXRCdWxsZXRTY29yZUluZm8oaW1hZ2lu
YXJ5VGFuaywgYnVsbGV0LCBzdGVwKTsNCiAgICAgICAgICB0b3RhbFNjb3JlICs9IGFycmF5
WzFdOw0KICAgICAgICAgIGFsbENvbGxpZGVUaW1lICs9IGFycmF5WzJdICsgIiB8ICI7DQog
ICAgICAgICAgYWxsU2NvcmUgKz0gYXJyYXlbMV0gKyAiICI7DQogICAgICAgICAgaWYgKGFy
cmF5WzBdKSB7DQogICAgICAgICAgICAgIC8vIOacieebuOaSnueahOaDheWGte+8jOebtOaO
peW+l+WIhuS4uuacgOWdj+WIhg0KICAgICAgICAgICAgICBjcmFzaCA9IHRydWU7DQogICAg
ICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoYnVsbGV0RGly
ZWN0aW9uICE9PSBidWxsZXQuZGlyZWN0aW9uKSB7DQogICAgICAgICAgICAgIGFsbEJ1bGxl
dHNTYW1lRGlyZWN0aW9uID0gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChh
cnJheVsxXSA8IHRoaXMuQkVTVF9TQ09SRSkgew0KICAgICAgICAgICAgICBpc0Jlc3RTY29y
ZSA9IGZhbHNlOw0KICAgICAgICAgIH0NCg0KICAgICAgfQ0KDQogICAgICB0aGlzLmxvZygi
YWxsQ29sbGlkZVRpbWVBbmREaXN0YW5jZSA6ICIsIGFsbENvbGxpZGVUaW1lKTsNCiAgICAg
IHRoaXMubG9nKCJhbGxTY29yZToiLCBhbGxTY29yZSk7DQoNCiAgICAgIGlmIChjcmFzaCkg
ew0KICAgICAgICAgIHJldHVybiB0aGlzLldPUlNUX1NDT1JFOw0KICAgICAgfQ0KDQogICAg
ICAvLyDmiYDmnInlrZDlvLnpg73mmK/kuIDkuKrmlrnlkJHvvIzkuJTmlrnlkJHkuI7mjqjm
vJTmlrnlkJHnm7jlkIzvvIzlubbkuJTmraTmlrnlkJHkuI3mmK/mu6HliIbvvIzliJnoiI3l
vIPmraTmlrnlkJENCiAgICAgIGlmIChhbGxCdWxsZXRzU2FtZURpcmVjdGlvbiAmJiAhaXNC
ZXN0U2NvcmUgJiYgdGhpcy50YXJnZXRUYW5rSW5mb1syXSAhPT0gdGhpcy5lbmVteVRhbmsp
IHsNCiAgICAgICAgICBpZiAoYnVsbGV0RGlyZWN0aW9uID09PSBkaXJlY3Rpb24pIHsNCiAg
ICAgICAgICAgICAgLy8g6IiN5byD5LiO5a2Q5by55pa55ZCR55u45ZCM55qE6YCD6LeR5pa5
5ZCRDQogICAgICAgICAgICAgIC8vIOWPr+iDveS8muWHuueOsOmhuuedgOaWueWQkei1sOWP
r+S7pei6suW8gOiAjOS4jemhuuedgOaWueWQkei1sOWwsei6suS4jeW8gOeahOaDheWGte+8
iOS4pOS4quaWueWQkemDveacieWtkOW8uee7j+i/h+aXtuWHuueOsO+8jOaIkeS7rOeOsOWc
qOeahOetlueVpeaYr+S4jeWuueaYk+WHuueOsOi/meenjeaDheWGteeahO+8iQ0KICAgICAg
ICAgICAgICAvLyBUT0RPIFNDSiDov5jmnInkuIDnp43mg4XlhrXkvJrlr7zoh7TlnablhYvp
obrnnYDlrZDlvLnnmoTmlrnlkJHotbDvvIzljbPkuKTkuKrlrZDlvLnku47kuIrkuIvkuKTo
vrnkuIDotbfnu4/ov4fnmoTml7blgJnvvIzmmoLkuI3nn6XpgZPkuLrku4DkuYjvvIzlkI7m
nJ/lho3mn6UNCiAgICAgICAgICAgICAgdGhpcy5lcnJvcigiaWdub3JlIGRpcmVjdGlvbiBz
YW1lIHdpdGggYnVsbGV0Iik7DQogICAgICAgICAgICAgIHJldHVybiB0aGlzLldPUlNUX1ND
T1JFOw0KICAgICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy8g5ZCE5Liq5a2Q5by555qE
5bmz5Z2H5YiG5L2c5Li65bGA6Z2i5b6X5YiGDQogICAgICByZXR1cm4gdG90YWxTY29yZSAv
IGJ1bGxldHMubGVuZ3RoOw0KICB9DQoNCiAgaW1hZ2luYXJ5VGFua1Bvc2l0aW9uU2NvcmUo
aW1hZ2luYXJ5VGFuaykgew0KICAgICAgbGV0IHRhcmdldFRhbmsgPSB0aGlzLnRhcmdldFRh
bmtJbmZvWzJdOw0KDQogICAgICBpZiAodGFyZ2V0VGFuayA9PT0gdW5kZWZpbmVkKSB7DQog
ICAgICAgICAgLy8g55uu5YmN55yL5piv5ri45oiP57uT5p2f5ZCO5om+5LiN5Yiw5pyA6L+R
55qE5Z2m5YWL5a+86Ie055qEDQogICAgICAgICAgdGhpcy5lcnJvcigic2hpdCBjaGVjayIp
Ow0KICAgICAgICAgIHJldHVybiAwOw0KICAgICAgfQ0KDQogICAgICBsZXQgY3VyRGlzdGFu
Y2UgPSB0aGlzLmdldFRhbmtEaXN0YW5jZSh0aGlzLnN2TXlUYW5rLCB0YXJnZXRUYW5rKVsw
XTsNCiAgICAgIGxldCBpbWdEaXN0YW5jZSA9IHRoaXMuZ2V0VGFua0Rpc3RhbmNlKGltYWdp
bmFyeVRhbmssIHRhcmdldFRhbmspWzBdOw0KICAgICAgaWYgKHRoaXMuaW5EYW5nZXJBcmVh
KHRoaXMuc3ZNeVRhbmssIHRhcmdldFRhbmspKSB7DQogICAgICAgICAgLy8g5aaC5p6c5b2T
5YmN5aSE5Zyo5Y2x6Zmp5Yy65Z+f77yM5YiZ5b6A5pu05Y2x6Zmp55qE5Zyw5pa555qE5pa5
5ZCR5YeP5YiGDQogICAgICAgICAgaWYgKGltZ0Rpc3RhbmNlIDwgY3VyRGlzdGFuY2UpIHsN
CiAgICAgICAgICAgICAgdGhpcy5lcnJvcigibW9yZSBkYW5nZXIsIC0xIik7DQogICAgICAg
ICAgICAgIHJldHVybiAtMTsNCiAgICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAg
ICAgIC8vIOWmguaenOWkhOS6jumdnuWNsemZqeWMuuWfn++8jOWImeW+gOabtOWuieWFqOea
hOWcsOaWueeahOaWueWQkeWHj+WIhg0KICAgICAgICAgIGlmIChpbWdEaXN0YW5jZSA+IGN1
ckRpc3RhbmNlKSB7DQogICAgICAgICAgICAgIHRoaXMuZXJyb3IoIm1vcmUgc2FmZXIsIC0x
Iik7DQogICAgICAgICAgICAgIHJldHVybiAtMTsNCiAgICAgICAgICB9DQogICAgICB9DQog
ICAgICByZXR1cm4gMDsNCiAgfQ0KDQogIGdldERpc3RhbmNlT2YoZHgxLCBkeTEpIHsNCiAg
ICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coZHgxLCAyKSArIE1hdGgucG93KGR5MSwg
MikpOw0KICB9DQoNCiAgZ2V0QnVsbGV0U2NvcmVJbmZvKHRhbmssIGJ1bGxldCwgc3RlcCkg
ew0KICAgICAgbGV0IGhhc1plcm8gPSBmYWxzZTsNCiAgICAgIGxldCB0ZW1wU2NvcmUgPSB0
aGlzLkJFU1RfU0NPUkU7DQogICAgICAvLyDorqHnrpflh7rlrZDlvLnkuI7lnablhYvlvZPl
iY3kvY3nva7ot53nm7jmkp7nmoTml7bpl7QNCiAgICAgIGJ1bGxldC5jb2xsaWRlVGltZSA9
IHRoaXMuZ2V0Q29sbGlkZVN0ZXBzT25CdWxsZXRzTW92ZSh0YW5rLCBidWxsZXQpOw0KICAg
ICAgbGV0IGNvbGxpZGVJbmZvID0gYnVsbGV0LmNvbGxpZGVUaW1lICsgIiAiOw0KICAgICAg
aWYgKGJ1bGxldC5jb2xsaWRlVGltZSA9PT0gMCkgew0KICAgICAgICAgIC8vIOacieaSnuWH
u+eahOaDheWGte+8jOebtOaOpeW+lzDliIYNCiAgICAgICAgICBoYXNaZXJvID0gdHJ1ZTsN
CiAgICAgICAgICB0ZW1wU2NvcmUgPSB0aGlzLldPUlNUX1NDT1JFOw0KICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICBpZiAoYnVsbGV0LmNvbGxpZGVUaW1lID4gMCAmJiBidWxsZXQuY29s
bGlkZVRpbWUgPCB0aGlzLkRBTkdFUl9TVEVQKSB7DQogICAgICAgICAgICAgIC8vIOW+gOWQ
juaOqOa8lHN0ZXDlkI7kvJrmm7Tlv6vpgJ/mkp7lh7vliLDvvIwg5omA5Lul5Yqg5LiA5Liq
c3RlcOi/m+ihjOWIhuaVsOS/ruatow0KICAgICAgICAgICAgICB0ZW1wU2NvcmUgPSB0aGlz
LkJFU1RfU0NPUkUgKyB0aGlzLnNjb3JlT2ZDb2xsaWRlVGltZShidWxsZXQuY29sbGlkZVRp
bWUsIHN0ZXApOw0KICAgICAgICAgICAgICAvLyDorqHnrpflh7rlrZDlvLnkuI7lnablhYvn
m7jmkp7ml7bnmoTkuK3lv4PngrnnmoTmnIDnn63ot53nprsNCiAgICAgICAgICAgICAgYnVs
bGV0LmNlbnRlckRpc3RhbmNlID0gdGhpcy5nZXRNaW5DZW50ZXJEaXN0YW5jZU9mKHRhbmss
IGJ1bGxldCk7DQogICAgICAgICAgICAgIGxldCBzY29yZU9mZGlzdGFuY2UgPSB0aGlzLnNj
b3JlT2ZEaXN0YW5jZShidWxsZXQuY2VudGVyRGlzdGFuY2UpOw0KICAgICAgICAgICAgICB0
ZW1wU2NvcmUgKz0gc2NvcmVPZmRpc3RhbmNlOw0KICAgICAgICAgICAgICBjb2xsaWRlSW5m
byArPSBidWxsZXQuY2VudGVyRGlzdGFuY2UgKyAiICIgKyBzY29yZU9mZGlzdGFuY2U7DQog
ICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgLy8g6L+Y6KaB5oqK5Zyo5Z2m5YWL
56e75Yqo5pa55ZCR5LiK55qE5a2Q5by555qE5Lit5b+D54K555qE6Led56a76K6h566X5Zyo
5YaFDQogICAgICAgICAgICAgIGxldCBjb2xsaWRlVGltZU9uVGFua01vdmUgPSB0aGlzLmdl
dENvbGxpZGVTdGVwc09uVGFua01vdmUodGFuaywgYnVsbGV0KTsNCiAgICAgICAgICAgICAg
aWYgKGNvbGxpZGVUaW1lT25UYW5rTW92ZSA+PSAwICYmIGNvbGxpZGVUaW1lT25UYW5rTW92
ZSA8IHRoaXMuVEFOS19NT1ZFX0RBTkdFUl9TVEVQKSB7DQogICAgICAgICAgICAgICAgICAv
LyDorqHnrpflh7rlrZDlvLnkuI7lnablhYvnm7jmkp7ml7bnmoTkuK3lv4PngrnnmoTot53n
prsNCiAgICAgICAgICAgICAgICAgIGJ1bGxldC5jZW50ZXJEaXN0YW5jZSA9IHRoaXMuZ2V0
TWluQ2VudGVyRGlzdGFuY2VPZih0YW5rLCBidWxsZXQpOw0KICAgICAgICAgICAgICAgICAg
bGV0IHNjb3JlT2ZkaXN0YW5jZSA9IHRoaXMuc2NvcmVPZkRpc3RhbmNlKGJ1bGxldC5jZW50
ZXJEaXN0YW5jZSk7DQogICAgICAgICAgICAgICAgICB0ZW1wU2NvcmUgKz0gc2NvcmVPZmRp
c3RhbmNlOw0KICAgICAgICAgICAgICAgICAgY29sbGlkZUluZm8gKz0gYnVsbGV0LmNlbnRl
ckRpc3RhbmNlICsgIiAiICsgc2NvcmVPZmRpc3RhbmNlOw0KICAgICAgICAgICAgICAgICAg
dGhpcy5sb2coIkZpbmQgYnVsbGV0IG9uIHRhbmsncyBwYXRoLCBjYWxjdWxhdGUgaXRzIGRp
c3RhbmNlMiIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAg
ICAgcmV0dXJuIFtoYXNaZXJvLCB0ZW1wU2NvcmUsIGNvbGxpZGVJbmZvLCBidWxsZXQuY29s
bGlkZVRpbWVdOw0KICB9DQoNCiAgc2NvcmVPZkNvbGxpZGVUaW1lKGNvbGxpZGVUaW1lLCBz
dGVwKSB7DQogICAgICBsZXQgdGVtcFNjb3JlOw0KICAgICAgaWYgKGNvbGxpZGVUaW1lID49
IDE1KSB7DQogICAgICAgICAgdGVtcFNjb3JlID0gLSh0aGlzLkRBTkdFUl9TVEVQIC0gY29s
bGlkZVRpbWUgKyBzdGVwIC0gMSkgKiAyOw0KICAgICAgfSBlbHNlIGlmIChjb2xsaWRlVGlt
ZSA+PSAxMCkgew0KICAgICAgICAgIHRlbXBTY29yZSA9IC0odGhpcy5EQU5HRVJfU1RFUCAt
IGNvbGxpZGVUaW1lICsgc3RlcCAtIDEpICogNDsNCiAgICAgIH0gZWxzZSBpZiAoY29sbGlk
ZVRpbWUgPj01KSB7DQogICAgICAgICAgdGVtcFNjb3JlID0gLSh0aGlzLkRBTkdFUl9TVEVQ
IC0gY29sbGlkZVRpbWUgKyBzdGVwIC0gMSkgKiA4Ow0KICAgICAgfSBlbHNlIHsNCiAgICAg
ICAgICB0ZW1wU2NvcmUgPSAtKHRoaXMuREFOR0VSX1NURVAgLSBjb2xsaWRlVGltZSArIHN0
ZXAgLSAxKSAqIDk7DQogICAgICB9DQogICAgICByZXR1cm4gdGVtcFNjb3JlOw0KDQogICAg
ICAvLyByZXR1cm4gLSh0aGlzLkRBTkdFUl9TVEVQIC0gY29sbGlkZVRpbWUgKyBzdGVwIC0g
MSkNCiAgfQ0KDQogIHNjb3JlT2ZEaXN0YW5jZShkaXN0YW5jZSkgew0KICAgICAgbGV0IHNj
b3JlID0gLSgodGhpcy5CRVNUX0RJU1RBTkNFX09GX0NFTlRFUi1kaXN0YW5jZSkpOw0KICAg
ICAgcmV0dXJuIHNjb3JlOw0KICB9DQoNCiAgY29weU9mVGFuayhteVRhbmspIHsNCiAgICAg
IGxldCBpbWFnaW5hcnlUYW5rID0ge307DQogICAgICBpbWFnaW5hcnlUYW5rLlggPSBteVRh
bmsuWDsNCiAgICAgIGltYWdpbmFyeVRhbmsuWSA9IG15VGFuay5ZOw0KICAgICAgaW1hZ2lu
YXJ5VGFuay5zcGVlZCA9IG15VGFuay5zcGVlZDsNCiAgICAgIHJldHVybiBpbWFnaW5hcnlU
YW5rOw0KICB9DQoNCiAgLy8g5bCG6KaB5pKe5Ye755qE5Lik6ICF5Lit5b+D54K555qE5pyA
6L+R6Led56a7LCDmnIDov5Hot53nprvotorov5HotorljbHpmakNCiAgZ2V0TWluQ2VudGVy
RGlzdGFuY2VPZih0YW5rLCBidWxsZXQpIHsNCiAgICAgIGlmIChidWxsZXQuc3BlZWQgPT09
IDApIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5CRVNUX0RJU1RBTkNFX09GX0NFTlRFUjsN
CiAgICAgIH0NCiAgICAgIGxldCB0YW5rQ2VudGVyUG9pbnQgPSB7fTsNCiAgICAgIGxldCBi
dWxsZXRDZW50ZXJQb2ludCA9IHt9Ow0KICAgICAgdGFua0NlbnRlclBvaW50LlggPSB0YW5r
LlggKyB0YW5rV2lkdGgvMjsNCiAgICAgIHRhbmtDZW50ZXJQb2ludC5ZID0gdGFuay5ZICsg
dGFua1dpZHRoLzI7DQogICAgICBidWxsZXRDZW50ZXJQb2ludC5YID0gYnVsbGV0Llg7DQog
ICAgICBidWxsZXRDZW50ZXJQb2ludC5ZID0gYnVsbGV0Llk7DQogICAgICByZXR1cm4gTWF0
aC5taW4oTWF0aC5hYnModGFua0NlbnRlclBvaW50LlggLSBidWxsZXRDZW50ZXJQb2ludC5Y
KSwgTWF0aC5hYnModGFua0NlbnRlclBvaW50LlkgLSBidWxsZXRDZW50ZXJQb2ludC5ZKSk7
DQogIH0NCg0KICB3aWxsQ29sbGlkZUF0TlN0ZXBzKHBsYXlDb250cm9sLCBzdGVwLCBteVRh
bmssIGJ1bGxldCwgaXNUYW5rTW92ZSkgew0KICAgICAgaWYgKGlzVGFua01vdmUpIHsNCiAg
ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0ZXAsIG15VGFuaywgYnVsbGV0KSB7DQogICAg
ICAgICAgICAgIHJldHVybiBwbGF5Q29udHJvbC53aWxsQ29sbGlkZUF0TlN0ZXBzT25UYW5r
TW92ZShzdGVwLCBteVRhbmssIGJ1bGxldCk7DQogICAgICAgICAgfQ0KICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0ZXAsIG15VGFuaywgYnVsbGV0KSB7
DQogICAgICAgICAgICAgIHJldHVybiBwbGF5Q29udHJvbC53aWxsQ29sbGlkZUF0TlN0ZXBz
T25CdWxsZXRzTW92ZShzdGVwLCBteVRhbmssIGJ1bGxldCk7DQogICAgICAgICAgfQ0KICAg
ICAgfQ0KICB9DQoNCiAgZ2V0Q29sbGlkZVN0ZXBzT25Nb3ZlKG15VGFuaywgYnVsbGV0LCBp
c1RhbmtNb3ZlKSB7DQogICAgICAvLyDmr4/mrKHliqA15q2l77yM5qOA5rWL5Yiw5LmL5ZCO
5YaN5L2/55SoMuWIhuazleaJvuWHuuWFt+S9k+WAvA0KICAgICAgZm9yKGxldCBqPTA7IGo8
PXRoaXMuQ0hFQ0tfU1RFUDsgais9NSkgew0KICAgICAgICAgIGxldCB3aWxsQ29sbGlkZUF0
TlN0ZXBzID0gdGhpcy53aWxsQ29sbGlkZUF0TlN0ZXBzKHRoaXMsIGosIG15VGFuaywgYnVs
bGV0LCBpc1RhbmtNb3ZlKTsNCiAgICAgICAgICBpZiAod2lsbENvbGxpZGVBdE5TdGVwcyhq
LCBteVRhbmssIGJ1bGxldCkpIHsNCiAgICAgICAgICAgICAgaWYgKGogPT09IDApIHsNCiAg
ICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICAgIGxldCBtaW4gPSBqLTQ7DQogICAgICAgICAgICAgIGxldCBtYXggPSBqOw0KICAgICAg
ICAgICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgICAgICAgICAgbGV0IG1pZCA9IHRo
aXMuYmlzZWN0KG1pbiwgbWF4KTsNCiAgICAgICAgICAgICAgICAgIGxldCB3aWxsQ29sbGlk
ZUF0TlN0ZXBzID0gdGhpcy53aWxsQ29sbGlkZUF0TlN0ZXBzKHRoaXMsIG1pZCwgbXlUYW5r
LCBidWxsZXQsIGlzVGFua01vdmUpOw0KICAgICAgICAgICAgICAgICAgaWYgKHdpbGxDb2xs
aWRlQXROU3RlcHMobWlkLCBteVRhbmssIGJ1bGxldCkpIHsNCiAgICAgICAgICAgICAgICAg
ICAgICBpZiAobWlkID09PSBtYXggfHwgbWlkID09PSBtaW4pIHsNCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgLy8g5aaC5p6cbWlk5LiO5pyA5aSn5pyA5bCP5YC85Lit5LiA5Liq55u4
562J77yM5YiZ5Zyo5om+5Yiw55qE5oOF5Ya15LiL6L+U5Zue5bCP55qE6YKj5LiqDQogICAg
ICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtaW47DQogICAgICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIC8vIOW8gOWni+afpeaJvuacgOWwj+WAvOS4
juS4remXtOWAvOS5i+mXtA0KICAgICAgICAgICAgICAgICAgICAgIG1heCA9IG1pZCAtIDE7
DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIGlm
IChtaWQgPT09IG1heCB8fCBtaWQgPT09IG1pbikgew0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAvLyDlpoLmnpxtaWTkuI7mnIDlpKfmnIDlsI/lgLzkuK3kuIDkuKrnm7jnrYnvvIzl
iJnlnKjmsqHmib7liLDnmoTmg4XlhrXkuIvov5Tlm57lpKfnmoTpgqPkuKoNCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgcmV0dXJuIG1heDsNCiAgICAgICAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICAgICAgICAgICAgLy8g5byA5aeL5p+l5om+5Lit6Ze05YC85LiO5pyA
5aSn5YC85LmL6Ze0DQogICAgICAgICAgICAgICAgICAgICAgbWluID0gbWlkICsgMTsNCiAg
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAg
IH0NCiAgICAgIC8vIOi/lOWbnuS4gOS4quavlOi+g+Wkp+eahOaVsO+8jOihqOekuuS4jeS8
mueisOaSng0KICAgICAgcmV0dXJuIHRoaXMuTk9fQ09MTElERTsNCiAgfQ0KDQogIGJpc2Vj
dChtaW4sIG1heCkgew0KICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKG1pbiArIG1heCkvMik7
DQogIH0NCg0KICBnZXRDb2xsaWRlU3RlcHNPblRhbmtNb3ZlKG15VGFuaywgYnVsbGV0KSB7
DQogICAgICByZXR1cm4gdGhpcy5nZXRDb2xsaWRlU3RlcHNPbk1vdmUobXlUYW5rLCBidWxs
ZXQsIHRydWUpOw0KICB9DQoNCiAgZ2V0Q29sbGlkZVN0ZXBzT25CdWxsZXRzTW92ZShteVRh
bmssIGJ1bGxldCkgew0KICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sbGlkZVN0ZXBzT25Nb3Zl
KG15VGFuaywgYnVsbGV0LCBmYWxzZSk7DQogIH0NCg0KICAvLyDmg7Plg4/lrZDlvLnkuI7l
nablhYvnmoTnp7vliqhzdGVwc+atpeWQju+8jOi/lOWbnuenu+WKqOWQjueahOWdkOagh++8
jCDlnablhYvkuIDnm7TlvoDkuIDkuKrmlrnlkJHnp7vliqgNCiAgaW1hZ2luZUFsbE1vdmVO
U3RlcEZvck9uZURpcmVjdGlvbihidWxsZXRzLCB0YW5rLCBzdGVwcykgew0KICAgICAgbGV0
IGJ1bGxldHNQb2ludHMgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVsbGV0
cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxldCBidWxsZXQgPSBidWxsZXRzW2ldOw0K
ICAgICAgICAgIC8vIOWtkOW8ueaYr+WcqOajgOa1i+eisOaSnuS5i+WQjuenu+WKqOeahO+8
jOaJgOS7peavlOWdpuWFi+aFouS4gOatpQ0KICAgICAgICAgIGxldCBwb2ludDsNCiAgICAg
ICAgICBpZiAoYnVsbGV0Lm5hbWUgPj0gMTAwMCkgew0KICAgICAgICAgICAgICAvLyBBSeWt
kOW8ueaYr+WcqOeisOaSnuajgOa1i+S5i+WQjuaJjeenu+WKqOeahA0KICAgICAgICAgICAg
ICBwb2ludCA9IHRoaXMuaW1hZ2luZU1vdmUoc3RlcHMgLSAxLCBidWxsZXQsIGZhbHNlKTsN
CiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBwb2ludCA9IHRoaXMuaW1hZ2lu
ZU1vdmUoc3RlcHMsIGJ1bGxldCwgZmFsc2UpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBi
dWxsZXRzUG9pbnRzLnB1c2gocG9pbnQpOw0KICAgICAgfQ0KICAgICAgbGV0IHRhbmtQb2lu
dCA9IHRoaXMuaW1hZ2luZU1vdmUoc3RlcHMsIHRhbmssIHRydWUpOw0KICAgICAgcmV0dXJu
IFt0YW5rUG9pbnQsIGJ1bGxldHNQb2ludHNdOw0KICB9DQoNCiAgLy8g5oOz5YOP5a2Q5by5
5LiO5Z2m5YWL55qE56e75Yqo5LiA5q2l5ZCO77yM6L+U5Zue56e75Yqo5ZCO55qE5Z2Q5qCH
DQogIGltYWdpbmVBbGxNb3ZlT25lU3RlcChidWxsZXRzLCB0YW5rLCBmaXJzdFN0ZXApIHsN
CiAgICAgIGxldCBidWxsZXRzUG9pbnRzID0gW107DQogICAgICBmb3IgKGxldCBpID0gMDsg
aSA8IGJ1bGxldHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBsZXQgYnVsbGV0ID0gYnVs
bGV0c1tpXTsNCiAgICAgICAgICBsZXQgcG9pbnQ7DQogICAgICAgICAgLy8gQUnlrZDlvLnm
mK/lnKjmo4DmtYvnorDmkp7kuYvlkI7np7vliqjnmoTvvIzmiYDku6Xmr5TlnablhYvmhaLk
uIDmraUNCiAgICAgICAgICAvLyDlr7nmiYvmlrnlrZDlvLnmmK/lnKjmo4DmtYvkuYvliY3n
p7vliqjnmoQNCiAgICAgICAgICBpZiAoZmlyc3RTdGVwICYmIGJ1bGxldC5uYW1lID49IDEw
MDApIHsNCiAgICAgICAgICAgICAgcG9pbnQgPSB0aGlzLmltYWdpbmVNb3ZlKDAsIGJ1bGxl
dCwgZmFsc2UpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHBvaW50ID0g
dGhpcy5pbWFnaW5lTW92ZSgxLCBidWxsZXQsIGZhbHNlKTsNCiAgICAgICAgICB9DQogICAg
ICAgICAgYnVsbGV0c1BvaW50cy5wdXNoKHBvaW50KTsNCiAgICAgIH0NCiAgICAgIGxldCB0
YW5rUG9pbnQgPSB0aGlzLmltYWdpbmVNb3ZlKDEsIHRhbmssIHRydWUpOw0KICAgICAgcmV0
dXJuIFt0YW5rUG9pbnQsIGJ1bGxldHNQb2ludHNdOw0KICB9DQoNCiAgLy8g5YGH5oOz54mp
5L2T55qE56e75Yqo77yM6L+U5Zue56e75Yqoc3RlcOatpeWQjueahOWdkOaghw0KICBpbWFn
aW5lTW92ZShzdGVwLCBtb3ZhYmxlLCBpc1RhbmspIHsNCiAgICAgIGxldCBwb2ludCA9IHt9
Ow0KICAgICAgbGV0IG1vdmVPZmZzZXQgPSBtb3ZhYmxlLnNwZWVkICogc3RlcDsNCiAgICAg
IGxldCBiWCA9IG1vdmFibGUuWDsNCiAgICAgIGxldCBiWSA9IG1vdmFibGUuWTsNCiAgICAg
IGlmIChtb3ZhYmxlLmRpcmVjdGlvbiA9PT0gdGhpcy5ESVJFQ1RJT04uTEVGVCkgew0KICAg
ICAgICAgIGJYIC09IG1vdmVPZmZzZXQ7DQogICAgICB9IGVsc2UgaWYgKG1vdmFibGUuZGly
ZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5SSUdIVCkgew0KICAgICAgICAgIGJYICs9IG1v
dmVPZmZzZXQ7DQogICAgICB9IGVsc2UgaWYgKG1vdmFibGUuZGlyZWN0aW9uID09PSB0aGlz
LkRJUkVDVElPTi5VUCkgew0KICAgICAgICAgIGJZIC09IG1vdmVPZmZzZXQ7DQogICAgICB9
IGVsc2UgaWYgKG1vdmFibGUuZGlyZWN0aW9uID09PSB0aGlzLkRJUkVDVElPTi5ET1dOKSB7
DQogICAgICAgICAgYlkgKz0gbW92ZU9mZnNldDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgLy8g5ZWl5Lmf5LiN5bmyDQogICAgICB9DQogICAgICBpZiAoaXNUYW5rKSB7DQogICAg
ICAgICAgLy8g5a+55LqO6Ieq5bex55qEdGFuayzlrp7mlr3mo4DmtYvovrnnlYwNCiAgICAg
ICAgICBpZiAoYlggPCAwKSB7DQogICAgICAgICAgICAgIGJYID0gMDsNCiAgICAgICAgICB9
DQogICAgICAgICAgaWYgKGJYID4gY2FudmFzLndpZHRoLXRhbmtXaWR0aCkgew0KICAgICAg
ICAgICAgICBiWCA9IGNhbnZhcy53aWR0aC10YW5rV2lkdGg7DQogICAgICAgICAgfQ0KICAg
ICAgICAgIGlmIChiWSA8IDApIHsNCiAgICAgICAgICAgICAgYlkgPSAwOw0KICAgICAgICAg
IH0NCiAgICAgICAgICBpZiAoYlkgPiBjYW52YXMuaGVpZ2h0LXRhbmtXaWR0aCkgew0KICAg
ICAgICAgICAgICBiWSA9IGNhbnZhcy5oZWlnaHQtdGFua1dpZHRoOw0KICAgICAgICAgIH0N
Cg0KICAgICAgICAgIC8vIOWmguaenOenu+WKqOWQjuS4jumanOeijeeJqeebuOaSnu+8jOWI
meS4jeenu+WKqA0KICAgICAgICAgIGlmICh0aGlzLmNvbGxpc2lvbk1ldGFsKGJYLCBiWSwg
dGFua1dpZHRoKSkgew0KICAgICAgICAgICAgICBiWCA9IG1vdmFibGUuWDsNCiAgICAgICAg
ICAgICAgYlkgPSBtb3ZhYmxlLlk7DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcG9p
bnQuWCA9IGJYOw0KICAgICAgcG9pbnQuWSA9IGJZOw0KICAgICAgcG9pbnQuZGlyZWN0aW9u
ID0gbW92YWJsZS5kaXJlY3Rpb247DQogICAgICBwb2ludC5zcGVlZCA9IG1vdmFibGUuc3Bl
ZWQ7DQogICAgICBpZiAobW92YWJsZS5oYXNPd25Qcm9wZXJ0eSgid2lkdGgiKSkgew0KICAg
ICAgICAgIHBvaW50LndpZHRoID0gbW92YWJsZS53aWR0aDsNCiAgICAgIH0NCiAgICAgIHJl
dHVybiBwb2ludDsNCiAgfQ0KDQogIC8vIOWcqOaOpeS4i+adpeeahOesrE7np5LmmK/lkKbk
vJrlj5HnlJ/norDmkp4NCiAgd2lsbENvbGxpZGVBdE5TdGVwc09uVGFua01vdmUobiwgbXlU
YW5rLCBidWxsZXQpIHsNCiAgICAgIGxldCBpc0NvbGxpZGUgPSB0aGlzLmNoZWNrSWZDb2xs
aWRlT25UYW5rTW92ZShuLCBteVRhbmssIGJ1bGxldCk7DQogICAgICAvLyB0aGlzLmxvZygi
d2lsbENvbGxpZGU6ICIgKyBpc0NvbGxpZGUpDQogICAgICByZXR1cm4gaXNDb2xsaWRlOw0K
ICB9DQoNCiAgLy8g5Zyo5o6l5LiL5p2l55qE56ysTuenkuaYr+WQpuS8muWPkeeUn+eisOaS
ng0KICB3aWxsQ29sbGlkZUF0TlN0ZXBzT25CdWxsZXRzTW92ZShuLCBteVRhbmssIGJ1bGxl
dCkgew0KICAgICAgbGV0IGlzQ29sbGlkZSA9IHRoaXMuY2hlY2tJZkNvbGxpZGVPbkJ1bGxl
dHNNb3ZlKG4sIG15VGFuaywgYnVsbGV0KTsNCiAgICAgIC8vIHRoaXMubG9nKCJ3aWxsQ29s
bGlkZTogIiArIGlzQ29sbGlkZSkNCiAgICAgIHJldHVybiBpc0NvbGxpZGU7DQogIH0NCg0K
ICBjaGVja0lmUmVjdENvbGxpZGUoQSwgQiwgQywgRCwgRSwgRiwgRywgSCkgew0KICAgICAg
QyArPSBBOy8v566X5Ye655+p5b2iMeWPs+S4i+inkuaoquWdkOaghzsNCiAgICAgIEQgKz0g
QjsvL+eul+WHuuefqeW9ojHlj7PkuIvop5LnurXlnZDmoIc7DQogICAgICBHICs9IEU7Ly/n
rpflh7rnn6nlvaIy5Y+z5LiL6KeS5qiq57q15qCHOw0KICAgICAgSCArPSBGOy8v566X5Ye6
55+p5b2iMuWPs+S4i+inkue6teWdkOaghzsNCiAgICAgIGlmIChDIDw9IEUgfHwgRyA8PSBB
IHx8IEQgPD0gRiB8fCBIIDw9IEIpIHsNCiAgICAgIC8v5Lik5Liq5Zu+5b2i5rKh5pyJ55u4
5LqkDQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRy
dWU7DQogIH0NCg0KICBjaGVja0lmQ29sbGlkZU9uVGFua01vdmUobiwgbXlUYW5rLCBidWxs
ZXQpIHsNCiAgICAgIGxldCB0YW5rUG9pbnQgPSB0aGlzLmltYWdpbmVNb3ZlKG4sIG15VGFu
aywgdHJ1ZSk7DQoNCiAgICAgIGxldCB0WCA9IHRhbmtQb2ludC5YOw0KICAgICAgbGV0IHRZ
ID0gdGFua1BvaW50Llk7DQoNCiAgICAgIGxldCBjb2xsaWRlID0gdGhpcy5jaGVja0lmUmVj
dENvbGxpZGUodFgsIHRZLCB0YW5rV2lkdGgsIHRhbmtXaWR0aCwgYnVsbGV0LlgtYnVsbGV0
LndpZHRoLzIsIGJ1bGxldC5ZLWJ1bGxldC53aWR0aC8yLCBidWxsZXQud2lkdGgsIGJ1bGxl
dC53aWR0aCk7DQogICAgICAvLyB0aGlzLmxvZygiY2hlY2tJZkNvbGxpZGU6ICIsICLnrKwi
ICsgbiArICLmrKHlvqrnjq8iLCAibXlUYW5rPSIgKyB0aGlzLmdldE1vdmFibGVQb3MobXlU
YW5rKSwgImJ1bGxldD0iICsgdGhpcy5nZXRNb3ZhYmxlUG9zKHBvaW50KSwgY29sbGlkZSkN
CiAgICAgIHJldHVybiBjb2xsaWRlOw0KICB9DQoNCiAgLy8g5Z2m5YWL5LiN5Yqo5pe2DQog
IGNoZWNrSWZDb2xsaWRlT25CdWxsZXRzTW92ZShuLCBteVRhbmssIGJ1bGxldCkgew0KICAg
ICAgbGV0IHBvaW50ID0gdGhpcy5pbWFnaW5lTW92ZShuLCBidWxsZXQsIGZhbHNlKTsNCg0K
ICAgICAgcG9pbnQuWCAtPSBidWxsZXQud2lkdGgvMjsNCiAgICAgIHBvaW50LlkgLT0gYnVs
bGV0LndpZHRoLzI7DQoNCiAgICAgIGxldCB0WCA9IG15VGFuay5YOw0KICAgICAgbGV0IHRZ
ID0gbXlUYW5rLlk7DQoNCiAgICAgIGxldCBjb2xsaWRlID0gdGhpcy5jaGVja0lmUmVjdENv
bGxpZGUodFgsIHRZLCB0YW5rV2lkdGgsIHRhbmtXaWR0aCwgcG9pbnQuWCwgcG9pbnQuWSwg
YnVsbGV0LndpZHRoLCBidWxsZXQud2lkdGgpOw0KICAgICAgLy8gdGhpcy5sb2coImNoZWNr
SWZDb2xsaWRlOiAiLCAi56ysIiArIG4gKyAi5qyh5b6q546vIiwgIm15VGFuaz0iICsgdGhp
cy5nZXRNb3ZhYmxlUG9zKG15VGFuayksICJidWxsZXQ9IiArIHRoaXMuZ2V0TW92YWJsZVBv
cyhwb2ludCksIGNvbGxpZGUpDQogICAgICByZXR1cm4gY29sbGlkZTsNCiAgfQ0KDQogIHNv
cnRQYXRocyhwYXRoMSwgcGF0aDIpIHsNCiAgICAgIGxldCBtb3ZlbWVudHMyID0gcGF0aDIu
bW92ZW1lbnRzOw0KICAgICAgbGV0IG1vdmVtZW50czEgPSBwYXRoMS5tb3ZlbWVudHM7DQog
ICAgICBpZiAobW92ZW1lbnRzMi5sZW5ndGggPT09IG1vdmVtZW50czEubGVuZ3RoKSB7DQog
ICAgICAgICAgZm9yKGxldCBpPW1vdmVtZW50czIubGVuZ3RoLTE7IGk+PTA7IGktLSkgew0K
ICAgICAgICAgICAgICBpZiAobW92ZW1lbnRzMltpXS5zY29yZSAhPT0gbW92ZW1lbnRzMVtp
XS5zY29yZSkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vdmVtZW50czJbaV0uc2Nv
cmUgLSBtb3ZlbWVudHMxW2ldLnNjb3JlOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgLy8g55u4562J55qE6K+d57un57ut5LiL5LiA5qyh5b6q546vDQog
ICAgICAgICAgICAgICAgICBpZiAoaT09PTApIHsNCiAgICAgICAgICAgICAgICAgICAgICBy
ZXR1cm4gMDsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAg
ICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIG1vdmVtZW50czIubGVu
Z3RoIC0gbW92ZW1lbnRzMS5sZW5ndGg7DQogICAgICB9DQoNCiAgfQ0KDQogIFBhdGgoKSB7
DQogICAgICBsZXQgcGF0aCA9IHt9Ow0KICAgICAgcGF0aC5tb3ZlbWVudHMgPSBbXTsNCiAg
ICAgIHJldHVybiBwYXRoOw0KICB9DQoNCiAgTW92ZW1lbnQoZGlyZWN0aW9uLCBzY29yZSkg
ew0KICAgICAgbGV0IG1vdmVtZW50ID0ge307DQogICAgICBtb3ZlbWVudC5kaXJlY3Rpb24g
PSBkaXJlY3Rpb247DQogICAgICBtb3ZlbWVudC5zY29yZSA9IHNjb3JlOw0KICAgICAgcmV0
dXJuIG1vdmVtZW50Ow0KICB9DQoNCiAgZ2V0TW92YWJsZVBvcyhtb3ZhYmxlKSB7DQogICAg
ICByZXR1cm4gIigiICsgbW92YWJsZS5YICsgIiwiICsgbW92YWJsZS5ZICsgIikiOw0KICB9
DQoNCiAgcHJpbnRNb3ZhYmxlUG9zKHByZWZpeCwgbW92YWJsZSkgew0KICAgICAgbGV0IHBv
c2l0aW9uID0gcHJlZml4Ow0KICAgICAgcG9zaXRpb24gKz0gdGhpcy5nZXRNb3ZhYmxlUG9z
KG1vdmFibGUpOw0KICAgICAgdGhpcy5sb2coInRhbmtQb3NpdGlvbiIsIHBvc2l0aW9uKTsN
CiAgfQ0KDQogIHByaW50QnVsbGV0c1BvcyhwcmVmaXgsIGJ1bGxldHMpIHsNCiAgICAgIGxl
dCBhbGxQb2lzdGlvbiA9IHByZWZpeDsNCiAgICAgIGJ1bGxldHMuZm9yRWFjaChidWxsZXQg
PT4gew0KICAgICAgICAgIGFsbFBvaXN0aW9uICs9IHRoaXMuZ2V0TW92YWJsZVBvcyhidWxs
ZXQpICsgIiAiOw0KICAgICAgfSk7DQogICAgICB0aGlzLmxvZygiYWxsQnVsbGV0UG9zaXRp
b246IiArIGFsbFBvaXN0aW9uKTsNCiAgfQ0KDQogIGNvdW50RW5lbXkoKSB7DQogICAgICBs
ZXQgd2lkdGg7DQogICAgICBpZiAodGhpcy5pc0NvdW50ZXJTdHJpa2UoKSkgew0KICAgICAg
ICAgIHdpZHRoID0gY2FudmFzLndpZHRoLzg7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAg
IHdpZHRoID0gY2FudmFzLndpZHRoLzQ7DQogICAgICB9DQogICAgICBsZXQgY291bnQgPSAw
Ow0KICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLmFsbEVuZW15VGFuay5sZW5ndGg7IGkrKykg
ew0KICAgICAgICAgIGxldCBlbmVteSA9IHRoaXMuYWxsRW5lbXlUYW5rW2ldOw0KICAgICAg
ICAgIGlmIChNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlkgLSBlbmVteS5ZKSA8IGNhbnZhcy5o
ZWlnaHQvMiAmJiBNYXRoLmFicyh0aGlzLnN2TXlUYW5rLlggLSBlbmVteS5YKSA8IHdpZHRo
KSB7DQogICAgICAgICAgICAgIGNvdW50ICsrOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAg
ICAgIHJldHVybiBjb3VudDsNCiAgfQ0KDQogIHRyYWNlQW5kRmlyZVYyKCkgew0KICAgICAg
bGV0IGZpbmFsRGlyZWN0aW9uOw0KICAgICAgdGhpcy50YXJnZXRUYW5rSW5mbyA9IHRoaXMu
ZmluZE5lYXJlc3RUYW5rKCk7DQogICAgICBsZXQgZHggPSB0aGlzLnRhcmdldFRhbmtJbmZv
WzBdOw0KICAgICAgbGV0IGR5ID0gdGhpcy50YXJnZXRUYW5rSW5mb1sxXTsNCiAgICAgIGxl
dCB0YXJnZXRUYW5rID0gdGhpcy50YXJnZXRUYW5rSW5mb1syXTsNCiAgICAgIGxldCBzaG91
bGRGaXJlID0gZmFsc2U7DQogICAgICBpZiAodGhpcy5ERUJVRykgew0KICAgICAgICAgIC8v
IHRhcmdldFRhbmsuaW1nID0gbXlUYW5rSW1nMA0KICAgICAgfQ0KDQogICAgICBpZiAodGFy
Z2V0VGFuayA9PT0gdGhpcy5lbmVteVRhbmspIHsNCiAgICAgICAgICB0aGlzLkRBTkdFUl9E
SVNUQU5DRSA9IDMgKiB0aGlzLlRBTktfV0lEVEg7DQogICAgICAgICAgdGhpcy5CRVNUX0ZJ
UkVfRElTVEFOQ0UgPSA0ICogdGhpcy5UQU5LX1dJRFRIOw0KICAgICAgICAgIHRoaXMuTUlO
X0ZJUkVfSU5URVJWQUwgPSAyMDAgLSAoNS10aGlzLm15QnVsbGV0cy5sZW5ndGgpICogNDA7
DQogICAgICAgICAgaWYgKHRoaXMuTUlOX0ZJUkVfSU5URVJWQUwgPj0gMTE5KSB7DQogICAg
ICAgICAgICAgIHRoaXMuTUlOX0ZJUkVfSU5URVJWQUwgPSAxMTk7DQogICAgICAgICAgfQ0K
ICAgICAgICAgIGlmICh0aGlzLmluQ2F1dGlvbkFyZWEoZHgsIGR5KSkgew0KICAgICAgICAg
ICAgICAvLyDlhbPplK7ml7bliLvvvIzkuI3og73lkJ3mg5zlrZDlvLkNCiAgICAgICAgICAg
ICAgdGhpcy5NSU5fRklSRV9JTlRFUlZBTCA9IDA7DQogICAgICAgICAgfQ0KICAgICAgICAg
IHRoaXMuTUlOX0ZJUkVfT0ZGU0VUID0gKHRoaXMuVEFOS19XSURUSCArIHRoaXMuQlVMTEVU
X1dJRFRIKS8yOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyDmo4DmtYvmiJHmlrnl
nablhYvlkajlm7TmlYzmlrnlnablhYvnmoTmlbDph4/vvIzmoLnmja7mlbDph4/lpJrlsJHl
iLblrprljbHpmanot53nprsNCiAgICAgICAgICB0aGlzLkRBTkdFUl9ESVNUQU5DRSA9IDIu
MyAqIHRoaXMuVEFOS19XSURUSDsNCiAgICAgICAgICB0aGlzLkJFU1RfRklSRV9ESVNUQU5D
RSA9IDMuMSAqIHRoaXMuVEFOS19XSURUSDsNCiAgICAgICAgICBsZXQgZW5lbXlBcm91bmRD
b3VudCA9IHRoaXMuY291bnRFbmVteSgpOw0KICAgICAgICAgIGxldCBzdGVwID0gdGhpcy5U
QU5LX1dJRFRILzEwICogKE1hdGguZmxvb3IoZW5lbXlBcm91bmRDb3VudC8yKS0odGhpcy5h
bGxBSVRhbmtDb3VudC84KSk7DQogICAgICAgICAgdGhpcy5EQU5HRVJfRElTVEFOQ0UgKz0g
c3RlcDsNCiAgICAgICAgICB0aGlzLkJFU1RfRklSRV9ESVNUQU5DRSArPSBzdGVwOw0KICAg
ICAgICAgIHRoaXMuTUlOX0ZJUkVfSU5URVJWQUwgPSAyMDAgLSBlbmVteUFyb3VuZENvdW50
ICogMjA7DQogICAgICAgICAgLy8g5pWM5Lq65aSa5pe25aKe5aSn5bCE5Ye75Yy65Z+fDQog
ICAgICAgICAgdGhpcy5NSU5fRklSRV9PRkZTRVQgPSAodGhpcy5UQU5LX1dJRFRIICsgdGhp
cy5CVUxMRVRfV0lEVEgpLzIgOw0KICAgICAgICAgIC8vKyAoTWF0aC5mbG9vcihlbmVteUFy
b3VuZENvdW50LzIpIC0gMSkNCiAgICAgIH0NCiAgICAgIHRoaXMuVU5TQUZFX0FQUFJPQUNI
X0RJU1RBTkNFID0gdGhpcy5EQU5HRVJfRElTVEFOQ0UgKyB0aGlzLlRBTktfV0lEVEgvMjsN
CiAgICAgIHRoaXMuRklSRV9NQVhfRElTVEFOQ0UgPSB0aGlzLkRBTkdFUl9ESVNUQU5DRSAr
IDIgKiB0aGlzLlRBTktfV0lEVEg7DQoNCg0KICAgICAgaWYgKHRoaXMubXlCdWxsZXRzLmxl
bmd0aCA9PT0gNSAmJiB0YXJnZXRUYW5rID09PSB0aGlzLmVuZW15VGFuaykgew0KICAgICAg
ICAgIC8vIOayoeacieWtkOW8ueS6hu+8jOmAg+i3kQ0KICAgICAgICAgIC8vIOe7lemanOei
jeeJqemAg+emu++8jCDml6DlkIjpgILpmpznoo3nianml7bkuZ/miafooYzlh7vmnYDnrZbn
laUNCiAgICAgICAgICBsZXQgYmVzdE1ldGFsID0gdGhpcy5maW5kQmVzdE1ldGFsMkVzY2Fw
ZSgpOw0KICAgICAgICAgIGlmIChiZXN0TWV0YWwgIT09IHVuZGVmaW5lZCkgew0KICAgICAg
ICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuZXNjYXBlNEVuZW15KGJlc3RNZXRhbCk7
DQogICAgICAgICAgICAgIC8vIOS4k+azqOS6jumAg+i3ke+8jOS4jeeuoeWFtuS7lu+8jCDl
poLmnpzml6Dms5XpgIPot5Hlho3miafooYzlhbbku5bnrZbnlaUNCiAgICAgICAgICAgICAg
cmV0dXJuIFtmaW5hbERpcmVjdGlvbiwgdGFyZ2V0VGFuaywgZmFsc2VdOw0KICAgICAgICAg
IH0NCiAgICAgIH0NCg0KDQogICAgICAvLyDliKTmlq3miJHmlrnkuI7mlYzmlrnmtojnga3l
nablhYvmlbDph4/vvIzlpoLmnpzmiJHmlrnmm7TlpJrvvIzliJnmiafooYzpgIPnprvnrZbn
laXvvIznu5Xpmpznoo3nianpgIPnprsNCiAgICAgIC8vIOWmguaenOWvueaJi+abtOWkmu+8
jOWImeaJp+ihjOWHu+adgOetlueVpQ0KICAgICAgaWYgKHRoaXMubXlDb2xsaWRlTnVtID4g
MTApIHsNCiAgICAgICAgICAvLyDnu5Xpmpznoo3nianpgIPnprvvvIwg5peg5ZCI6YCC6Zqc
56KN54mp5pe25Lmf5omn6KGM5Ye75p2A562W55WlDQogICAgICAgICAgbGV0IGJlc3RNZXRh
bCA9IHRoaXMuZmluZEJlc3RNZXRhbDJFc2NhcGUoKTsNCiAgICAgICAgICBsZXQgZGlzdGFu
Y2UgPSB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlV2l0aE1ldGFsKHRoaXMuc3ZNeVRhbmssIHRh
cmdldFRhbmssIGJlc3RNZXRhbCk7DQogICAgICAgICAgDQogICAgICAgICAgLy8g5pyJ5Y+v
57uV6Zqc56KN5bm25LiU5pyJ6Laz5aSf55qE6YCD6LeR6Led56a7DQogICAgICAgICAgaWYg
KGJlc3RNZXRhbCAhPT0gdW5kZWZpbmVkICYmIGRpc3RhbmNlID4gMi41ICogdGhpcy5UQU5L
X1dJRFRIKSB7DQogICAgICAgICAgICAgIC8vIOWmguaenOWvueaJi+aWueWdpuWFi+W3suat
u++8jOWImeS4jeaJp+ihjOmAg+i3keetlueVpQ0KICAgICAgICAgICAgICBpZiAodGhpcy5l
bmVteVRhbmsgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgZmluYWxEaXJl
Y3Rpb24gPSB0aGlzLmVzY2FwZTRFbmVteShiZXN0TWV0YWwpOw0KICAgICAgICAgICAgICAg
ICAgLy8g5LiT5rOo5LqO6YCD6LeR77yM5LiN566h5YW25LuW77yMIOWmguaenOaXoOazlemA
g+i3keWGjeaJp+ihjOWFtuS7luetlueVpQ0KICAgICAgICAgICAgICAgICAgcmV0dXJuIFtm
aW5hbERpcmVjdGlvbiwgdGFyZ2V0VGFuaywgc2hvdWxkRmlyZV07DQogICAgICAgICAgICAg
IH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyDogIPomZHmib7kuI3l
iLDnmoTmg4XlhrU6IOWHu+adgA0KICAgICAgICAgICAgICBpZiAodGFyZ2V0VGFuayA9PT0g
dGhpcy5lbmVteVRhbmspIHsNCiAgICAgICAgICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMu
YXBwcm9hY2hBbmRGaXJlKGR4LCBkeSk7DQogICAgICAgICAgICAgICAgICBmaW5hbERpcmVj
dGlvbiA9IGFycmF5WzBdOw0KICAgICAgICAgICAgICAgICAgc2hvdWxkRmlyZSA9IGFycmF5
WzFdOw0KICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmaW5hbERpcmVjdGlvbiwgdGFyZ2V0
VGFuaywgc2hvdWxkRmlyZV07DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAg
ICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOWHu+adgA0KICAgICAgICAgIGlmICh0YXJnZXRU
YW5rID09PSB0aGlzLmVuZW15VGFuaykgew0KICAgICAgICAgICAgICBsZXQgYXJyYXkgPSB0
aGlzLmFwcHJvYWNoQW5kRmlyZShkeCwgZHkpOw0KICAgICAgICAgICAgICBmaW5hbERpcmVj
dGlvbiA9IGFycmF5WzBdOw0KICAgICAgICAgICAgICBzaG91bGRGaXJlID0gYXJyYXlbMV07
DQogICAgICAgICAgICAgIHJldHVybiBbZmluYWxEaXJlY3Rpb24sIHRhcmdldFRhbmssIHNo
b3VsZEZpcmVdOw0KICAgICAgICAgIH0NCiAgICAgIH0NCg0KDQogICAgICBpZiAodGhpcy5p
bkRhbmdlckFyZWEodGhpcy5zdk15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAv
LyDov5znprvvvIjmoLnmja7mmK/lkKbpnaDov5HovrnnlYzvvIkNCiAgICAgICAgICBmaW5h
bERpcmVjdGlvbiA9IHRoaXMuZXNjYXBlNEFJKGR4LCBkeSk7DQogICAgICB9IGVsc2UgaWYg
KHRoaXMuaW5GaXJlQXJlYSh0aGlzLnN2TXlUYW5rLCB0YXJnZXRUYW5rKSkgew0KICAgICAg
ICAgIC8vIOaUu+WHu+WMuuWfn++8jOWBnOatouW5tuaUu+WHuyDopoHogIPomZHmlrnlkJEN
CiAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuc3RvcEFuZEZpcmUoZHgsIGR5KTsN
CiAgICAgICAgICB0aGlzLmxvZygic3RvcCBhbmQgZmlyZSIpOw0KICAgICAgfSBlbHNlICBp
ZiAodGhpcy5pblVuU2FmZUFwcHJvYWNoQXJlYSh0aGlzLnN2TXlUYW5rLCB0YXJnZXRUYW5r
KSAmJiB0YXJnZXRUYW5rICE9PSB0aGlzLmVuZW15VGFuaykgew0KICAgICAgICAgIC8vIOi/
nOemu+WGjeaOpei/kQ0KICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5lc2NhcGVG
b3JBcHByb2FjaChkeCwgZHkpOw0KICAgICAgfSBlbHNlIGlmICh0aGlzLmluRmFyRmlyZUFy
ZWEodGhpcy5zdk15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAvLyDlh4bmlLvl
h7vljLrln5/vvIzliY3ov5vlubbmlLvlh7sNCiAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9
IHRoaXMuZ29BbmRGaXJlKGR4LCBkeSk7DQogICAgICAgICAgdGhpcy5sb2coImdvIGFuZCBm
aXJlIik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOaJvuWIsOacgOS9s+aUu+WH
u+WMuuWfn++8jOWQkemCo+S4quaWueWQkeenu+WKqA0KICAgICAgICAgIGZpbmFsRGlyZWN0
aW9uID0gdGhpcy5maW5kQmVzdEZpcmVBcmVhKHRhcmdldFRhbmspOw0KICAgICAgfQ0KDQog
ICAgICByZXR1cm4gW2ZpbmFsRGlyZWN0aW9uLCB0YXJnZXRUYW5rLCBzaG91bGRGaXJlXTsN
CiAgfQ0KDQogIGFwcHJvYWNoQW5kRmlyZShkeCwgZHkpIHsNCiAgICAgIHRoaXMubG9nKCJk
eCwgZHkiLCBkeCwgZHkpOw0KICAgICAgaWYgKHRoaXMuaW5TdXBlckF0dGFja0FyZWEoZHgs
IGR5KSkgew0KICAgICAgICAgIC8vIOi/m+WFpei2hee6p+aUu+WHu+aooeW8jw0KICAgICAg
ICAgIHRoaXMuaW5TdXBlckF0dGFja01vZGUgPSB0cnVlOw0KICAgICAgfSANCiAgICAgIGlm
ICh0aGlzLmluU3VwZXJBdHRhY2tNb2RlKSB7DQogICAgICAgICAgdGhpcy5sb2coImluIHN1
cGVyIGFyZWEiKTsNCiAgICAgICAgICByZXR1cm4gdGhpcy5zdXBlckF0dGFjayhkeCwgZHkp
Ow0KICAgICAgfSBpZiAoTWF0aC5hYnMoZHgpIDwgdGhpcy5taW5BdHRhY2tEaXN0YW5jZSAm
JiBNYXRoLmFicyhkeSkgPCB0aGlzLm1pbkF0dGFja0Rpc3RhbmNlKSB7DQogICAgICAgICAg
dGhpcy5sb2coImluIHN0b3AgYW5kIHdhaXQgYXJlYSIpOw0KICAgICAgICAgIHJldHVybiBb
dGhpcy5ESVJFQ1RJT04uU1RPUCwgZmFsc2VdOw0KICAgICAgfSBlbHNlIGlmICh0aGlzLmlu
TGltaXRTYWZlQXJlYShkeCwgZHkpKSB7DQogICAgICAgICAgdGhpcy5sb2coImluIExpbWl0
U2FmZUFyZWEgYXJlYSIpOw0KICAgICAgICAgIHJldHVybiB0aGlzLnZlcnlDYXV0aW9uQXR0
YWNrKGR4LCBkeSk7DQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5BZnRlclN0ZXBPbmVBcmVh
KGR4LCBkeSkpIHsNCiAgICAgICAgICB0aGlzLmxvZygiaW4gYWZ0ZXJTdGVwT25lIGFyZWEi
KTsNCiAgICAgICAgICByZXR1cm4gdGhpcy5hZnRlclN0ZXBPbmUoZHgsIGR5KTsNCiAgICAg
IH0gZWxzZSBpZiAodGhpcy5pbkF0dGFja0FyZWEoZHgsIGR5KSB8fCB0aGlzLmluQ2F1dGlv
bkFyZWEoZHgsIGR5KSkgew0KICAgICAgLy8gfSBlbHNlIGlmICh0aGlzLmluQXR0YWNrQXJl
YShkeCwgZHkpKSB7DQogICAgICAgICAgdGhpcy5sb2coImluIGF0dGFjay9jYXV0aW9uL3Nh
ZmUgYXJlYSIpOw0KICAgICAgICAgIHJldHVybiBbdGhpcy5hdHRhY2soZHgsIGR5KSwgZmFs
c2VdOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmxvZygiaW4gZmluZCBwYXRo
IGFyZWEiKTsNCiAgICAgICAgICB0aGlzLkRBTkdFUl9ESVNUQU5DRSA9IDA7DQogICAgICAg
ICAgdGhpcy5CRVNUX0ZJUkVfRElTVEFOQ0UgPSB0aGlzLlRBTktfV0lEVEg7DQogICAgICAg
ICAgcmV0dXJuIFt0aGlzLmZpbmRCZXN0RmlyZUFyZWEodGhpcy50YXJnZXRUYW5rSW5mb1sy
XSksIGZhbHNlXTsNCiAgICAgIH0NCiAgfQ0KDQogIGZpbmRCZXN0RmlyZUFyZWEodGFyZ2V0
VGFuaykgew0KICAgICAgbGV0IHRhcmdldFRhbmtDZW50ZXIgPSB7WDp0YXJnZXRUYW5rLlgs
IFk6dGFyZ2V0VGFuay5ZfTsNCiAgICAgIGxldCBwb2ludDEgPSB7WDp0YXJnZXRUYW5rQ2Vu
dGVyLlggLSB0aGlzLkJFU1RfRklSRV9ESVNUQU5DRSwgWTp0YXJnZXRUYW5rQ2VudGVyLll9
Ow0KICAgICAgbGV0IHBvaW50MiA9IHtYOnRhcmdldFRhbmtDZW50ZXIuWCwgWTp0YXJnZXRU
YW5rQ2VudGVyLlkgLSB0aGlzLkJFU1RfRklSRV9ESVNUQU5DRX07DQogICAgICBsZXQgcG9p
bnQzID0ge1g6dGFyZ2V0VGFua0NlbnRlci5YICsgdGhpcy5CRVNUX0ZJUkVfRElTVEFOQ0Us
IFk6dGFyZ2V0VGFua0NlbnRlci5ZfTsNCiAgICAgIGxldCBwb2ludDQgPSB7WDp0YXJnZXRU
YW5rQ2VudGVyLlgsIFk6dGFyZ2V0VGFua0NlbnRlci5ZICsgdGhpcy5CRVNUX0ZJUkVfRElT
VEFOQ0V9Ow0KICAgICAgbGV0IHBvaW50cyA9IFtwb2ludDEsIHBvaW50MiwgcG9pbnQzLCBw
b2ludDRdOw0KICAgICAgbGV0IGhpZ2hlc3RTY29yZSA9IC10aGlzLk1BWF9ESVNUQU5DRTsN
CiAgICAgIGxldCBuZWFyZXN0UG9pbnQ7DQogICAgICAvLyDlr7vmib7lh7rmnIDkvJjnmoTn
grnvvIzlubbkuI3kuIDlrprmmK/mnIDov5HnmoTvvIzlpoLmnpzmnInlpJrkuKrngrnlj6/n
lKjvvIzliJnkvb/nlKjmm7TpnaDov5HkuK3pl7TnmoTngrkNCg0KICAgICAgZm9yKGxldCBp
PTA7aTxwb2ludHMubGVuZ3RoO2krKykgew0KICAgICAgICAgIC8vIOaJvuWHujTkuKrngrnk
uK3kuI3ooqvpga7mjKHkuJTot53nprvmnIDov5HnmoTngrkNCiAgICAgICAgICBsZXQgcG9p
bnQgPSBwb2ludHNbaV07DQogICAgICAgICAgaWYgKHBvaW50LlggPCAwIHx8IHBvaW50Llkg
PCAwIHx8IHBvaW50LlggPiBjYW52YXMud2lkdGgtdGFua1dpZHRoIHx8IHBvaW50LlkgPiBj
YW52YXMuaGVpZ2h0LXRhbmtXaWR0aCkgew0KICAgICAgICAgICAgICAvLyDmraTngrnlnKjl
sY/luZXlpJbvvIzkuI3opoENCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAg
fQ0KICAgICAgICAgIGlmICh0aGlzLmNvbGxpc2lvbk1ldGFsKHBvaW50LlgsIHBvaW50Llks
IHRhbmtXaWR0aCkpIHsNCiAgICAgICAgICAgICAgLy8g5omA5Zyo5L2N572u5LiO6Zqc56KN
54mp56Kw5pKe77yM5LiN6KaBDQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAg
IH0NCg0KICAgICAgICAgIGxldCBpbWFnaW5lVGFuayA9IHtYOnBvaW50LlggLFk6cG9pbnQu
WX07DQoNCiAgICAgICAgICBsZXQgYmxvY2sgPSB0aGlzLmlzQmxvY2tCeU1ldGFsKGltYWdp
bmVUYW5rLCB0YXJnZXRUYW5rKTsNCiAgICAgICAgICAvLyDmlLvlh7vngrnkuI7nm67moIfl
nablhYvkuYvpl7TmnInpmpznoo3nianvvIwg5LiN6KaBDQogICAgICAgICAgaWYgKGJsb2Nr
KSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgIH0NCg0KICAgICAgICAg
IC8vIOagueaNruebruagh+eCueWkhOWtkOW8ueeahOWkmuWwkeWPiuebruagh+eCueeahOi/
nOi/keS7peWPiui3neemu+i+uee8mOi/nOi/keiuoeeul+e7vOWQiOW+l+WIhu+8jOmAieWH
uuW+l+WIhumrmOeahOeCuQ0KICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuZ2V0UG9zaXRp
b25TY29yZU9mRmlyZUFyZWEocG9pbnQpOw0KDQogICAgICAgICAgLy8gY29uc29sZS5sb2co
InBvc2l0aW9uIGFuZCBzY29yZTogIiwgcG9pbnQuWCwgcG9pbnQuWSwgc2NvcmUpDQoNCiAg
ICAgICAgICBpZiAoc2NvcmUgPiBoaWdoZXN0U2NvcmUpIHsNCiAgICAgICAgICAgICAgaGln
aGVzdFNjb3JlID0gc2NvcmU7DQogICAgICAgICAgICAgIG5lYXJlc3RQb2ludCA9IHBvaW50
Ow0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8vIOWQkW5lYXJlc3RQb2ludOenu+WK
qA0KICAgICAgcmV0dXJuIHRoaXMubW92ZTJQb2ludChuZWFyZXN0UG9pbnQpOw0KICB9DQoN
CiAgZ2V0UG9zaXRpb25TY29yZU9mRmlyZUFyZWEocG9pbnQpIHsNCiAgICAgIC8vIOagueaN
ruebruagh+eCueWkhOWtkOW8ueeahOWkmuWwkeWPiuebruagh+eCueeahOi/nOi/keS7peWP
iui3neemu+i+uee8mOi/nOi/keiuoeeul+e7vOWQiOW+l+WIhu+8jOmAieWHuuW+l+WIhumr
mOeahOeCuQ0KICAgICAgLy8g5om+5Ye66Led56a75bGP5bmV5Lit5b+D54K55ZKM6Led56a7
5Z2m5YWL5L2N572u5bmz5Z2H5YC85pyA6L+R55qE54K5DQogICAgICBsZXQgbmVhcmVzdE1l
dGFsID0gdGhpcy5maW5kTmVhcmVzdE1ldGFsKHRoaXMuc3ZNeVRhbmssIHBvaW50KTsNCiAg
ICAgIGxldCBkaXN0YW5jZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2VXaXRoTWV0YWwodGhp
cy5zdk15VGFuaywgcG9pbnQsIG5lYXJlc3RNZXRhbCk7DQoNCiAgICAgIGxldCBtaW5EaXN0
YW5jZU9mQm91bmRMUiA9IE1hdGgubWluKHBvaW50LlgsIGNhbnZhcy53aWR0aCAtIHBvaW50
LlgpOw0KICAgICAgbGV0IG1pbkRpc3RhbmNlT2ZCb3VuZFRCID0gTWF0aC5taW4ocG9pbnQu
WSwgY2FudmFzLmhlaWdodCAtIHBvaW50LlkpOw0KDQogICAgICBsZXQgYnVsbGV0c0NvdW50
ID0gdGhpcy5jYWxjdWxhdGVCdWxsZXRDb3VudEFyb3VuZFBvaW50KHBvaW50KTsNCiAgICAg
IC8vIGxldCBidWxsZXRzQ291bnQgPSAwDQoNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJzY29y
ZXM6ICIsIC1kaXN0YW5jZSwgLWJ1bGxldHNDb3VudCwgbWluRGlzdGFuY2VPZkJvdW5kTFIs
IG1pbkRpc3RhbmNlT2ZCb3VuZFRCKQ0KDQogICAgICBpZiAodGhpcy50YXJnZXRUYW5rSW5m
b1syXSA9PT0gdGhpcy5lbmVteVRhbmspIHsNCiAgICAgICAgICByZXR1cm4gKC1kaXN0YW5j
ZS8yIC0gdGhpcy5nZXREaXN0YW5jZU9mUG9pbnRzKHtYOmNhbnZhcy53aWR0aC8yLCBZOmNh
bnZhcy5oZWlnaHQvMn0sIHBvaW50KSkvMjsNCiAgICAgIH0NCg0KICAgICAgbGV0IGZhY3Rv
cnMgPSB0aGlzLmdldEZhY3Rvck9mQm91bmQoKTsNCiAgICAgIGxldCBzY29yZSA9IC1kaXN0
YW5jZSAtIGJ1bGxldHNDb3VudCAqIDEwICsgbWluRGlzdGFuY2VPZkJvdW5kTFIgKiBmYWN0
b3JzWzBdICsgbWluRGlzdGFuY2VPZkJvdW5kVEIgKiBmYWN0b3JzWzFdOw0KDQogICAgICBy
ZXR1cm4gc2NvcmU7DQogIH0NCg0KICBnZXRGYWN0b3JPZkJvdW5kKCkgew0KICAgICAgZm9y
KGxldCBpPTA7aTx0aGlzLmFsbEVuZW15VGFuay5sZW5ndGg7aSsrKSB7DQogICAgICAgICAg
bGV0IHRhbmsgPSB0aGlzLmFsbEVuZW15VGFua1tpXTsNCiAgICAgICAgICAvLyBQbGF5ZXJB
L1BsYXllckINCiAgICAgICAgICBpZiAodGFuay5YID4gY2FudmFzLndpZHRoLzIpIHsNCiAg
ICAgICAgICAgICAgcmV0dXJuIFswLjc1LCAxXTsNCiAgICAgICAgICB9DQogICAgICB9DQog
ICAgICByZXR1cm4gWzEsIDAuNzVdOw0KICB9DQoNCiAgY2FsY3VsYXRlQnVsbGV0Q291bnRB
cm91bmRQb2ludChwb2ludCkgew0KICAgICAgbGV0IGJ1bGxldHNDb3VudCA9IDA7DQogICAg
ICBmb3IobGV0IGk9MDtpPHRoaXMuYWxsRW5lbXlCdWxsZXRzLmxlbmd0aDsgaSsrKSB7DQog
ICAgICAgICAgbGV0IGJ1bGxldCA9IHRoaXMuYWxsRW5lbXlCdWxsZXRzW2ldOw0KICAgICAg
ICAgIGlmIChidWxsZXQuc3BlZWQgPT09IDApIHsNCiAgICAgICAgICAgICAgLy8g5o6S6Zmk
6Zqc56KN54mpDQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgIH0NCiAgICAg
ICAgICBsZXQgZGlzdGFuY2UgPSB0aGlzLmdldERpc3RhbmNlT2ZQb2ludHMocG9pbnQsIGJ1
bGxldCk7DQogICAgICAgICAgaWYgKGRpc3RhbmNlIDwgMiAqIHRoaXMuVEFOS19XSURUSCkg
ew0KICAgICAgICAgICAgICBidWxsZXRzQ291bnQgKys7DQogICAgICAgICAgfQ0KICAgICAg
fQ0KICAgICAgcmV0dXJuIGJ1bGxldHNDb3VudDsNCiAgfQ0KDQogIGZpbmROZWFyZXN0TWV0
YWwocG9pbnQxLCBwb2ludDIpIHsNCiAgICAgIGxldCBuZWFyZXN0TWV0YWw7DQogICAgICBs
ZXQgbmVhcmVzdE1ldGFsRGlzdGFuY2UgPSB0aGlzLk1BWF9ESVNUQU5DRTsNCiAgICAgIGZv
cihsZXQgaj0wO2o8YW1ldGFsLmxlbmd0aDtqKyspIHsNCiAgICAgICAgICBsZXQgbWV0YWwg
PSBhbWV0YWxbal07DQogICAgICAgICAgbGV0IG1ldGFsQ2VudGVyID0ge1g6bWV0YWxbMF0r
dGhpcy5NRVRBTF9XSURUSC8yLCBZOm1ldGFsWzFdK3RoaXMuTUVUQUxfV0lEVEgvMn07DQog
ICAgICAgICAgbGV0IHRlbXBEaXN0YW5jZSA9ICh0aGlzLmdldERpc3RhbmNlT2ZQb2ludHMo
bWV0YWxDZW50ZXIsIHBvaW50MSkgKyB0aGlzLmdldERpc3RhbmNlT2ZQb2ludHMobWV0YWxD
ZW50ZXIsIHBvaW50MikpLzI7DQogICAgICAgICAgaWYgKHRlbXBEaXN0YW5jZSA8IG5lYXJl
c3RNZXRhbERpc3RhbmNlKSB7DQogICAgICAgICAgICAgIG5lYXJlc3RNZXRhbERpc3RhbmNl
ID0gdGVtcERpc3RhbmNlOw0KICAgICAgICAgICAgICBuZWFyZXN0TWV0YWwgPSBtZXRhbDsN
CiAgICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gbmVhcmVzdE1ldGFsOw0KICB9
DQoNCiAgbW92ZTJQb2ludCh0YXJnZXRQb2ludCkgew0KICAgICAgbGV0IG5lYXJlc3RNZXRh
bCA9IHRoaXMuZmluZE5lYXJlc3RNZXRhbCh0aGlzLnN2TXlUYW5rLCB0YXJnZXRQb2ludCk7
DQogICAgICBsZXQgZGlzdGFuY2UgPSB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlV2l0aE1ldGFs
KHRoaXMuc3ZNeVRhbmssIHRhcmdldFBvaW50LCBuZWFyZXN0TWV0YWwpOw0KDQogICAgICBs
ZXQgcmVjb21tZW5kRGlyZWN0aW9uOw0KICAgICAgbGV0IGR4ID0gdGhpcy5zdk15VGFuay5Y
IC0gdGFyZ2V0UG9pbnQuWDsNCiAgICAgIGxldCBkeSA9IHRoaXMuc3ZNeVRhbmsuWSAtIHRh
cmdldFBvaW50Llk7DQoNCiAgICAgIGxldCB0YXJnZXRUYW5rID0gdGhpcy50YXJnZXRUYW5r
SW5mb1syXTsNCg0KICAgICAgaWYgKHRhcmdldFRhbmsgPT09IHRoaXMuZW5lbXlUYW5rKSB7
DQogICAgICAgICAgLy8g5aaC5p6c5piv5a+55omL5pa577yM5YiZ5L2/55SoWuWtl+W9ouaO
pei/ke+8jOWQpuWIme+8jOS8mOWFiOWQkeacgOWuueaYk+aJk+WHu+eahOaWueWQkei1sA0K
ICAgICAgICAgIGlmIChNYXRoLmFicyhkeCkgPiBNYXRoLmFicyhkeSkpIHsNCiAgICAgICAg
ICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0
aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVA0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uUklH
SFQNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
IGlmIChkeSA+IDApIHsNCiAgICAgICAgICAgICAgICAgIHJlY29tbWVuZERpcmVjdGlvbiA9
IHRoaXMuRElSRUNUSU9OLlVQDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAg
ICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5ET1dODQogICAg
ICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICB9ICBlbHNlIHsNCiAgICAgICAgICBp
ZiAoTWF0aC5hYnMoZHgpID4gY2FudmFzLndpZHRoLzQgJiYgdGFyZ2V0VGFuayAhPT0gdGhp
cy5lbmVteVRhbmspIHsNCiAgICAgICAgICAgICAgLy8g6Led56a75aSq6L+c77yM5ZG95Lit
546H5L2O5LiU5a655piT6LWw5Yiw5a2Q5by55aSa55qE5Zyw5pa577yM5q+U6L6D5Y2x6Zmp
DQogICAgICAgICAgICAgIGlmIChkeCA+IDApIHsNCiAgICAgICAgICAgICAgICAgIHJlY29t
bWVuZERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICAgICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJ
UkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQog
ICAgICAgICAgICAgIC8vIOaJvuWIsOabtOWuueaYk+i1sOWIsOi/nOeoi+W8gOeBq+eahOaW
ueWQke+8jCDpnIDopoHliKTmlq3nm67moIfngrnkuI7nm67moIflnablhYvnmoTkvY3nva7l
hbPns7sNCiAgICAgICAgICAgICAgbGV0IGR4T2ZUYW5rQW5kUG9pbnQgPSB0YXJnZXRQb2lu
dC5YIC0gdGFyZ2V0VGFuay5YOw0KICAgICAgICAgICAgICBsZXQgZHlPZlRhbmtBbmRQb2lu
dCA9IHRhcmdldFBvaW50LlkgLSB0YXJnZXRUYW5rLlk7DQoNCiAgICAgICAgICAgICAgaWYg
KGR4T2ZUYW5rQW5kUG9pbnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAvLyDnm67moIfn
grnlnKjnm67moIflnablhYvlj7PpnaINCiAgICAgICAgICAgICAgICAgIGlmIChkeCA8PSAw
KSB7DQogICAgICAgICAgICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0gdGhpcy5E
SVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
ICAgICAgICAgICAgIGlmIChkeSA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
cmVjb21tZW5kRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAg
ICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbW1l
bmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgICAgICAgICAg
ICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHhP
ZlRhbmtBbmRQb2ludCA8IDApIHsNCiAgICAgICAgICAgICAgICAgIC8vIOebruagh+eCueWc
qOebruagh+WdpuWFi+W3pumdog0KICAgICAgICAgICAgICAgICAgaWYgKGR4ID49IDApIHsN
CiAgICAgICAgICAgICAgICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVD
VElPTi5MRUZUOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAg
ICAgICAgICBpZiAoZHkgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29t
bWVuZERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkRPV047DQogICAgICAgICAgICAgICAg
ICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb21tZW5kRGly
ZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uVVA7DQogICAgICAgICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKGR5T2ZUYW5r
QW5kUG9pbnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAvLyDnm67moIfngrnlnKjnm67m
oIflnablhYvkuIvpnaINCiAgICAgICAgICAgICAgICAgIGlmIChkeSA8PSAwKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgcmVjb21tZW5kRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04u
RE9XTjsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAg
ICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbW1lbmRE
aXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgICAgICAgICAg
IH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29tbWVuZERpcmVjdGlv
biA9IHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAg
ICAgICAgIC8vIOebruagh+eCueWcqOebruagh+WdpuWFi+S4iumdog0KICAgICAgICAgICAg
ICAgICAgaWYgKGR5ID49IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICByZWNvbW1lbmRE
aXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgICByZWNvbW1lbmREaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5MRUZU
Ow0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAg
ICAgICAgIHJlY29tbWVuZERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAg
ICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgICAgIA0KICAgICAgbGV0IG9w
dGlvbkRpcmVjdGlvbnMgPSBbXTsNCiAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuc3ZOb1N0
b3BEaXJlY3Rpb25zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IGRpcmVjdGlvbiA9
IHRoaXMuc3ZOb1N0b3BEaXJlY3Rpb25zW2ldOw0KICAgICAgICAgIGxldCBjb3B5T2ZNeVRh
bmsgPSB0aGlzLmNvcHlPZlRhbmsodGhpcy5zdk15VGFuayk7DQogICAgICAgICAgY29weU9m
TXlUYW5rLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjsNCiAgICAgICAgICBsZXQgaW1hZ2luYXJ5
VGFuayA9IHRoaXMuaW1hZ2luZU1vdmUoMSwgY29weU9mTXlUYW5rLCB0cnVlKTsNCiAgICAg
ICAgICBsZXQgdGVtcERpc3RhbmNlID0gdGhpcy5jYWxjdWxhdGVEaXN0YW5jZVdpdGhNZXRh
bChpbWFnaW5hcnlUYW5rLCB0YXJnZXRQb2ludCwgbmVhcmVzdE1ldGFsKTsNCg0KICAgICAg
ICAgIC8vIDEuIOajgOa1i+aYr+WQpuS8muS4jumanOeijeeJqeeisOaSnu+8jOWmguaenOS8
mueisOaSnu+8jGZhbHNlDQogICAgICAgICAgaWYgKGltYWdpbmFyeVRhbmsuWCA9PT0gY29w
eU9mTXlUYW5rLlggJiYgaW1hZ2luYXJ5VGFuay5ZID09PSBjb3B5T2ZNeVRhbmsuWSkgew0K
ICAgICAgICAgICAgICAvLyDlnablhYvmnKrog73np7vliqjvvIzor7TmmI7pgYfliLDovrnn
lYzmiJbogIXpmpznoo3niakNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAg
fQ0KICAgICAgICAgIC8vIDIuIOajgOa1i+enu+WKqOWQjuaYr+WQpuWcqOWNsemZqeWMuuWf
nw0KICAgICAgICAgIGlmICh0aGlzLmluRGFuZ2VyQXJlYShpbWFnaW5hcnlUYW5rLCB0aGlz
LnRhcmdldFRhbmtJbmZvWzJdKSkgew0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAg
ICAgICB9DQoNCiAgICAgICAgICBpZiAodGVtcERpc3RhbmNlIDwgZGlzdGFuY2UpIHsNCiAg
ICAgICAgICAgICAgb3B0aW9uRGlyZWN0aW9ucy5wdXNoKGRpcmVjdGlvbik7DQogICAgICAg
ICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKG9wdGlvbkRpcmVjdGlvbnMubGVuZ3RoID4gMCkg
ew0KICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG9wdGlvbkRpcmVjdGlvbnMubGVuZ3RoO2kr
Kykgew0KICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gb3B0aW9uRGlyZWN0aW9uc1tp
XTsNCiAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gcmVjb21tZW5kRGlyZWN0aW9u
KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uOw0KICAgICAgICAgICAg
ICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBvcHRpb25EaXJlY3Rpb25zWzBd
Ow0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmxvZygi5p+l6Zeu6aKYIik7DQog
ICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlNUT1A7DQogICAgICB9DQoNCiAgfQ0K
DQogIGluQWZ0ZXJTdGVwT25lQXJlYShkeCwgZHkpIHsNCiAgICAgIGxldCBhYnNEeCA9IE1h
dGguYWJzKGR4KTsNCiAgICAgIGxldCBhYnNEeSA9IE1hdGguYWJzKGR5KTsNCiAgICAgIGlm
IChhYnNEeSA8IGFic0R5KSB7DQogICAgICAgICAgaWYgKGFic0R4IDwgMzAgJiYgYWJzRHkg
PCAzNykgew0KICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAg
ICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChhYnNEeCA8IDM3ICYmIGFic0R5IDwgMzApIHsN
CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAg
ICAgDQogICAgICByZXR1cm4gZmFsc2U7DQogIH0NCg0KICBpbkxpbWl0U2FmZUFyZWEoZHgs
IGR5KSB7DQogICAgICBsZXQgYWJzRHggPSBNYXRoLmFicyhkeCk7DQogICAgICBsZXQgYWJz
RHkgPSBNYXRoLmFicyhkeSk7DQogICAgICBpZiAoYWJzRHggPCAzNyAmJiBhYnNEeCA+PSAz
MCAmJiBhYnNEeSA8IDM3ICYmIGFic0R5IDwgMzcgPj0gMzApIHsNCiAgICAgICAgICByZXR1
cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgfQ0KDQogIGluQ2F1
dGlvbkFyZWEoZHgsIGR5KSB7DQogICAgICBsZXQgYWJzRHggPSBNYXRoLmFicyhkeCk7DQog
ICAgICBsZXQgYWJzRHkgPSBNYXRoLmFicyhkeSk7DQogICAgICBpZiAoYWJzRHggPCBhYnNE
eSkgew0KICAgICAgICAgIGlmIChhYnNEeSA8IDEuNSAqIHRoaXMuVEFOS19XSURUSCkgew0K
ICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICB9IGVsc2Ug
ew0KICAgICAgICAgIGlmIChhYnNEeCA8IDEuNSAqIHRoaXMuVEFOS19XSURUSCkgew0KICAg
ICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICBy
ZXR1cm4gZmFsc2U7DQogIH0NCg0KDQogIGluQXR0YWNrQXJlYShkeCwgZHkpIHsNCiAgICAg
IGlmICgoTWF0aC5hYnMoZHgpIDwgdGhpcy5NSU5fRklSRV9PRkZTRVQpIHx8IChNYXRoLmFi
cyhkeSkgPCB0aGlzLk1JTl9GSVJFX09GRlNFVCkpIHsNCiAgICAgICAgICBpZiAodGhpcy5p
c0Jsb2NrQnlNZXRhbCh0aGlzLnN2TXlUYW5rLCB0aGlzLnRhcmdldFRhbmtJbmZvWzJdKSkg
ew0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICAg
IHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KICB9DQoNCiAg
aW5TdXBlckF0dGFja0FyZWEoZHgsIGR5KSB7DQogICAgICBsZXQgbXlCdWxsZXRDb3VudCA9
IHRoaXMubXlCdWxsZXRzLmxlbmd0aDsNCiAgICAgIHRoaXMuQVRUQUNLX01JTl9ESVNUQU5D
RSA9IHRoaXMuQVRUQUNLX01JTl9ESVNUQU5DRV9DT05TVCAtIG15QnVsbGV0Q291bnQgKiA0
Mg0KICAgICAgbGV0IHRhcmdldFRhbmsgPSB0aGlzLnRhcmdldFRhbmtJbmZvWzJdOw0KICAg
ICAgbGV0IG1pbkRpc3RhbmNlT2ZUYXJnZXQgPSB0aGlzLm1pbkRpc3RhbmNlT2ZCb3VuZCh0
YXJnZXRUYW5rKTsNCiAgICAgIGxldCBzdXBlck1pbkZpcmVPZmZzZXQgPSB0aGlzLlRBTktf
V0lEVEg7DQogICAgICBpZiAobWluRGlzdGFuY2VPZlRhcmdldCA8PSB0aGlzLkFUVEFDS19N
SU5fRElTVEFOQ0UtMikgew0KICAgICAgICAgIHN1cGVyTWluRmlyZU9mZnNldCA9IHN1cGVy
TWluRmlyZU9mZnNldCArICh0aGlzLkFUVEFDS19NSU5fRElTVEFOQ0UtMi1taW5EaXN0YW5j
ZU9mVGFyZ2V0KTsNCiAgICAgIH0NCiAgICAgIGlmICgoTWF0aC5hYnMoZHgpIDwgc3VwZXJN
aW5GaXJlT2Zmc2V0ICYmIE1hdGguYWJzKGR5KSA+PSB0aGlzLlNVUEVSX0FUVEFDS19ESVNU
QU5DRSAmJiBNYXRoLmFicyhkeSkgPD0gdGhpcy5TVVBFUl9BVFRBQ0hfTUFYX0RJU1RBTkNF
KSB8fCAoTWF0aC5hYnMoZHkpIDwgc3VwZXJNaW5GaXJlT2Zmc2V0ICYmIE1hdGguYWJzKGR4
KSA+PSB0aGlzLlNVUEVSX0FUVEFDS19ESVNUQU5DRSAmJiBNYXRoLmFicyhkeCkgPD0gdGhp
cy5TVVBFUl9BVFRBQ0hfTUFYX0RJU1RBTkNFKSkgew0KICAgICAgICAgIGlmICh0aGlzLmlz
QmxvY2tCeU1ldGFsKHRoaXMuc3ZNeVRhbmssIHRoaXMudGFyZ2V0VGFua0luZm9bMl0pKSB7
DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAg
DQogICAgICAgICAgaWYgKHRhcmdldFRhbmsgIT09IHRoaXMuZW5lbXlUYW5rKSB7DQogICAg
ICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IG1p
bkRpc3RhbmNlT2ZNeUFuZEVuZW15ID0gMjA7DQogICAgICAgICAgbGV0IG1pbkRpc3RhbmNl
T2ZTdXBlckF0dGFjayA9IHRoaXMuQVRUQUNLX01JTl9ESVNUQU5DRTsNCiAgICAgICAgICBs
ZXQgZGlzdGFuY2VPZlN1cGVyQXR0YWNrID0gbWluRGlzdGFuY2VPZlN1cGVyQXR0YWNrICsg
dGhpcy5UQU5LX1dJRFRILzI7DQogICAgICAgICAgbGV0IGNlbnRlck9mTXlUYW5rID0ge1g6
dGhpcy5zdk15VGFuay5YK3RoaXMuVEFOS19XSURUSC8yLCBZOnRoaXMuc3ZNeVRhbmsuWSt0
aGlzLlRBTktfV0lEVEgvMn07DQogICAgICAgICAgbGV0IGNlbnRlck9mVGFyZ2V0VGFuayA9
IHtYOnRhcmdldFRhbmsuWCt0aGlzLlRBTktfV0lEVEgvMiwgWTp0YXJnZXRUYW5rLlkrdGhp
cy5UQU5LX1dJRFRILzJ9Ow0KICAgICAgICAgIGlmIChjZW50ZXJPZk15VGFuay5ZIC0gY2Vu
dGVyT2ZUYXJnZXRUYW5rLlkgPj0gbWluRGlzdGFuY2VPZk15QW5kRW5lbXkgJiYgY2VudGVy
T2ZNeVRhbmsuWSA8IGRpc3RhbmNlT2ZTdXBlckF0dGFjaykgew0KICAgICAgICAgICAgICBy
ZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGNlbnRlck9mTXlUYW5r
LlggLSBjZW50ZXJPZlRhcmdldFRhbmsuWCA+PSBtaW5EaXN0YW5jZU9mTXlBbmRFbmVteSAm
JiBjZW50ZXJPZk15VGFuay5YIDwgZGlzdGFuY2VPZlN1cGVyQXR0YWNrKSB7DQogICAgICAg
ICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoY2VudGVy
T2ZUYXJnZXRUYW5rLlkgLSBjZW50ZXJPZk15VGFuay5ZID49IG1pbkRpc3RhbmNlT2ZNeUFu
ZEVuZW15ICYmIGNlbnRlck9mTXlUYW5rLlkgPiBjYW52YXMuaGVpZ2h0IC0gZGlzdGFuY2VP
ZlN1cGVyQXR0YWNrKSB7DQogICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAg
IH0NCiAgICAgICAgICBpZiAoY2VudGVyT2ZUYXJnZXRUYW5rLlggLSBjZW50ZXJPZk15VGFu
ay5YID49IG1pbkRpc3RhbmNlT2ZNeUFuZEVuZW15ICYmIGNlbnRlck9mTXlUYW5rLlggPiBj
YW52YXMud2lkdGggLSBkaXN0YW5jZU9mU3VwZXJBdHRhY2spIHsNCiAgICAgICAgICAgICAg
cmV0dXJuIHRydWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgDQogICAgICAgICAgZm9y
KGxldCBpPTA7aTxhbWV0YWwubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgbGV0IG1l
dGFsID0gYW1ldGFsW2ldOw0KICAgICAgICAgICAgICBsZXQgY2VudGVyT2ZNZXRhbCA9IHtY
Om1ldGFsWzBdK3RoaXMuTUVUQUxfV0lEVEgvMixZOm1ldGFsWzFdK3RoaXMuTUVUQUxfV0lE
VEgvMn07DQogICAgICAgICAgICAgIGxldCBkZWx0YVggPSBNYXRoLmFicyhjZW50ZXJPZlRh
cmdldFRhbmsuWCAtIGNlbnRlck9mTWV0YWwuWCk7DQogICAgICAgICAgICAgIGxldCBkZWx0
YVkgPSBNYXRoLmFicyhjZW50ZXJPZlRhcmdldFRhbmsuWSAtIGNlbnRlck9mTWV0YWwuWSk7
DQogICAgICAgICAgICAgIGxldCBkZWx0YVhPZk1pbmUgPSBNYXRoLmFicyhjZW50ZXJPZk15
VGFuay5YIC0gY2VudGVyT2ZNZXRhbC5YKTsNCiAgICAgICAgICAgICAgbGV0IGRlbHRhWU9m
TWluZSA9IE1hdGguYWJzKGNlbnRlck9mTXlUYW5rLlkgLSBjZW50ZXJPZk1ldGFsLlkpOw0K
ICAgICAgICAgICAgICBpZiAoZGVsdGFZIDwgKHRoaXMuTUVUQUxfV0lEVEgrdGhpcy5UQU5L
X1dJRFRIKS8yICYmIGRlbHRhWCA8ICh0aGlzLlRBTktfV0lEVEgrdGhpcy5NRVRBTF9XSURU
SCkvMittaW5EaXN0YW5jZU9mU3VwZXJBdHRhY2sgJiYgZGVsdGFYT2ZNaW5lID4gZGVsdGFY
ICYmIE1hdGguYWJzKGR4KSA8IHN1cGVyTWluRmlyZU9mZnNldCkgew0KICAgICAgICAgICAg
ICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYg
KGRlbHRhWCA8ICh0aGlzLk1FVEFMX1dJRFRIK3RoaXMuVEFOS19XSURUSCkvMiAmJiBkZWx0
YVkgPCAodGhpcy5UQU5LX1dJRFRIK3RoaXMuTUVUQUxfV0lEVEgpLzIrbWluRGlzdGFuY2VP
ZlN1cGVyQXR0YWNrICYmIGRlbHRhWU9mTWluZSA+IGRlbHRhWSAmJiBNYXRoLmFicyhkeSkg
PCBzdXBlck1pbkZpcmVPZmZzZXQpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVl
Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIGZh
bHNlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KICB9DQoNCiAgbWluRGlzdGFu
Y2VPZkJvdW5kKHBvaW50KSB7DQogICAgICAvLyDorqHnrpfngrnliLDovrnnlYznmoTmnIDl
sI/ot53nprsNCiAgICAgIGxldCBtaW5EeCA9IE1hdGgubWluKHBvaW50LlgsIGNhbnZhcy53
aWR0aC1wb2ludC5YLXRoaXMuVEFOS19XSURUSCk7DQogICAgICBsZXQgbWluRHkgPSBNYXRo
Lm1pbihwb2ludC5ZLCBjYW52YXMuaGVpZ2h0LXBvaW50LlktdGhpcy5UQU5LX1dJRFRIKTsN
CiAgICAgIGxldCBtaW5EZWx0YSA9IE1hdGgubWluKG1pbkR4LCBtaW5EeSk7DQogICAgICBy
ZXR1cm4gbWluRGVsdGE7DQogIH0NCg0KICBpblNhdmVCdWxsZXRzQXJlYShkeCwgZHkpIHsN
CiAgICAgIGlmIChNYXRoLmFicyhkeCkgPCA1NyArIHRoaXMuVEFOS19XSURUSCB8fCBNYXRo
LmFicyhkeSkgPCA1NyArIHRoaXMuVEFOS19XSURUSCkgew0KICAgICAgICAgIHJldHVybiB0
cnVlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KICB9DQoNCiAgaW5NdXN0RGll
QXJlYTIoZHgsIGR5KSB7DQogICAgICBsZXQgYWJzRHggPSBNYXRoLmFicyhkeCk7DQogICAg
ICBsZXQgYWJzRHkgPSBNYXRoLmFicyhkeSk7DQogICAgICBpZiAoYWJzRHggPCAyMyAmJiBh
YnNEeSA8IDIzKSB7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgICBs
ZXQgZE1heCA9IE1hdGgubWF4KGFic0R4LCBhYnNEeSk7DQogICAgICBsZXQgZE1pbiA9IE1h
dGgubWluKGFic0R4LCBhYnNEeSk7DQogICAgICBpZiAoZE1heCA8IDM3ICYmIGRNaW4gPCAx
Nikgew0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgICAgaWYgKGRNYXgg
Pj0gNTcrdGhpcy5UQU5LX1dJRFRIKSB7DQogICAgICAgICAgLy8g5qC55o2u5Z2m5YWL5LiN
5ZCM5pa55ZCR77yM5pyA5bCP6Led56a76KaB5LmI5Li6NTbvvIzopoHkuYjkuLo0OQ0KICAg
ICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCg0KICAgICAgbGV0IGltYWdpbkJ1bGxl
dCA9IHt9Ow0KDQogICAgICBzd2l0Y2godGhpcy5zdk15VGFuay5kaXJlY3Rpb24pIHsNCiAg
ICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLkxFRlQ6DQogICAgICAgICAgICAgIGltYWdp
bkJ1bGxldCA9IG5ldyBCdWxsZXQoJ2ltYWdpbjEnLCAxMCwgMSwgdGhpcy5ESVJFQ1RJT04u
TEVGVCwgdGhpcy5zdk15VGFuay5YLXRoaXMuQlVMTEVUX1dJRFRILzIsIHRoaXMuc3ZNeVRh
bmsuWSt0aGlzLlRBTktfV0lEVEgvMik7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAg
ICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uVVA6DQogICAgICAgICAgICAgIGltYWdpbkJ1bGxl
dCA9IG5ldyBCdWxsZXQoJ2ltYWdpbjInLCAxMCwgMSwgdGhpcy5ESVJFQ1RJT04uVVAsIHRo
aXMuc3ZNeVRhbmsuWCt0aGlzLlRBTktfV0lEVEgvMiwgdGhpcy5zdk15VGFuay5ZLXRoaXMu
QlVMTEVUX1dJRFRILzIpOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNl
IHRoaXMuRElSRUNUSU9OLlJJR0hUOg0KICAgICAgICAgICAgICBpbWFnaW5CdWxsZXQgPSBu
ZXcgQnVsbGV0KCdpbWFnaW4zJywgMTAsIDEsIHRoaXMuRElSRUNUSU9OLlJJR0hULCB0aGlz
LnN2TXlUYW5rLlgrdGhpcy5UQU5LX1dJRFRIK3RoaXMuQlVMTEVUX1dJRFRILzIsIHRoaXMu
c3ZNeVRhbmsuWSt0aGlzLlRBTktfV0lEVEgvMik7DQogICAgICAgICAgICAgIGJyZWFrOyAg
ICAgICAgDQogICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5ET1dOOg0KICAgICAgICAg
ICAgICBpbWFnaW5CdWxsZXQgPSBuZXcgQnVsbGV0KCdpbWFnaW40JywgMTAsIDEsIHRoaXMu
RElSRUNUSU9OLkRPV04sIHRoaXMuc3ZNeVRhbmsuWCArIHRoaXMuVEFOS19XSURUSC8yLCB0
aGlzLnN2TXlUYW5rLlkrdGhpcy5UQU5LX1dJRFRIK3RoaXMuQlVMTEVUX1dJRFRILzIpOw0K
ICAgICAgICAgICAgICBicmVhazsNCiAgICAgIH0NCg0KICAgICAgaW1hZ2luQnVsbGV0Lndp
ZHRoID0gdGhpcy5CVUxMRVRfV0lEVEg7DQoNCiAgICAgIGxldCBpbWFnaW5CdWxsZXRzID0g
W2ltYWdpbkJ1bGxldF07DQoNCiAgICAgIHJldHVybiB0aGlzLmRlZHVjZUlmQ3Jhc2hGb3JJ
bWFnaW5CdWxsZXRzKGltYWdpbkJ1bGxldHMpOw0KICB9DQoNCiAgaW5NdXN0RGllQXJlYShk
eCwgZHkpIHsNCiAgICAgIGxldCBkTWF4ID0gTWF0aC5tYXgoTWF0aC5hYnMoZHgpLCBNYXRo
LmFicyhkeSkpOw0KICAgICAgaWYgKGRNYXggPj0gNTcrdGhpcy5UQU5LX1dJRFRIKSB7DQog
ICAgICAgICAgLy8g5qC55o2u5Z2m5YWL5LiN5ZCM5pa55ZCR77yM5pyA5bCP6Led56a76KaB
5LmI5Li6NTbvvIzopoHkuYjkuLo0OQ0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAg
IH0NCg0KICAgICAgLy8g5bem44CB5LiK44CB5Y+z44CB5LiL5Zub5Liq5a2Q5by55ZCE6Ieq
55qEb2Zmc2V0KHgseSkNCiAgICAgIGxldCBvZmZzZXRzID0gW107DQogICAgICBzd2l0Y2go
dGhpcy5zdk15VGFuay5kaXJlY3Rpb24pIHsNCiAgICAgICAgICBjYXNlIHRoaXMuRElSRUNU
SU9OLkxFRlQ6DQogICAgICAgICAgICAgIG9mZnNldHMgPSBbWzAsMF0sWzAsLTddLFs3LDBd
LFswLDddXTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSB0aGlzLkRJ
UkVDVElPTi5VUDoNCiAgICAgICAgICAgICAgb2Zmc2V0cyA9IFtbLTcsMF0sWzAsMF0sWzcs
MF0sWzAsN11dOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlIHRoaXMu
RElSRUNUSU9OLlJJR0hUOg0KICAgICAgICAgICAgICBvZmZzZXRzID0gW1stNywwXSxbMCwt
N10sWzAsMF0sWzAsN11dOw0KICAgICAgICAgICAgICBicmVhazsgICAgICAgIA0KICAgICAg
ICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgb2Zmc2V0cyA9
IFtbLTcsMF0sWzAsLTddLFs3LDBdLFswLDddXTsNCiAgICAgICAgICAgICAgYnJlYWs7DQog
ICAgICB9DQoNCiAgICAgIGxldCBpbWFnaW5CdWxsZXRMZWZ0ID0gbmV3IEJ1bGxldCgnaW1h
Z2luMScsIDEwLCAxLCB0aGlzLkRJUkVDVElPTi5MRUZULCB0aGlzLnN2TXlUYW5rLlgtdGhp
cy5CVUxMRVRfV0lEVEgvMiwgdGhpcy5zdk15VGFuay5ZK3RoaXMuVEFOS19XSURUSC8yKTsN
CiAgICAgIGxldCBpbWFnaW5CdWxsZXRUb3AgPSBuZXcgQnVsbGV0KCdpbWFnaW4yJywgMTAs
IDEsIHRoaXMuRElSRUNUSU9OLlVQLCB0aGlzLnN2TXlUYW5rLlgrdGhpcy5UQU5LX1dJRFRI
LzIsIHRoaXMuc3ZNeVRhbmsuWS10aGlzLkJVTExFVF9XSURUSC8yKTsNCiAgICAgIGxldCBp
bWFnaW5CdWxsZXRSaWdodCA9IG5ldyBCdWxsZXQoJ2ltYWdpbjMnLCAxMCwgMSwgdGhpcy5E
SVJFQ1RJT04uUklHSFQsIHRoaXMuc3ZNeVRhbmsuWCt0aGlzLlRBTktfV0lEVEgrdGhpcy5C
VUxMRVRfV0lEVEgvMiwgdGhpcy5zdk15VGFuay5ZK3RoaXMuVEFOS19XSURUSC8yKTsNCiAg
ICAgIGxldCBpbWFnaW5CdWxsZXRCb3R0b20gPSBuZXcgQnVsbGV0KCdpbWFnaW40JywgMTAs
IDEsIHRoaXMuRElSRUNUSU9OLkRPV04sIHRoaXMuc3ZNeVRhbmsuWCArIHRoaXMuVEFOS19X
SURUSC8yLCB0aGlzLnN2TXlUYW5rLlkrdGhpcy5UQU5LX1dJRFRIK3RoaXMuQlVMTEVUX1dJ
RFRILzIpOw0KICAgICAgbGV0IGltYWdpbkJ1bGxldHMgPSBbaW1hZ2luQnVsbGV0TGVmdCwg
aW1hZ2luQnVsbGV0VG9wLCBpbWFnaW5CdWxsZXRSaWdodCwgaW1hZ2luQnVsbGV0Qm90dG9t
XTsNCiAgICAgIGZvcihsZXQgaT0wOyBpPGltYWdpbkJ1bGxldHMubGVuZ3RoOyBpKyspIHsN
CiAgICAgICAgICBsZXQgaW1hZ2luQnVsbGV0ID0gaW1hZ2luQnVsbGV0c1tpXTsNCiAgICAg
ICAgICBpbWFnaW5CdWxsZXQuWCArPSBvZmZzZXRzW2ldWzBdOw0KICAgICAgICAgIGltYWdp
bkJ1bGxldC5ZICs9IG9mZnNldHNbaV1bMV07DQogICAgICAgICAgaW1hZ2luQnVsbGV0Lndp
ZHRoID0gdGhpcy5CVUxMRVRfV0lEVEg7DQogICAgICB9DQoNCiAgICAgIHJldHVybiB0aGlz
LmRlZHVjZUlmQ3Jhc2hGb3JJbWFnaW5CdWxsZXRzKGltYWdpbkJ1bGxldHMpOw0KDQogIH0N
Cg0KICBpbkRhbmdlckFyZWEobXlUYW5rLCB0YXJnZXRUYW5rKSB7DQogICAgICBsZXQgYWJz
RHggPSBNYXRoLmFicyhteVRhbmsuWC10YXJnZXRUYW5rLlgpOw0KICAgICAgbGV0IGFic0R5
ID0gTWF0aC5hYnMobXlUYW5rLlktdGFyZ2V0VGFuay5ZKTsNCiAgICAgIGlmIChhYnNEeDw9
dGhpcy5EQU5HRVJfRElTVEFOQ0UgJiYgYWJzRHk8PXRoaXMuREFOR0VSX0RJU1RBTkNFKSB7
DQogICAgICAgICAgLy8gVE9ETyBTQ0og5Lit6Ze06Ze06ZqU6L6D5bCP5pe25p6B5piT6KKr
5pS75Ye777yM5pqC5pe26K6k5Li65Y+q6KaB5Zyo5Yy65Z+f5YaF5bCx6KaB6YCD6LeR77yM
5ZCO6Z2i5YaN6ICD6JmR5YW35L2T5oOF5Ya1DQogICAgICAgICAgLy8gaWYgKHRoaXMuaXNM
aW5lQ3Jvc3NXaXRoTWV0YWxzKG15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAv
LyAgICAgLy8g5Lit6Ze05pyJ6Zqc56KN54mp77yM5LiN5piv5Y2x6Zmp5Yy65Z+fDQogICAg
ICAgICAgLy8gICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgIC8vIH0NCiAgICAgICAgICBy
ZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgfQ0KDQogIGlu
RmlyZUFyZWEobXlUYW5rLCB0YXJnZXRUYW5rKSB7DQogICAgICBsZXQgYWJzRHggPSBNYXRo
LmFicyhteVRhbmsuWC10YXJnZXRUYW5rLlgpOw0KICAgICAgbGV0IGFic0R5ID0gTWF0aC5h
YnMobXlUYW5rLlktdGFyZ2V0VGFuay5ZKTsNCiAgICAgIGlmICgoYWJzRHg8dGhpcy5NSU5f
RklSRV9PRkZTRVQgJiYgYWJzRHk+PXRoaXMuREFOR0VSX0RJU1RBTkNFICYmIGFic0R5IDw9
IHRoaXMuRklSRV9NQVhfRElTVEFOQ0UpDQogICAgICAgICAgfHwgKGFic0R5PHRoaXMuTUlO
X0ZJUkVfT0ZGU0VUICYmIGFic0R4Pj10aGlzLkRBTkdFUl9ESVNUQU5DRSAmJiBhYnNEeCA8
PSB0aGlzLkZJUkVfTUFYX0RJU1RBTkNFKSkgew0KICAgICAgICAgIGlmICh0aGlzLmlzQmxv
Y2tCeU1ldGFsKG15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAgICAgLy8g5Lit
6Ze05pyJ6Zqc56KN54mp77yM5LiN5piv5byA54Gr5Yy65Z+fDQogICAgICAgICAgICAgIHJl
dHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAg
ICB9DQogICAgICByZXR1cm4gZmFsc2U7DQogIH0NCg0KICBpblVuU2FmZUFwcHJvYWNoQXJl
YShteVRhbmssIHRhcmdldFRhbmspIHsNCg0KICAgICAgbGV0IGFic0R4ID0gTWF0aC5hYnMo
bXlUYW5rLlgtdGFyZ2V0VGFuay5YKTsNCiAgICAgIGxldCBhYnNEeSA9IE1hdGguYWJzKG15
VGFuay5ZLXRhcmdldFRhbmsuWSk7DQoNCiAgICAgIGlmICh0aGlzLmlzQmxvY2tCeU1ldGFs
KG15VGFuaywgdGFyZ2V0VGFuaykpIHsNCiAgICAgICAgICAvLyDkuK3pl7TmnInpmpznoo3n
ianvvIzkuI3mmK/pnZ7lronlhajmjqXov5HljLrln58NCiAgICAgICAgICByZXR1cm4gZmFs
c2U7DQogICAgICB9DQoNCiAgICAgIGlmIChhYnNEeD50aGlzLkRBTkdFUl9ESVNUQU5DRSAm
JiBhYnNEeDw9dGhpcy5VTlNBRkVfQVBQUk9BQ0hfRElTVEFOQ0UgJiYgYWJzRHk+PXRoaXMu
REFOR0VSX0RJU1RBTkNFICYmIGFic0R5PD10aGlzLlVOU0FGRV9BUFBST0FDSF9ESVNUQU5D
RSkgew0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgICAgaWYgKGFic0R4
Pj10aGlzLk1JTl9GSVJFX09GRlNFVCAmJiBhYnNEeDw9dGhpcy5EQU5HRVJfRElTVEFOQ0Ug
JiYgYWJzRHk+PXRoaXMuREFOR0VSX0RJU1RBTkNFICYmIGFic0R5PD10aGlzLlVOU0FGRV9B
UFBST0FDSF9ESVNUQU5DRSkgew0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0K
ICAgICAgaWYgKGFic0R5Pj10aGlzLk1JTl9GSVJFX09GRlNFVCAmJiBhYnNEeTw9dGhpcy5E
QU5HRVJfRElTVEFOQ0UgJiYgYWJzRHg+PXRoaXMuREFOR0VSX0RJU1RBTkNFICYmIGFic0R4
PD10aGlzLlVOU0FGRV9BUFBST0FDSF9ESVNUQU5DRSkgew0KICAgICAgICAgIHJldHVybiB0
cnVlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KICB9DQoNCiAgaW5GYXJGaXJl
QXJlYShteVRhbmssIHRhcmdldFRhbmspIHsNCiAgICAgIGxldCBhYnNEeCA9IE1hdGguYWJz
KG15VGFuay5YLXRhcmdldFRhbmsuWCk7DQogICAgICBsZXQgYWJzRHkgPSBNYXRoLmFicyht
eVRhbmsuWS10YXJnZXRUYW5rLlkpOw0KICAgICAgaWYgKChhYnNEeDx0aGlzLk1JTl9GSVJF
X09GRlNFVCAmJiBhYnNEeT49dGhpcy5GSVJFX01BWF9ESVNUQU5DRSkgfHwgKGFic0R5PHRo
aXMuTUlOX0ZJUkVfT0ZGU0VUICYmIGFic0R4Pj10aGlzLkZJUkVfTUFYX0RJU1RBTkNFKSkg
ew0KICAgICAgICAgIGlmICh0aGlzLmlzQmxvY2tCeU1ldGFsKG15VGFuaywgdGFyZ2V0VGFu
aykpIHsNCiAgICAgICAgICAgICAgLy8g5Lit6Ze05pyJ6Zqc56KN54mp77yM5LiN5piv6L+c
56iL5byA54Gr5Yy65Z+fDQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAg
ICB9DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgICByZXR1cm4gZmFs
c2U7DQogIH0NCg0KICBlc2NhcGU0QUkoZHgsIGR5KSB7DQogICAgICBsZXQgZGlyZWN0aW9u
ID0gdGhpcy5ESVJFQ1RJT04uU1RPUDsNCiAgICAgIGxldCBhYnNEeCA9IE1hdGguYWJzKGR4
KTsNCiAgICAgIGxldCBhYnNEeSA9IE1hdGguYWJzKGR5KTsNCiAgICAgIGlmIChhYnNEeSA8
IGFic0R4KSB7DQogICAgICAgICAgLy8gdGhpcy5sb2coImRpc3RhbmNlSG9yIDogIiArIGRp
c3RhbmNlSG9yKQ0KICAgICAgICAgIGlmIChhYnNEeSA8PSB0aGlzLkRBTkdFUl9ESVNUQU5D
RSkgew0KICAgICAgICAgICAgICAvLyDlsI/kuo7lronlhajot53nprvvvIzov5znprsNCiAg
ICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMu
c3ZNeVRhbmsuWSA+PSBjYW52YXMuaGVpZ2h0LXRoaXMuREFOR0VSX0RJU1RBTkNFKSB7DQog
ICAgICAgICAgICAgICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgICAg
ICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAg
ICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rp
b24gPSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgLy8g5ZCM
5pa55ZCR5b6A5LiL6YCDDQogICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhp
cy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3ZNeVRhbmsuWSA8PSB0
aGlzLkRBTkdFUl9ESVNUQU5DRSkgew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChkeCA+
IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJF
Q1RJT04uUklHSFQ7DQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAg
ICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgICAgIC8vIOWQjOaWueWQkeW+gOS4iumAgw0KICAgICAgICAgICAg
ICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAg
ICAgICAgICAvLyDkuI3kvJrlh7rnjrANCiAgICAgICAgICB9DQogICAgICB9IGVsc2Ugew0K
ICAgICAgICAgIC8vIHRoaXMubG9nKCJkaXN0YW5jZVZlciA6ICIgKyBkaXN0YW5jZVZlcikN
CiAgICAgICAgICBpZiAoYWJzRHggPD0gdGhpcy5EQU5HRVJfRElTVEFOQ0UpIHsNCiAgICAg
ICAgICAgICAgLy8g5bCP5LqO5a6J5YWo6Led56a777yM6L+c56a7DQogICAgICAgICAgICAg
IC8vIOWmguaenOmdoOi/kei+ueeVjO+8jOi9rOWQkeemu+W8gO+8jCDlkKbliJnlkIzlkJHo
v5znprsNCiAgICAgICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgICAg
Ly8g5b6A5Y+z6LeRDQogICAgICAgICAgICAgICAgICAvLyDlpoLmnpzpnaDov5HovrnnlYzv
vIzovazlkJHnprvlvIDvvIwg5ZCm5YiZ5ZCM5ZCR6L+c56a7DQogICAgICAgICAgICAgICAg
ICBpZiAodGhpcy5zdk15VGFuay5YID49IGNhbnZhcy53aWR0aC10aGlzLkRBTkdFUl9ESVNU
QU5DRSkgew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChkeSA+IDApIHsNCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAg
ICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAg
ICBkaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgICAgICAgICAg
ICB9DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAg
IGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgLy8g5b6A5bem
6LeR77yM5aaC5p6cDQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdk15VGFuay5YIDw9
IHRoaXMuREFOR0VSX0RJU1RBTkNFKSB7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGR5
ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLkRJ
UkVDVElPTi5ET1dOOw0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAg
ICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAg
ICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAg
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgIC8vIOS4jeS8muWHuueOsA0KICAgICAgICAgIH0NCiAgICAgIH0N
Cg0KICAgICAgcmV0dXJuIHRoaXMuY2hlY2tJZk5lZWRUdXJuRGlyZWN0aW9uKGRpcmVjdGlv
bik7DQogIH0NCg0KICBhcHByb2FjaChkeCwgZHkpIHsNCiAgICAgIGxldCBhYnNEeCA9IE1h
dGguYWJzKGR4KTsNCiAgICAgIGxldCBhYnNEeSA9IE1hdGguYWJzKGR5KTsNCiAgICAgIGlm
IChhYnNEeCA+IGFic0R5KSB7DQogICAgICAgICAgLy8g5b6A5rC05bmz5pa55ZCR56e75Yqo
DQogICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICByZXR1cm4gdGhpcy5E
SVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICByZXR1
cm4gdGhpcy5ESVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJ
UkVDVElPTi5VUDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICByZXR1cm4g
dGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICAvLyBU
T0RPIFNDSiDmmK/lkKbopoHogIPomZHph43lkIjnmoTmg4XlhrUNCiAgfQ0KDQogIGVzY2Fw
ZTRFbmVteShiZXN0TWV0YWwpIHsNCiAgICAgIC8vIOe7lemanOeijeeJqemAg+emuw0KICAg
ICAgLy8gMS4g5Yik5pat6LCB5pu06Z2g6L+R5Lit5b+D54K577yM5Lul5Yik5pat5piv5ZCm
5Y+v5Lul6YCD56a7DQogICAgICAvLyAyLiDmoLnmja7nm7jlr7nkvY3nva7noa7lrprpmpzn
oo3nianvvIwg5bm256e75Yqo5Yiw55u45bqU6aG254K5DQogICAgICAvLyAzLiDmoLnmja7o
t53nprvmmK/lkKblop7liqDmnaXnoa7lrprnu5XooYzmlrnlkJENCg0KICAgICAgbGV0IG15
VGFua0NlbnRlciA9IHtYOnRoaXMuc3ZNeVRhbmsuWCArIHRoaXMuVEFOS19XSURUSC8yLCBZ
OnRoaXMuc3ZNeVRhbmsuWSArIHRoaXMuVEFOS19XSURUSC8yfTsNCiAgICAgIGxldCBtZXRh
bENlbnRlciA9IHtYOmJlc3RNZXRhbFswXSArIHRoaXMuTUVUQUxfV0lEVEgvMiwgWTpiZXN0
TWV0YWxbMV0gKyB0aGlzLk1FVEFMX1dJRFRILzJ9Ow0KICAgICAgbGV0IGNlbnRlckR4ID0g
bXlUYW5rQ2VudGVyLlggLSBtZXRhbENlbnRlci5YOw0KICAgICAgbGV0IGNlbnRlckR5ID0g
bXlUYW5rQ2VudGVyLlkgLSBtZXRhbENlbnRlci5ZOw0KDQogICAgICBpZiAodGhpcy5yb2xs
aW5nTWV0YWwoY2VudGVyRHgsIGNlbnRlckR5KSkgew0KICAgICAgICAgIHJldHVybiB0aGlz
LnJvbGxNZXRhbChjZW50ZXJEeCwgY2VudGVyRHksIGJlc3RNZXRhbCk7DQogICAgICB9IGVs
c2Ugew0KICAgICAgICAgIC8vIOW+gOacgOWwj+mXtOi3neWinuWKoOeahOaWueWQkeenu+WK
qA0KICAgICAgICAgIHJldHVybiB0aGlzLmFwcHJvYWNoTWV0YWwoYmVzdE1ldGFsKTsNCiAg
ICAgIH0NCiAgfQ0KDQogIHJvbGxNZXRhbChkeCwgZHksIG1ldGFsKSB7DQogICAgICAvLyDl
r7nkuo7mr4/kuKrljLrln5/vvIzorqHnrpfkuInkuKrmlrnlkJHvvIjkuKTkuKrnp7vliqjm
lrnlkJHkuI7lvZPliY3kuI3liqjnmoTmlrnlkJHvvInlk6rkuKrkuI7nm67moIfot53nprvo
voPov5zvvIzliJnlvoDpgqPkuKrmlrnlkJHnp7vliqgNCiAgICAgIGxldCBkaXJlY3Rpb25z
ID0gdGhpcy5nZXRUd29Sb2xsRGlyZWN0aW9ucyhkeCwgZHkpOw0KICAgICAgZGlyZWN0aW9u
cy5wdXNoKHRoaXMuRElSRUNUSU9OLlNUT1ApOw0KICAgICAgbGV0IGNvcHlPZk15VGFuayA9
IHRoaXMuY29weU9mVGFuayh0aGlzLnN2TXlUYW5rKTsNCiAgICAgIGxldCB0YXJnZXRUYW5r
ID0gdGhpcy50YXJnZXRUYW5rSW5mb1syXTsNCiAgICAgIGxldCBtYXhEaXN0YW5jZSA9IDA7
DQogICAgICBsZXQgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5TVE9QOw0KICAg
ICAgZm9yKGxldCBpPTA7aTxkaXJlY3Rpb25zLmxlbmd0aDtpKyspIHsNCiAgICAgICAgICBs
ZXQgZGlyZWN0aW9uID0gZGlyZWN0aW9uc1tpXTsNCiAgICAgICAgICBjb3B5T2ZNeVRhbmsu
ZGlyZWN0aW9uID0gZGlyZWN0aW9uOw0KICAgICAgICAgIGxldCBpbWFnaW5hcnlUYW5rID0g
dGhpcy5pbWFnaW5lTW92ZSgyLCBjb3B5T2ZNeVRhbmssIHRydWUpOw0KICAgICAgICAgIGxl
dCBkaXN0YW5jZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2VXaXRoTWV0YWwoaW1hZ2luYXJ5
VGFuaywgdGFyZ2V0VGFuaywgbWV0YWwpOw0KICAgICAgICAgIGlmIChkaXN0YW5jZSA+IG1h
eERpc3RhbmNlKSB7DQogICAgICAgICAgICAgIG1heERpc3RhbmNlID0gZGlzdGFuY2U7DQog
ICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gZGlyZWN0aW9uOw0KICAgICAgICAgIH0N
CiAgICAgIH0NCiAgICAgIHJldHVybiBmaW5hbERpcmVjdGlvbjsNCiAgfQ0KDQoNCg0KICAv
KioNCiAgICog6I635Y+W5b2T5YmN57uV6Zqc56KN54mp5pe25Y+v6IO955qE5Lik5Liq5pa5
5ZCR77yM5o6S6Zmk5o6J5Zyo5pWM5pa55omT5Ye76IyD5Zu05YaF55qE5pa55ZCR77yM5Y2z
5Zyo5ZCM5LiA6L2057q/5LiK55qEDQogICAqIEBwYXJhbSBkeCDmsLTlubPmlrnlkJHkuIrn
moTkuK3lv4PngrnnmoTlt64NCiAgICogQHBhcmFtIGR5IOerluebtOaWueWQkeS4iueahOS4
reW/g+eCueeahOW3rg0KICAgKi8NCiAgZ2V0VHdvUm9sbERpcmVjdGlvbnMoZHgsIGR5KSB7
DQogICAgICBsZXQgZGlyZWN0aW9ucyA9IFtdOw0KICAgICAgbGV0IG1pbkRpc3RhbmNlID0g
KHRoaXMuVEFOS19XSURUSCArIHRoaXMuTUVUQUxfV0lEVEgpLzI7DQogICAgICBsZXQgbWF4
RGlzdGFuY2UgPSBtaW5EaXN0YW5jZSArIHRoaXMuc3ZNeVRhbmsuc3BlZWQ7DQogICAgICBs
ZXQgYWJzRHggPSBNYXRoLmFicyhkeCk7DQogICAgICBsZXQgYWJzRHkgPSBNYXRoLmFicyhk
eSk7DQogICAgICBpZiAoYWJzRHggPCBtaW5EaXN0YW5jZSAmJiBhYnNEeSA+PSBtaW5EaXN0
YW5jZSAmJiBhYnNEeSA8IG1heERpc3RhbmNlKSB7DQogICAgICAgICAgLy8g5Zyo6Zqc56KN
54mp55qE5LiK5LiL5Lik6L65DQogICAgICAgICAgZGlyZWN0aW9ucyA9IFt0aGlzLkRJUkVD
VElPTi5MRUZULCB0aGlzLkRJUkVDVElPTi5SSUdIVF07DQogICAgICB9DQogICAgICBpZiAo
YWJzRHkgPCBtaW5EaXN0YW5jZSAmJiBhYnNEeCA+PSBtaW5EaXN0YW5jZSAmJiBhYnNEeCA8
IG1heERpc3RhbmNlKSB7DQogICAgICAgICAgLy8g5Zyo6Zqc56KN54mp55qE5bem5Y+z5Lik
6L65DQogICAgICAgICAgZGlyZWN0aW9ucyA9IFt0aGlzLkRJUkVDVElPTi5VUCwgdGhpcy5E
SVJFQ1RJT04uRE9XTl07DQogICAgICB9DQogICAgICBpZiAoYWJzRHggPj0gbWluRGlzdGFu
Y2UgJiYgYWJzRHggPCBtYXhEaXN0YW5jZSAmJiBhYnNEeSA+PSBtaW5EaXN0YW5jZSAmJiBh
YnNEeSA8IG1heERpc3RhbmNlKSB7DQogICAgICAgICAgaWYgKGR4IDwgMCAmJiBkeSA8IDAp
IHsNCiAgICAgICAgICAgICAgZGlyZWN0aW9ucyA9IFt0aGlzLkRJUkVDVElPTi5SSUdIVCwg
dGhpcy5ESVJFQ1RJT04uRE9XTl07DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChkeCA8
IDAgJiYgZHkgPiAwKSB7DQogICAgICAgICAgICAgIGRpcmVjdGlvbnMgPSBbdGhpcy5ESVJF
Q1RJT04uUklHSFQsIHRoaXMuRElSRUNUSU9OLlVQXTsNCiAgICAgICAgICB9DQogICAgICAg
ICAgaWYgKGR4ID4gMCAmJiBkeSA8IDApIHsNCiAgICAgICAgICAgICAgZGlyZWN0aW9ucyA9
IFt0aGlzLkRJUkVDVElPTi5MRUZULCB0aGlzLkRJUkVDVElPTi5ET1dOXTsNCiAgICAgICAg
ICB9DQogICAgICAgICAgaWYgKGR4ID4gMCAmJiBkeSA+IDApIHsNCiAgICAgICAgICAgICAg
ZGlyZWN0aW9ucyA9IFt0aGlzLkRJUkVDVElPTi5MRUZULCB0aGlzLkRJUkVDVElPTi5VUF07
DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8g5YW25LuW5oOF5Ya15LiN5Zyo57uV
6KGM6IyD5Zu05YaFDQoNCiAgICAgIHJldHVybiBkaXJlY3Rpb25zOw0KDQogIH0NCg0KICBp
c0luQ29ubmVjdFBvaW50QXJlYShhYnNEeCwgYWJzRHkpIHsNCiAgICAgIGxldCBtaW5EaXN0
YW5jZSA9ICh0aGlzLlRBTktfV0lEVEggKyB0aGlzLk1FVEFMX1dJRFRIKS8yOw0KICAgICAg
cmV0dXJuIChhYnNEeCA+PSBtaW5EaXN0YW5jZSAmJiBhYnNEeSA+PSBtaW5EaXN0YW5jZSk7
DQogIH0NCg0KICByb2xsaW5nTWV0YWwoZHgsIGR5KSB7DQogICAgICBsZXQgcm9sbGluZ0Rp
c3RhbmNlID0gdGhpcy5UQU5LX1dJRFRILzIgKyB0aGlzLk1FVEFMX1dJRFRILzIgKyB0aGlz
LnN2TXlUYW5rLnNwZWVkOw0KICAgICAgaWYgKE1hdGguYWJzKGR4KSA8IHJvbGxpbmdEaXN0
YW5jZSAmJiBNYXRoLmFicyhkeSkgPCByb2xsaW5nRGlzdGFuY2UpIHsNCiAgICAgICAgICBy
ZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgfQ0KDQogIGFw
cHJvYWNoTWV0YWwobWV0YWwpIHsNCiAgICAgIGxldCBkaXJlY3Rpb247DQoNCiAgICAgIGxl
dCBuZWFyZXN0VmVydGV4T2ZUYW5rID0gdGhpcy5nZXROZWFyZXN0VmVydGV4T2ZUYW5rKHRo
aXMuc3ZNeVRhbmssIG1ldGFsKTsNCiAgICAgIGxldCBuZWFyZXN0VmVydGV4ID0gdGhpcy5n
ZXROZWFyZXN0VmVydGV4T2ZNZXRhbChtZXRhbCk7DQoNCiAgICAgIGxldCBkeCA9IG5lYXJl
c3RWZXJ0ZXhPZlRhbmsuWCAtIG5lYXJlc3RWZXJ0ZXguWDsNCiAgICAgIGxldCBkeSA9IG5l
YXJlc3RWZXJ0ZXhPZlRhbmsuWSAtIG5lYXJlc3RWZXJ0ZXguWTsNCiAgICAgIC8vIGR4LGR5
IOW6lOivpeS7pei3neemu+WdpuWFi+acgOi/keeahOmhtueCueadpeiuoeeulw0KICAgICAg
aWYgKE1hdGguYWJzKGR4KSA+IE1hdGguYWJzKGR5KSkgew0KICAgICAgICAgIGlmIChkeCA+
IDApIHsNCiAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsN
CiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLkRJ
UkVDVElPTi5SSUdIVDsNCiAgICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICAg
IGlmIChkeSA+IDApIHsNCiAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJ
T04uVVA7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgZGlyZWN0aW9uID0g
dGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1
cm4gZGlyZWN0aW9uOw0KICB9DQoNCiAgZmluZEJlc3RNZXRhbDJFc2NhcGUoKSB7DQogICAg
ICBsZXQgbWluRGlzdGFuY2UgPSB0aGlzLk1BWF9ESVNUQU5DRTsNCiAgICAgIGxldCBiZXN0
TWV0YWw7DQogICAgICBsZXQgdGFyZ2V0VGFuayA9IHRoaXMudGFyZ2V0VGFua0luZm9bMl07
DQogICAgICBmb3IobGV0IGk9MDsgaTxhbWV0YWwubGVuZ3RoO2krKykgew0KICAgICAgICAg
IGxldCBtZXRhbCA9IGFtZXRhbFtpXTsNCiAgICAgICAgICAvLyDot53nprvorqHnrpfpobvk
vb/nlKjmnIDov5HngrnvvIzogIzkuI3og73kvb/nlKjlm7rlrprngrkNCiAgICAgICAgICBs
ZXQgbmVhcmVzdFZlcnRleE9mVGFuayA9IHRoaXMuZ2V0TmVhcmVzdFZlcnRleE9mVGFuayh0
aGlzLnN2TXlUYW5rLCBtZXRhbCk7DQogICAgICAgICAgbGV0IG5lYXJlc3RWZXJ0ZXggPSB0
aGlzLmdldE5lYXJlc3RWZXJ0ZXhPZk1ldGFsKG1ldGFsKTsNCg0KICAgICAgICAgIGxldCBu
ZWFyZXN0VmVydGV4T2ZNeVRhbmsgPSB0aGlzLmdldE5lYXJlc3RWZXJ0ZXhPZlRhbmtzKHRo
aXMuc3ZNeVRhbmssIHtYOnRhcmdldFRhbmsuWCt0aGlzLlRBTktfV0lEVEgvMiwgWTp0YXJn
ZXRUYW5rLlkrdGhpcy5UQU5LX1dJRFRILzJ9KTsNCiAgICAgICAgICBsZXQgbmVhcmVzdFZl
cnRleE9mVGFyZ2V0ID0gdGhpcy5nZXROZWFyZXN0VmVydGV4T2ZUYW5rcyh0YXJnZXRUYW5r
LCB7WDp0aGlzLnN2TXlUYW5rLlgrdGhpcy5UQU5LX1dJRFRILzIsIFk6dGhpcy5zdk15VGFu
ay5ZK3RoaXMuVEFOS19XSURUSC8yfSk7DQoNCiAgICAgICAgICBsZXQgZHgxID0gbmVhcmVz
dFZlcnRleE9mTXlUYW5rLlggLSBuZWFyZXN0VmVydGV4T2ZUYXJnZXQuWDsNCiAgICAgICAg
ICBsZXQgZHgyID0gbmVhcmVzdFZlcnRleE9mVGFuay5YIC0gbmVhcmVzdFZlcnRleC5YOw0K
ICAgICAgICAgIGxldCBkeTEgPSBuZWFyZXN0VmVydGV4T2ZNeVRhbmsuWSAtIG5lYXJlc3RW
ZXJ0ZXhPZlRhcmdldC5ZOw0KICAgICAgICAgIGxldCBkeTIgPSBuZWFyZXN0VmVydGV4T2ZU
YW5rLlkgLSBuZWFyZXN0VmVydGV4Llk7DQogICAgICAgICAgaWYgKHRoaXMuaW5EYW5nZXJB
cmVhKHRoaXMuc3ZNeVRhbmssIHRhcmdldFRhbmspKSB7DQogICAgICAgICAgICAgIC8vIOS4
pOiAhei3neemu+Wwj+S6juWuieWFqOi3neemuw0KICAgICAgICAgICAgICBpZiAoKGR4MSAq
IGR4MiA+IDAgJiYgTWF0aC5hYnMoZHgxKSA8IE1hdGguYWJzKGR4MikpIHx8IChkeTEgKiBk
eTIgPiAwICYmIE1hdGguYWJzKGR5MSkgPCBNYXRoLmFicyhkeTIpKSkgew0KICAgICAgICAg
ICAgICAgICAgLy8g6Zqc56KN54mp5LiO5pWM5pa55Z2m5YWL5Zyo5oiR5pa555qE5ZCM5LiA
5L6n5LiU5oiR5pa56Led56a75pWM5pa55q+U6Led56a76Zqc56KN5pu06L+R77yM5YiZ5LiN
6KaBDQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgIH0NCiAgICAgICAgICBsZXQgdGVtcERpc3RhbmNlID0gdGhpcy5nZXREaXN0YW5j
ZU9mUG9pbnRzKHRoaXMuc3ZNeVRhbmssIHtYOm1ldGFsWzBdLCBZOm1ldGFsWzFdfSk7DQog
ICAgICAgICAgaWYgKHRlbXBEaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7DQogICAgICAgICAg
ICAgIG1pbkRpc3RhbmNlID0gdGVtcERpc3RhbmNlOw0KICAgICAgICAgICAgICBiZXN0TWV0
YWwgPSBtZXRhbDsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gYmVzdE1l
dGFsOw0KICB9DQoNCiAgZ2V0TmVhcmVzdFZlcnRleE9mVGFua3ModGFuaywgY2VudGVyUG9p
bnQpIHsNCiAgICAgIGxldCBuZWFyZXN0VmVydGV4ID0ge307DQogICAgICBsZXQgdmVydGV4
MSA9IHtYOnRhbmsuWCwgWTp0YW5rLll9Ow0KICAgICAgbGV0IHZlcnRleDIgPSB7WDp0YW5r
LlggKyB0aGlzLlRBTktfV0lEVEgsIFk6dGFuay5ZfTsNCiAgICAgIGxldCB2ZXJ0ZXgzID0g
e1g6dGFuay5YICsgdGhpcy5UQU5LX1dJRFRILCBZOnRhbmsuWSArIHRoaXMuVEFOS19XSURU
SH07DQogICAgICBsZXQgdmVydGV4NCA9IHtYOnRhbmsuWCwgWTp0YW5rLlkgKyB0aGlzLlRB
TktfV0lEVEh9Ow0KICAgICAgbGV0IHZlcnRleHMgPSBbdmVydGV4MSwgdmVydGV4MiwgdmVy
dGV4MywgdmVydGV4NF07DQoNCiAgICAgIGxldCBtaW5EaXN0YW5jZSA9IHRoaXMuTUFYX0RJ
U1RBTkNFOw0KICAgICAgZm9yKGxldCBpPTA7aTx2ZXJ0ZXhzLmxlbmd0aDtpKyspIHsNCiAg
ICAgICAgICBsZXQgdmVydGV4ID0gdmVydGV4c1tpXTsNCiAgICAgICAgICBsZXQgZGlzdGFu
Y2UgPSB0aGlzLmdldERpc3RhbmNlT2ZQb2ludHMoe1g6Y2VudGVyUG9pbnQuWCwgWTpjZW50
ZXJQb2ludC5ZfSwgdmVydGV4KTsNCiAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5EaXN0
YW5jZSkgew0KICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlOw0KICAgICAg
ICAgICAgICBuZWFyZXN0VmVydGV4ID0gdmVydGV4Ow0KICAgICAgICAgIH0NCiAgICAgIH0N
CiAgICAgIHJldHVybiBuZWFyZXN0VmVydGV4Ow0KICB9DQoNCiAgZ2V0TmVhcmVzdFZlcnRl
eE9mVGFuayh0YW5rLCBtZXRhbCkgew0KICAgICAgbGV0IG5lYXJlc3RWZXJ0ZXggPSB7fTsN
CiAgICAgIGxldCB2ZXJ0ZXgxID0ge1g6dGFuay5YLCBZOnRhbmsuWX07DQogICAgICBsZXQg
dmVydGV4MiA9IHtYOnRhbmsuWCArIHRoaXMuVEFOS19XSURUSCwgWTp0YW5rLll9Ow0KICAg
ICAgbGV0IHZlcnRleDMgPSB7WDp0YW5rLlggKyB0aGlzLlRBTktfV0lEVEgsIFk6dGFuay5Z
ICsgdGhpcy5UQU5LX1dJRFRIfTsNCiAgICAgIGxldCB2ZXJ0ZXg0ID0ge1g6dGFuay5YLCBZ
OnRhbmsuWSArIHRoaXMuVEFOS19XSURUSH07DQogICAgICBsZXQgdmVydGV4cyA9IFt2ZXJ0
ZXgxLCB2ZXJ0ZXgyLCB2ZXJ0ZXgzLCB2ZXJ0ZXg0XTsNCg0KICAgICAgbGV0IG1pbkRpc3Rh
bmNlID0gdGhpcy5NQVhfRElTVEFOQ0U7DQogICAgICBmb3IobGV0IGk9MDtpPHZlcnRleHMu
bGVuZ3RoO2krKykgew0KICAgICAgICAgIGxldCB2ZXJ0ZXggPSB2ZXJ0ZXhzW2ldOw0KICAg
ICAgICAgIGxldCBkaXN0YW5jZSA9IHRoaXMuZ2V0RGlzdGFuY2VPZlBvaW50cyh7WDptZXRh
bFswXSt0aGlzLk1FVEFMX1dJRFRILzIsIFk6bWV0YWxbMV0rdGhpcy5NRVRBTF9XSURUSC8y
fSwgdmVydGV4KTsNCiAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkgew0K
ICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlOw0KICAgICAgICAgICAgICBu
ZWFyZXN0VmVydGV4ID0gdmVydGV4Ow0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJl
dHVybiBuZWFyZXN0VmVydGV4Ow0KICB9DQoNCiAgZ2V0TmVhcmVzdFZlcnRleE9mTWV0YWwo
bWV0YWwpIHsNCiAgICAgIGxldCBuZWFyZXN0VmVydGV4ID0ge307DQogICAgICBsZXQgdmVy
dGV4MSA9IHtYOm1ldGFsWzBdLCBZOm1ldGFsWzFdfTsNCiAgICAgIGxldCB2ZXJ0ZXgyID0g
e1g6bWV0YWxbMF0gKyB0aGlzLk1FVEFMX1dJRFRILCBZOm1ldGFsWzFdfTsNCiAgICAgIGxl
dCB2ZXJ0ZXgzID0ge1g6bWV0YWxbMF0gKyB0aGlzLk1FVEFMX1dJRFRILCBZOm1ldGFsWzFd
ICsgdGhpcy5NRVRBTF9XSURUSH07DQogICAgICBsZXQgdmVydGV4NCA9IHtYOm1ldGFsWzBd
LCBZOm1ldGFsWzFdICsgdGhpcy5NRVRBTF9XSURUSH07DQogICAgICBsZXQgdmVydGV4cyA9
IFt2ZXJ0ZXgxLCB2ZXJ0ZXgyLCB2ZXJ0ZXgzLCB2ZXJ0ZXg0XTsNCg0KICAgICAgbGV0IG1p
bkRpc3RhbmNlID0gdGhpcy5NQVhfRElTVEFOQ0U7DQogICAgICBmb3IobGV0IGk9MDtpPHZl
cnRleHMubGVuZ3RoO2krKykgew0KICAgICAgICAgIGxldCB2ZXJ0ZXggPSB2ZXJ0ZXhzW2ld
Ow0KICAgICAgICAgIC8vIOiuoeeul+S4reeCueS4juWQhOmhtueCueeahOi3neemuw0KICAg
ICAgICAgIGxldCBkaXN0YW5jZSA9IHRoaXMuZ2V0RGlzdGFuY2VPZlBvaW50cyh7WDp0aGlz
LnN2TXlUYW5rLlgrdGhpcy5UQU5LX1dJRFRILzIsIFk6dGhpcy5zdk15VGFuay5ZK3RoaXMu
VEFOS19XSURUSC8yfSwgdmVydGV4KTsNCiAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5E
aXN0YW5jZSkgew0KICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlOw0KICAg
ICAgICAgICAgICBuZWFyZXN0VmVydGV4ID0gdmVydGV4Ow0KICAgICAgICAgIH0NCiAgICAg
IH0NCiAgICAgIHJldHVybiBuZWFyZXN0VmVydGV4Ow0KICB9DQoNCiAgY2hlY2tJZk5lZWRU
dXJuRGlyZWN0aW9uKGRpcmVjdGlvbikgew0KICAgICAgbGV0IGNvcHlPZlRhbmsgPSB0aGlz
LmNvcHlPZlRhbmsodGhpcy5zdk15VGFuayk7DQogICAgICBjb3B5T2ZUYW5rLmRpcmVjdGlv
biA9IGRpcmVjdGlvbjsNCiAgICAgIGxldCBwb2ludCA9IHRoaXMuaW1hZ2luZU1vdmUoMSwg
Y29weU9mVGFuaywgdHJ1ZSk7DQogICAgICBpZiAocG9pbnQuWCA9PT0gY29weU9mVGFuay5Y
ICYmIHBvaW50LlkgPT09IGNvcHlPZlRhbmsuWSkgew0KICAgICAgICAgIGRpcmVjdGlvbiA9
IHRoaXMudHVybkRpcmVjdGlvbldoZW5Db2xsaWRlKGRpcmVjdGlvbik7DQogICAgICB9DQog
ICAgICByZXR1cm4gZGlyZWN0aW9uOw0KICB9DQoNCiAgdHVybkRpcmVjdGlvbldoZW5Db2xs
aWRlKGRpcmVjdGlvbikgew0KICAgICAgbGV0IGZpbmFsRGlyZWN0aW9uOw0KICAgICAgc3dp
dGNoIChkaXJlY3Rpb24pIHsNCiAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLlVQOg0K
ICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgaWYg
KHRoaXMuc3ZNeVRhbmsuWCA8IGNhbnZhcy53aWR0aC8yKSB7DQogICAgICAgICAgICAgICAg
ICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJ
UkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGJyZWFrOw0K
ICAgICAgICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uTEVGVDoNCiAgICAgICAgICBjYXNlIHRo
aXMuRElSRUNUSU9OLlJJR0hUOg0KICAgICAgICAgICAgICBpZiAodGhpcy5zdk15VGFuay5Y
IDwgY2FudmFzLmhlaWdodC8yKSB7DQogICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlv
biA9IHRoaXMuRElSRUNUSU9OLkRPV047DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAg
ICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgICAgcmV0
dXJuIGZpbmFsRGlyZWN0aW9uOw0KICB9DQoNCiAgc3RvcEFuZEZpcmUoZHgsIGR5KSB7DQog
ICAgICAvLyDmlLvlh7vljLrln5/vvIzlgZzmraLlubbmlLvlh7sg6KaB6ICD6JmR5pa55ZCR
DQogICAgICBsZXQgYWJzRFggPSBNYXRoLmFicyhkeCk7DQogICAgICBsZXQgYWJzRHkgPSBN
YXRoLmFicyhkeSk7DQogICAgICBpZiAoYWJzRFggPiBhYnNEeSkgew0KICAgICAgICAgIGlm
IChkeCA+IDApIHsNCiAgICAgICAgICAgICAgLy8g5oiR5pa55Zyo5Y+z6L65DQogICAgICAg
ICAgICAgIGlmICh0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbiA9PT0gdGhpcy5ESVJFQ1RJT04u
TEVGVCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlNUT1A7
DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gdGhp
cy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgIC8vIOaIkeaWueWcqOW3pui+uQ0KICAgICAgICAgICAgICBpZiAo
dGhpcy5zdk15VGFuay5kaXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLlJJR0hUKSB7DQog
ICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uU1RPUDsNCiAgICAgICAg
ICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElP
Ti5SSUdIVDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAgICBpZiAodGhpcy5zdk15
VGFuay5kaXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLlVQKSB7DQogICAgICAgICAgICAg
ICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uU1RPUDsNCiAgICAgICAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGlmICh0aGlz
LnN2TXlUYW5rLmRpcmVjdGlvbiA9PT0gdGhpcy5ESVJFQ1RJT04uRE9XTikgew0KICAgICAg
ICAgICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlNUT1A7DQogICAgICAgICAgICAg
IH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uRE9X
TjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgfQ0KDQogIHN1
cGVyQXR0YWNrKGR4LCBkeSkgew0KICAgICAgaWYgKHRoaXMuc3VwZXJBdHRhY2tEaXJlY3Rp
b25zLmxlbmd0aCA+IDAgJiYgdGhpcy5maXJzdEF0dGFja0xvb3BDb3VudCA+IDApIHsNCiAg
ICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmxvb3BDb3VudCAtIHRoaXMuZmlyc3RBdHRhY2tM
b29wQ291bnQ7DQogICAgICAgICAgaWYgKGluZGV4IDwgdGhpcy5zdXBlckF0dGFja0RpcmVj
dGlvbnMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cGVyQXR0YWNr
RGlyZWN0aW9uc1tpbmRleF07DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAg
dGhpcy5zdXBlckF0dGFja0RpcmVjdGlvbnMgPSBbXTsNCiAgICAgICAgICAgICAgdGhpcy5m
aXJzdEF0dGFja0xvb3BDb3VudCA9IDA7DQogICAgICAgICAgICAgIHRoaXMuaW5TdXBlckF0
dGFja01vZGUgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICB9IA0KICAgICAgbGV0IGFi
c0RYID0gTWF0aC5hYnMoZHgpOw0KICAgICAgbGV0IGFic0R5ID0gTWF0aC5hYnMoZHkpOw0K
ICAgICAgbGV0IGZpcnN0RGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uU1RPUDsNCiAgICAg
IGxldCBhZnRlckRpcmVjdGlvbnMgPSB0aGlzLkRJUkVDVElPTi5TVE9QOw0KICAgICAgLy8g
6YeN5ZCI77yM5byA54GrDQogICAgICBpZiAoYWJzRFggPiBhYnNEeSkgew0KICAgICAgICAg
IGlmIChkeCA+IDApIHsNCiAgICAgICAgICAgICAgLy8g5oiR5pa55Zyo5Y+z6L65DQogICAg
ICAgICAgICAgIGZpcnN0RGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAg
ICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjlt6bovrkNCiAgICAg
ICAgICAgICAgZmlyc3REaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAg
ICAgICB9DQogICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAgICBhZnRlckRp
cmVjdGlvbnMgPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICBhZnRlckRpcmVjdGlvbnMgPSB0aGlzLkRJUkVDVElPTi5ET1dOOw0KICAg
ICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAg
ICAgICAgICAgICBmaXJzdERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGZpcnN0RGlyZWN0aW9uID0gdGhpcy5ESVJF
Q1RJT04uRE9XTjsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAg
ICAgICAgICAgICBhZnRlckRpcmVjdGlvbnMgPSB0aGlzLkRJUkVDVElPTi5MRUZUOw0KICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGFmdGVyRGlyZWN0aW9ucyA9IHRoaXMu
RElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHZhciBicmVh
a2VkID0gZmFsc2U7DQogICAgICBmb3IobGV0IGo9MDtqPDUgJiYgIWJyZWFrZWQ7aisrKSB7
DQogICAgICAgICAgdGhpcy5zdXBlckF0dGFja0RpcmVjdGlvbnMucHVzaChbZmlyc3REaXJl
Y3Rpb24sIHRydWVdKTsNCiAgICAgICAgICBmb3IobGV0IGk9MDsgaTw2OyBpKyspIHsNCiAg
ICAgICAgICAgICAgdmFyIGNvcHlPZk15VGFuayA9IHRoaXMuY29weU9mVGFuayh0aGlzLnN2
TXlUYW5rKTsNCiAgICAgICAgICAgICAgY29weU9mTXlUYW5rLmRpcmVjdGlvbiA9IGFmdGVy
RGlyZWN0aW9uczsNCiAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBqICogNiArIGk7DQogICAg
ICAgICAgICAgIHZhciB0YW5rQWZ0ZXJNb3ZlID0gdGhpcy5pbWFnaW5lTW92ZShzdGVwLCBj
b3B5T2ZNeVRhbmssIHRydWUpOw0KICAgICAgICAgICAgICBpZiAoKGFmdGVyRGlyZWN0aW9u
cyA9PT0gdGhpcy5ESVJFQ1RJT04uVVAgJiYgdGFua0FmdGVyTW92ZS5ZIDw9IDApDQogICAg
ICAgICAgICAgICAgICB8fCAoYWZ0ZXJEaXJlY3Rpb25zID09PSB0aGlzLkRJUkVDVElPTi5E
T1dOICYmIHRhbmtBZnRlck1vdmUuWSA+PSBjYW52YXMuaGVpZ2h0LXRoaXMuVEFOS19XSURU
SCkNCiAgICAgICAgICAgICAgICAgIHx8IChhZnRlckRpcmVjdGlvbnMgPT09IHRoaXMuRElS
RUNUSU9OLkxFRlQgJiYgdGFua0FmdGVyTW92ZS5YIDw9IDApDQogICAgICAgICAgICAgICAg
ICB8fCAoYWZ0ZXJEaXJlY3Rpb25zID09PSB0aGlzLkRJUkVDVElPTi5SSUdIVCAmJiB0YW5r
QWZ0ZXJNb3ZlLlggPj0gY2FudmFzLndpZHRoLXRoaXMuVEFOS19XSURUSCkpIHsNCiAgICAg
ICAgICAgICAgICAgICAgICBicmVha2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAg
ICBicmVhazsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLnN1cGVyQXR0
YWNrRGlyZWN0aW9ucy5wdXNoKFthZnRlckRpcmVjdGlvbnMsIGZhbHNlXSk7ICAgIA0KICAg
ICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuZmlyc3RBdHRhY2tMb29wQ291bnQgPSB0
aGlzLmxvb3BDb3VudDsNCiAgICAgIHJldHVybiBbZmlyc3REaXJlY3Rpb24sIHRydWVdOw0K
ICB9DQoNCiAgbmVhckF0dGFjayhkeCwgZHkpIHsNCiAgICAgIGxldCBmaW5hbERpcmVjdGlv
biA9IHRoaXMuRElSRUNUSU9OLlNUT1A7DQogICAgICBsZXQgYWJzRHggPSBNYXRoLmFicyhk
eCk7DQogICAgICBsZXQgYWJzRHkgPSBNYXRoLmFicyhkeSk7DQogICAgICBpZiAoYWJzRHgg
PCBhYnNEeSkgew0KICAgICAgICAgIGlmIChkeCA+IDApIHsNCiAgICAgICAgICAgICAgZmlu
YWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICB9IGVsc2Ug
ew0KICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7
DQogICAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoZHkgPiAwKSB7
DQogICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsN
CiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRo
aXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuZmly
ZUlnbm9yZURpcmVjdGlvbiA9IHRydWU7DQogICAgICByZXR1cm4gW2ZpbmFsRGlyZWN0aW9u
LCBmYWxzZV07DQogIH0NCg0KICBwdXJlQXR0YWNrKGR4LCBkeSkgew0KICAgICAgLy8g5pS7
5Ye75Yy65Z+f77yM5YGc5q2i5bm25pS75Ye7IOimgeiAg+iZkeaWueWQkQ0KICAgICAgbGV0
IGFic0RYID0gTWF0aC5hYnMoZHgpOw0KICAgICAgbGV0IGFic0R5ID0gTWF0aC5hYnMoZHkp
Ow0KDQogICAgICBpZiAoYWJzRFggPiBhYnNEeSkgew0KICAgICAgICAgIGlmIChkeCA+PSB0
aGlzLm1pbkF0dGFja0Rpc3RhbmNlKSB7DQogICAgICAgICAgICAgIC8vIOaIkeaWueWcqOWP
s+i+uQ0KICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAg
ICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjlt6bovrkNCiAgICAg
ICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgIH0NCiAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGR5ID49IHRoaXMubWluQXR0YWNrRGlzdGFu
Y2UpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAg
ICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5ET1dO
Ow0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgfQ0KDQogIGF0dGFjayhkeCwgZHkpIHsNCiAg
ICAgIC8vIOaUu+WHu+WMuuWfn++8jOWBnOatouW5tuaUu+WHuyDopoHogIPomZHmlrnlkJEN
CiAgICAgIGxldCBhYnNEWCA9IE1hdGguYWJzKGR4KTsNCiAgICAgIGxldCBhYnNEeSA9IE1h
dGguYWJzKGR5KTsNCg0KICAgICAgbGV0IHRhcmdldFRhbmsgPSB0aGlzLnRhcmdldFRhbmtJ
bmZvWzJdOw0KICAgICAgaWYgKGFic0RYID4gYWJzRHkpIHsNCiAgICAgICAgICBpZihhYnNE
eSA+PSB0aGlzLk1JTl9GSVJFX09GRlNFVC03ICYmIGFic0RYIDw9IDg0KSB7DQogICAgICAg
ICAgICAgIGlmICgoZHggPCAwICYmIHRhcmdldFRhbmsuZGlyZWN0aW9uID09PSB0aGlzLkRJ
UkVDVElPTi5MRUZUKSB8fCAoZHggPiAwICYmIHRhcmdldFRhbmsuZGlyZWN0aW9uID09PSB0
aGlzLkRJUkVDVElPTi5SSUdIVCkpIHsNCiAgICAgICAgICAgICAgICAgIGlmIChkeSA+IDAp
IHsNCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uRE9XTjsN
CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgcmV0
dXJuIHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChkeCA+PSB0aGlzLm1pbkF0dGFj
a0Rpc3RhbmNlKSB7DQogICAgICAgICAgICAgIC8vIOaIkeaWueWcqOWPs+i+uQ0KICAgICAg
ICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICB9IGVsc2Ug
ew0KICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjlt6bovrkNCiAgICAgICAgICAgICAgcmV0
dXJuIHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgIH0NCiAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgaWYgKGFic0RYID49IHRoaXMuTUlOX0ZJUkVfT0ZGU0VULTcgICYmIGFi
c0R5IDw9IDg0KSB7DQogICAgICAgICAgICAgIGlmIChkeSA8IDAgJiYgdGFyZ2V0VGFuay5k
aXJlY3Rpb24gPT09IHRoaXMuRElSRUNUSU9OLlVQIHx8IGR5ID4gMCAmJiB0YXJnZXRUYW5r
LmRpcmVjdGlvbiA9PT0gdGhpcy5ESVJFQ1RJT04uRE9XTikgew0KICAgICAgICAgICAgICAg
ICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRJ
UkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gdGhpcy5ESVJFQ1RJT04uUklHSFQ7DQogICAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGR5
ID49IHRoaXMubWluQXR0YWNrRGlzdGFuY2UpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRo
aXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHJl
dHVybiB0aGlzLkRJUkVDVElPTi5ET1dOOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgfQ0K
DQogIGlzVGFyZ2V0RGFuZ2Vyb3VzRGlyZWN0aW9uKHRhcmdldFRhbmssIGR4LCBkeSkgew0K
ICAgICAgc3dpdGNoKHRhcmdldFRhbmsuZGlyZWN0aW9uKSB7DQogICAgICAgICAgY2FzZSB0
aGlzLkRJUkVDVElPTi5VUDoNCiAgICAgICAgICAgICAgaWYgKGR5IDwgMCAmJiBNYXRoLmFi
cyhkeCkgPCAzMCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAg
ICAgICAgIH0gDQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgdGhpcy5E
SVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgaWYgKGR5ID4gMCAmJiBNYXRoLmFicyhk
eCkgPCAzMCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSB0aGlzLkRJUkVD
VElPTi5MRUZUOg0KICAgICAgICAgICAgICBpZiAoZHggPCAwICYmIE1hdGguYWJzKGR5KSA8
IDMwKSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9O
LlJJR0hUOg0KICAgICAgICAgICAgICBpZiAoZHggPiAwICYmIE1hdGguYWJzKGR5KSA8IDMw
KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAg
fQ0KDQoNCiAgYWZ0ZXJTdGVwT25lKGR4LCBkeSkgew0KICAgICAgbGV0IHNob3VsZEZpcmUg
PSBmYWxzZTsNCiAgICAgIGxldCBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlNU
T1A7DQoNCiAgICAgIGxldCB0YXJnZXRUYW5rID0gdGhpcy50YXJnZXRUYW5rSW5mb1syXTsN
CiAgICAgIGlmICh0YXJnZXRUYW5rLlggPT09IDApIHsNCiAgICAgICAgICBpZiAodGFyZ2V0
VGFuay5ZID09PSAwIHx8IHRhcmdldFRhbmsuWSA9PT0gY2FudmFzLmhlaWdodC10aGlzLlRB
TktfV0lEVEgpIHsNCiAgICAgICAgICAgICAgc2hvdWxkRmlyZSA9IHRydWU7DQogICAgICAg
ICAgfQ0KICAgICAgfQ0KDQogICAgICBpZiAodGFyZ2V0VGFuay5YID09PSBjYW52YXMud2lk
dGgtdGhpcy5UQU5LX1dJRFRIKSB7DQogICAgICAgICAgaWYgKHRhcmdldFRhbmsuWSA9PT0g
MCB8fCB0YXJnZXRUYW5rLlkgPT09IGNhbnZhcy5oZWlnaHQtdGhpcy5UQU5LX1dJRFRIKSB7
DQogICAgICAgICAgICAgIHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgICAgIH0NCiAgICAg
IH0NCg0KICAgICAgaWYgKCFzaG91bGRGaXJlICYmIHRoaXMuaXNUYXJnZXREYW5nZXJvdXNE
aXJlY3Rpb24odGFyZ2V0VGFuaywgZHgsIGR5KSkgew0KICAgICAgICAgIC8vIOS4pOatpemd
nuW/headgOeahOaDheWGteimgeWIpOaWreaVjOaWueWdpuWFi+aYr+WQpui9rOWQkeS6hu+8
jOWmguaenOi9rOWQkeS6hui3n+aIkeaWueebuOWvueeahOaWueWQke+8jOWImeW8gOeBqw0K
ICAgICAgICAgIC8vIOaVjOaWueiwg+i9rOaWueWQkeWHhuWkh+aJk+aIkeS7rO+8jOaIkeS7
rOS5n+W8gOeBqw0KICAgICAgICAgIHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgfQ0KDQog
ICAgICBsZXQgYWJzRFggPSBNYXRoLmFicyhkeCk7DQogICAgICBsZXQgYWJzRHkgPSBNYXRo
LmFicyhkeSk7DQogICAgICBpZiAoc2hvdWxkRmlyZSkgew0KICAgICAgICAgIGlmIChhYnNE
WCA8IDMwICYmIGFic0R5IDwgMzApIHsNCiAgICAgICAgICAgICAgLy8g5Lik5Liq5pa55ZCR
6YO95Y+v5omT77yM5YiZ6YCJ5oup5LiO5b2T5YmN5pa55ZCR55u45ZCM55qE5pa55ZCRDQog
ICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24xID0gdGhpcy5ESVJFQ1RJT04uU1RPUDsNCiAg
ICAgICAgICAgICAgbGV0IGRpcmVjdGlvbjIgPSB0aGlzLkRJUkVDVElPTi5TVE9QOw0KICAg
ICAgICAgICAgICBpZiAoZHggPj0gdGhpcy5taW5BdHRhY2tEaXN0YW5jZSkgew0KICAgICAg
ICAgICAgICAgICAgLy8g5oiR5pa55Zyo5Y+z6L65DQogICAgICAgICAgICAgICAgICBkaXJl
Y3Rpb24xID0gdGhpcy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAgICAgICAgIC8vIOaIkeaWueWcqOW3pui+uQ0KICAgICAgICAgICAgICAg
ICAgZGlyZWN0aW9uMSA9IHRoaXMuRElSRUNUSU9OLlJJR0hUOw0KICAgICAgICAgICAgICB9
DQogIA0KICAgICAgICAgICAgICBpZiAoZHkgPj0gdGhpcy5taW5BdHRhY2tEaXN0YW5jZSkg
ew0KICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uMiA9IHRoaXMuRElSRUNUSU9OLlVQOw0K
ICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uMiA9
IHRoaXMuRElSRUNUSU9OLkRPV047DQogICAgICAgICAgICAgIH0NCiAgDQogICAgICAgICAg
ICAgIGlmICh0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbiA9PT0gZGlyZWN0aW9uMSkgew0KICAg
ICAgICAgICAgICAgICAgcmV0dXJuIFtkaXJlY3Rpb24xLCB0cnVlXTsNCiAgICAgICAgICAg
ICAgfSBlbHNlIGlmICh0aGlzLnN2TXlUYW5rLmRpcmVjdGlvbiA9PT0gZGlyZWN0aW9uMikg
ew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIFtkaXJlY3Rpb24yLCB0cnVlXTsNCiAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgIH0NCg0KDQogICAgICAvLyBUT0RPIFND
SiDliKTmlq3lr7nmiYvmlrnlrZDlvLnmlbDph4/lj4rmtojlpLHml7bpl7TvvIzlhrPlrprm
mK/lkKbopoHov5vlhaXmlLvlh7vojIPlm7QNCiAgICAgIC8vIOWvueaJi+aWueaKiuWtkOW8
ueaJk+WujCzmm7TmlLnmnIDlsI/ot53nprsNCiAgICAgIGlmICh0aGlzLmVuZW15QnVsbGV0
cy5sZW5ndGggPT09IDUpIHsNCiAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuYXR0
YWNrKGR4LCBkeSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAgIHN3aXRjaCh0YXJnZXRU
YW5rLmRpcmVjdGlvbikgew0KICAgICAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLlVQ
Og0KICAgICAgICAgICAgICAgICAgaWYgKGR5IDwgMCkgew0KICAgICAgICAgICAgICAgICAg
ICAgIGlmIChhYnNEeSA8IDMwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHNob3Vs
ZEZpcmUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAg
ICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkRPV047DQogICAgICAg
ICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0
aW9uID0gdGhpcy5wdXJlQXR0YWNrKGR4LCBkeSk7DQogICAgICAgICAgICAgICAgICB9DQog
ICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgY2FzZSB0aGlzLkRJUkVD
VElPTi5ET1dOOg0KICAgICAgICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAg
ICAgICAgICAgICAgIGlmIChhYnNEeSA8IDMwKSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICAgIHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0K
ICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICBmaW5h
bERpcmVjdGlvbiA9IHRoaXMucHVyZUF0dGFjayhkeCwgZHkpOw0KICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgdGhp
cy5ESVJFQ1RJT04uTEVGVDoNCiAgICAgICAgICAgICAgICAgIGlmIChkeCA8IDApIHsNCiAg
ICAgICAgICAgICAgICAgICAgICBpZiAoYWJzRFggPCAzMCkgew0KICAgICAgICAgICAgICAg
ICAgICAgICAgICBzaG91bGRGaXJlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElP
Ti5SSUdIVDsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAg
ICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLnB1cmVBdHRhY2soZHgsIGR5KTsNCiAgICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAg
ICBjYXNlIHRoaXMuRElSRUNUSU9OLlJJR0hUOg0KICAgICAgICAgICAgICAgICAgaWYgKGR4
ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChhYnNEWCA8IDMwKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEZpcmUgPSB0cnVlOw0KICAgICAgICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRo
aXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAg
ICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhpcy5wdXJlQXR0YWNrKGR4LCBk
eSk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAg
ICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHJldHVybiBbZmluYWxEaXJlY3Rpb24sIHNo
b3VsZEZpcmVdOw0KICB9DQoNCiAgdmVyeUNhdXRpb25BdHRhY2soZHgsIGR5KSB7DQoNCiAg
ICAgIGxldCBhYnNEWCA9IE1hdGguYWJzKGR4KTsNCiAgICAgIGxldCBhYnNEeSA9IE1hdGgu
YWJzKGR5KTsNCg0KICAgICAgbGV0IHNob3VsZEZpcmUgPSBmYWxzZTsNCg0KICAgICAgbGV0
IHRhcmdldFRhbmsgPSB0aGlzLnRhcmdldFRhbmtJbmZvWzJdOw0KICAgICAgaWYgKHRhcmdl
dFRhbmsuWCA9PT0gMCkgew0KICAgICAgICAgIGlmICh0YXJnZXRUYW5rLlkgPT09IDAgfHwg
dGFyZ2V0VGFuay5ZID09PSBjYW52YXMuaGVpZ2h0LXRoaXMuVEFOS19XSURUSCkgew0KICAg
ICAgICAgICAgICBzaG91bGRGaXJlID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICB9DQoN
CiAgICAgIGlmICh0YXJnZXRUYW5rLlggPT09IGNhbnZhcy53aWR0aC10aGlzLlRBTktfV0lE
VEgpIHsNCiAgICAgICAgICBpZiAodGFyZ2V0VGFuay5ZID09PSAwIHx8IHRhcmdldFRhbmsu
WSA9PT0gY2FudmFzLmhlaWdodC10aGlzLlRBTktfV0lEVEgpIHsNCiAgICAgICAgICAgICAg
c2hvdWxkRmlyZSA9IHRydWU7DQogICAgICAgICAgfQ0KICAgICAgfQ0KDQoNCiAgICAgIGxl
dCBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlNUT1A7DQogICAgICBzd2l0Y2go
dGFyZ2V0VGFuay5kaXJlY3Rpb24pIHsNCiAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9O
LlVQOg0KICAgICAgICAgICAgICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAgICAgICAv
LyDmiJHmlrnlnKjkuIvpnaLvvIzlj6/ku6Xpmo/kvr/otbANCiAgICAgICAgICAgICAgICAg
IGlmIChhYnNEWCA+IGFic0R5KSB7DQogICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJl
Y3Rpb24gPSB0aGlzLkRJUkVDVElPTi5VUDsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgICAgICAg
ICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7DQogICAg
ICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkRP
V047DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAg
Y2FzZSB0aGlzLkRJUkVDVElPTi5ET1dOOg0KICAgICAgICAgICAgICBpZiAoZHkgPCAwKSB7
DQogICAgICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjkuIrpnaLvvIzlj6/ku6Xpmo/kvr/o
tbANCiAgICAgICAgICAgICAgICAgIGlmIChhYnNEWCA+IGFic0R5KSB7DQogICAgICAgICAg
ICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5ET1dOOw0KICAg
ICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoZHgg
PiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0aW9uID0gdGhp
cy5ESVJFQ1RJT04uTEVGVDsNCiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9O
LlJJR0hUOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0N
CiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGZpbmFsRGlyZWN0
aW9uID0gdGhpcy5ESVJFQ1RJT04uVVA7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgYnJlYWs7DQogICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5MRUZUOg0KICAgICAg
ICAgICAgICBpZiAoZHggPiAwKSB7DQogICAgICAgICAgICAgICAgICAvLyDmiJHmlrnlnKjl
j7PpnaLvvIzlj6/ku6Xpmo/kvr/otbANCiAgICAgICAgICAgICAgICAgIGlmIChhYnNEeSA+
IGFic0RYKSB7DQogICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rpb24gPSB0aGlz
LkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAg
ICAgICAgICAgICAgICBpZiAoZHkgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAg
IGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uVVA7DQogICAgICAgICAgICAgICAg
ICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJlY3Rp
b24gPSB0aGlzLkRJUkVDVElPTi5ET1dOOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAg
ICAgICAgIHJldHVybiB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLlJJ
R0hUOg0KICAgICAgICAgICAgICBpZiAoZHggPCAwKSB7DQogICAgICAgICAgICAgICAgICAv
LyDmiJHmlrnlnKjlt6bpnaLvvIzlj6/ku6Xpmo/kvr/otbANCiAgICAgICAgICAgICAgICAg
IGlmIChhYnNEeSA+IGFic0RYKSB7DQogICAgICAgICAgICAgICAgICAgICAgZmluYWxEaXJl
Y3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgICAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAg
ICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAg
IGZpbmFsRGlyZWN0aW9uID0gdGhpcy5ESVJFQ1RJT04uRE9XTjsNCiAgICAgICAgICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICBmaW5hbERpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxF
RlQ7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICB9DQoN
CiAgICAgIHJldHVybiBbZmluYWxEaXJlY3Rpb24sIHNob3VsZEZpcmVdOw0KICB9DQoNCiAg
ZXNjYXBlRm9yQXBwcm9hY2goZHgsIGR5KSB7DQogICAgICBsZXQgZGlyZWN0aW9uOw0KICAg
ICAgbGV0IGFic0R4ID0gTWF0aC5hYnMoZHgpOw0KICAgICAgbGV0IGFic0R5ID0gTWF0aC5h
YnMoZHkpOw0KICAgICAgaWYgKGFic0R4ID49IGFic0R5KSB7DQogICAgICAgICAgaWYgKGR4
ID4gMCkgew0KICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdI
VDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlz
LkRJUkVDVElPTi5MRUZUOw0KICAgICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgaWYgKGR5ID4gMCkgew0KICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLkRJUkVD
VElPTi5ET1dOOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGRpcmVjdGlv
biA9IHRoaXMuRElSRUNUSU9OLlVQOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJl
dHVybiB0aGlzLmNoZWNrSWZOZWVkVHVybkRpcmVjdGlvbihkaXJlY3Rpb24pOw0KICB9DQoN
CiAgZ29BbmRGaXJlKGR4LCBkeSkgew0KICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuRElS
RUNUSU9OLlNUT1A7DQogICAgICBpZiAoZHggPj0gdGhpcy5GSVJFX01BWF9ESVNUQU5DRSkg
ew0KICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuRElSRUNUSU9OLkxFRlQ7DQogICAgICB9
DQogICAgICBpZiAoZHggPD0gLXRoaXMuRklSRV9NQVhfRElTVEFOQ0UpIHsNCiAgICAgICAg
ICBkaXJlY3Rpb24gPSB0aGlzLkRJUkVDVElPTi5SSUdIVDsNCiAgICAgIH0NCiAgICAgIGlm
IChkeSA+PSB0aGlzLkZJUkVfTUFYX0RJU1RBTkNFKSB7DQogICAgICAgICAgZGlyZWN0aW9u
ID0gdGhpcy5ESVJFQ1RJT04uVVA7DQogICAgICB9DQogICAgICBpZiAoZHkgPD0gLXRoaXMu
RklSRV9NQVhfRElTVEFOQ0UpIHsNCiAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLkRJUkVD
VElPTi5ET1dOOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGRpcmVjdGlvbjsNCiAgfQ0KDQog
IGZpbmROZWFyZXN0VGFuaygpIHsNCiAgICAgIC8vIOmSiOWvuemanOeijeeJqei/m+ihjOWk
hOeQhu+8jOaciemanOeijeeJqeaXtumcgOimgeeJueauiuiuoeeulw0KICAgICAgbGV0IGhp
Z2hlc3RTY29yZSA9IC10aGlzLk1BWF9ESVNUQU5DRTsNCg0KICAgICAgLy8g56a75oiR5pa5
5pyA6L+R55qEVGFua+S9jee9rg0KICAgICAgbGV0IGRpc3RhbmNlVmVyID0gY2FudmFzLmhl
aWdodDsNCiAgICAgIGxldCBkaXN0YW5jZUhvciA9IGNhbnZhcy53aWR0aDsNCg0KICAgICAg
bGV0IG5lYXJlc3RUYW5rOw0KDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWxs
RW5lbXlUYW5rLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IHRhbmsgPSB0aGlzLmFs
bEVuZW15VGFua1tpXTsNCiAgICAgICAgICAvLyDmlYzmlrnlnablhYsNCiAgICAgICAgICBs
ZXQgZHggPSB0aGlzLnN2TXlUYW5rLlggLSB0YW5rLlg7DQogICAgICAgICAgbGV0IGR5ID0g
dGhpcy5zdk15VGFuay5ZIC0gdGFuay5ZOw0KDQogICAgICAgICAgbGV0IHNjb3JlID0gdGhp
cy5zY29yZU9mVGFuayh0YW5rKTsNCiAgICAgICAgICANCg0KICAgICAgICAgIGlmIChzY29y
ZSA+IGhpZ2hlc3RTY29yZSkgew0KICAgICAgICAgICAgICBoaWdoZXN0U2NvcmUgPSBzY29y
ZTsNCiAgICAgICAgICAgICAgZGlzdGFuY2VIb3IgPSBkeDsNCiAgICAgICAgICAgICAgZGlz
dGFuY2VWZXIgPSBkeTsNCiAgICAgICAgICAgICAgbmVhcmVzdFRhbmsgPSB0YW5rOw0KICAg
ICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8vIGNvbnNvbGUubG9nKCJ0YW5rIHNjb3JlIGlz
IDogIiwgbmVhcmVzdFRhbmssIGhpZ2hlc3RTY29yZSkNCiAgICAgIHJldHVybiBbZGlzdGFu
Y2VIb3IsIGRpc3RhbmNlVmVyLCBuZWFyZXN0VGFua107DQogIH0NCg0KICBzY29yZU9mVGFu
ayh0YW5rKSB7DQogICAgICBsZXQgZGlzdGFuY2UgPSB0aGlzLmdldFRhbmtEaXN0YW5jZSh0
aGlzLnN2TXlUYW5rLCB0YW5rKTsNCiAgICAgIGxldCBtaW5EaXN0YW5jZU9mQm91bmRMUiA9
IE1hdGgubWluKHRhbmsuWCwgY2FudmFzLndpZHRoIC0gdGFuay5YKTsNCiAgICAgIGxldCBt
aW5EaXN0YW5jZU9mQm91bmRUQiA9IE1hdGgubWluKHRhbmsuWSwgY2FudmFzLmhlaWdodCAt
IHRhbmsuWSk7DQogICAgICBsZXQgc2NvcmUgPSAtZGlzdGFuY2UgKyBtaW5EaXN0YW5jZU9m
Qm91bmRMUi84ICsgbWluRGlzdGFuY2VPZkJvdW5kVEIvNjsNCiAgICAgIHJldHVybiBzY29y
ZTsNCiAgfQ0KDQogIGdldFRhbmtEaXN0YW5jZSh0YW5rMSwgdGFuazIpIHsNCiAgICAgIC8v
IOaVjOaWueWdpuWFiw0KICAgICAgbGV0IGR4ID0gdGFuazEuWCAtIHRhbmsyLlg7DQogICAg
ICBsZXQgZHkgPSB0YW5rMS5ZIC0gdGFuazIuWTsNCg0KICAgICAgbGV0IHJlYWxEaXN0YW5j
ZSA9IE1hdGguc3FydChNYXRoLnBvdyhkeCwgMikgKyBNYXRoLnBvdyhkeSwgMikpOw0KICAg
ICAgcmV0dXJuIHJlYWxEaXN0YW5jZTsNCiAgfQ0KDQogIC8qKg0KICAgKiDliKTmlq3kuKTk
uKrlnablhYvmmK/lkKbooqvpmpznoo3nianpmLvpmpQNCiAgICog6aaW5YWI5p6E6YCg5Lik
5Liq5Lul5Z2m5YWL5Lit5b+D54K55Li65Lit5b+D77yM5Lul5a2Q5by555u05b6E5Li66L65
6ZW/55qE5q2j5pa55b2iDQogICAqIOi/nuaOpeS4pOS4quato+aWueW9oueahOWbm+S4qumh
tueCue+8jOW9ouaIkOWbm+S4qumVv+aWueW9ou+8jOWIpOaWreWbm+S4qumVv+aWueW9ouS4
jumanOeijeeJqeeahOeisOaSnuaDheWGtQ0KICAgKiDlpoLmnpzlm5vkuKrplb/mlrnlvaLk
uK3ku7vkvZXkuIDkuKrlj5HnlJ/norDmkp7v
vIzor7TmmI7kuKTkuKrlnablhYvooqvpmLvp
mpTvvIzlkKbliJnkuI3ooqvpmLvpmpQNCiAgICogQHBhcmFtIHRhbmsxDQogICAqIEBwYXJh
bSB0YW5rMg0KICAgKi8NCiAgaXNCbG9ja0J5TWV0YWwodGFuazEsIHRhbmsyKSB7DQogICAg
ICBpZiAoIXRoaXMuaXNDb3VudGVyU3RyaWtlKCkpIHsNCiAgICAgICAgICByZXR1cm4gZmFs
c2U7DQogICAgICB9DQogICAgICAvLyDmnoTlu7rkuKTkuKrmraPmlrnlvaINCiAgICAgIGxl
dCBkZWx0YSA9ICh0aGlzLlRBTktfV0lEVEgtdGhpcy5CVUxMRVRfV0lEVEgpLzI7DQogICAg
ICBsZXQgc3F1YXJlMSA9IHtYOnRhbmsxLlgrZGVsdGEsIFk6dGFuazEuWStkZWx0YSwgUjp0
aGlzLkJVTExFVF9XSURUSH07DQogICAgICBsZXQgc3F1YXJlMiA9IHtYOnRhbmsyLlgrZGVs
dGEsIFk6dGFuazIuWStkZWx0YSwgUjp0aGlzLkJVTExFVF9XSURUSH07DQogICAgICAvLyDl
vpfliLDlm5vkuKrplb/mlrnlvaINCiAgICAgIGxldCByZWN0cyA9IHRoaXMuZ2V0Rm91clJl
Y3RPZlR3b1NxdWFyZXMoc3F1YXJlMSwgc3F1YXJlMiwgdGhpcy5CVUxMRVRfV0lEVEgpOw0K
ICAgICAgLy8g5Yik5pat6ZW/5pa55b2i5LiO6Zqc56KN54mp5piv5ZCm56Kw5pKeDQogICAg
ICBmb3IobGV0IGk9MDtpPHJlY3RzLmxlbmd0aDtpKyspIHsNCiAgICAgICAgICBsZXQgcmVj
dCA9IHJlY3RzW2ldOw0KICAgICAgICAgIGZvcihsZXQgaj0wO2o8YW1ldGFsLmxlbmd0aDtq
KyspIHsNCiAgICAgICAgICAgICAgbGV0IG1ldGFsID0gYW1ldGFsW2pdOw0KICAgICAgICAg
ICAgICBpZiAodGhpcy5yZWN0Q29sbGlzaW9uTWV0YWwocmVjdC54MSwgcmVjdC55MSwgcmVj
dC54MiwgcmVjdC55MiwgbWV0YWwpKSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1
ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVy
biBmYWxzZTsNCiAgfQ0KDQogIC8vIOiOt+WPluWIsOS4pOS4quWdpuWFi+W9ouaIkOeahOWb
m+adoemVv+aWueW9og0KICBnZXRGb3VyUmVjdE9mVHdvU3F1YXJlcyhzMSwgczIsIHIpIHsN
CiAgICAgIGxldCBkeCA9IHMxLlggLSBzMi5YOw0KICAgICAgbGV0IGR5ID0gczEuWSAtIHMy
Llk7DQogICAgICAvLyDlrprkuYnpnaDlt6bvvIzkuIrvvIzlj7PvvIzkuIvnmoTlnablhYsN
CiAgICAgIGxldCB0dCwgdHAsIHRyLCB0ZDsNCiAgICAgIC8vIOi+uemVvzsNCiAgICAgIGxl
dCB3ID0gcjsgIA0KICAgICAgaWYgKGR4ID4gMCkgew0KICAgICAgICAgIGlmIChkeSA+IDAp
IHsNCiAgICAgICAgICAgICAgdHQgPSBzMjsNCiAgICAgICAgICAgICAgdHAgPSBzMjsNCiAg
ICAgICAgICAgICAgdHIgPSBzMTsNCiAgICAgICAgICAgICAgdGQgPSBzMTsNCiAgICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0dCA9IHMyOw0KICAgICAgICAgICAgICB0cCA9
IHMxOw0KICAgICAgICAgICAgICB0ciA9IHMxOw0KICAgICAgICAgICAgICB0ZCA9IHMyOw0K
ICAgICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGR5ID4gMCkgew0K
ICAgICAgICAgICAgICB0dCA9IHMxOw0KICAgICAgICAgICAgICB0cCA9IHMyOw0KICAgICAg
ICAgICAgICB0ciA9IHMyOw0KICAgICAgICAgICAgICB0ZCA9IHMxOw0KICAgICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICAgIHR0ID0gczE7DQogICAgICAgICAgICAgIHRwID0gczE7
DQogICAgICAgICAgICAgIHRyID0gczI7DQogICAgICAgICAgICAgIHRkID0gczI7DQogICAg
ICAgICAgfQ0KICAgICAgfQ0KICAgICAgbGV0IHJlY3QxID0ge3gxOnR0LlgsIHkxOnRwLlks
IHgyOnRyLlgrdywgeTI6dHAuWSt3fTsNCiAgICAgIGxldCByZWN0MiA9IHt4MTp0ci5YLCB5
MTp0cC5ZLCB4Mjp0ci5YK3csIHkyOnRkLlkrd307DQogICAgICBsZXQgcmVjdDMgPSB7eDE6
dHQuWCwgeTE6dGQuWSwgeDI6dHIuWCt3LCB5Mjp0ZC5ZK3d9Ow0KICAgICAgbGV0IHJlY3Q0
ID0ge3gxOnR0LlgsIHkxOnRwLlksIHgyOnR0LlgrdywgeTI6dGQuWSt3fTsNCiAgICAgIHJl
dHVybiBbcmVjdDEsIHJlY3QyLCByZWN0MywgcmVjdDRdOw0KICB9DQoNCiAgZ2V0RGlzdGFu
Y2VPZlBvaW50cyhwb2ludDEsIHBvaW50Mikgew0KICAgICAgcmV0dXJuIHRoaXMuZ2V0RGlz
dGFuY2VPZihwb2ludDEuWC1wb2ludDIuWCwgcG9pbnQxLlktcG9pbnQyLlkpOw0KICB9DQoN
CiAgY2FsY3VsYXRlRGlzdGFuY2VXaXRoTWV0YWwodGFuazEsIHRhbmsyLCBtZXRhbCkgew0K
ICAgICAgbGV0IGRpc3RhbmNlOw0KICAgICAgbGV0IGR4ID0gTWF0aC5hYnModGFuazEuWCAt
IHRhbmsyLlgpOw0KICAgICAgbGV0IGR5ID0gTWF0aC5hYnModGFuazEuWSAtIHRhbmsyLlkp
Ow0KDQogICAgICBpZiAodGhpcy5pc1BvaW50UmVhY2hhYmxlKHRhbmsxLCB0YW5rMiwgbWV0
YWwpKSB7DQogICAgICAgICAgZGlzdGFuY2UgPSBkeCArIGR5Ow0KICAgICAgICAgIHJldHVy
biBkaXN0YW5jZTsNCiAgICAgIH0NCg0KICAgICAgbGV0IHBvaW50cyA9IHRoaXMuZmluZFR3
b0Nvbm5lY3RQb2ludCh0YW5rMSwgbWV0YWwpOw0KICAgICAgaWYgKHBvaW50cy5sZW5ndGgg
IT09IDIpIHsNCiAgICAgICAgICB0aGlzLmxvZygic2hpdCwg5p+l6Zeu6aKYIik7DQogICAg
ICAgICAgcmV0dXJuIDA7DQogICAgICB9DQoNCiAgICAgIGxldCBkaXN0YW5jZXMgPSBbXTsN
CiAgICAgIGZvcihsZXQgaT0wO2k8cG9pbnRzLmxlbmd0aDtpKyspIHsNCiAgICAgICAgICBs
ZXQgcG9pbnQgPSBwb2ludHNbaV07DQogICAgICAgICAgbGV0IGR4MSA9IE1hdGguYWJzKHRh
bmsxLlggLSBwb2ludC5YKTsNCiAgICAgICAgICBsZXQgZHkxID0gTWF0aC5hYnModGFuazEu
WSAtIHBvaW50LlkpOw0KICAgICAgICAgIGxldCBkeDIgPSBNYXRoLmFicyh0YW5rMi5YIC0g
cG9pbnQuWCk7DQogICAgICAgICAgbGV0IGR5MiA9IE1hdGguYWJzKHRhbmsyLlkgLSBwb2lu
dC5ZKTsNCiAgICAgICAgICBsZXQgZGlzdGFuY2UgPSBkeDEgKyBkeTEgKyBkeDIgKyBkeTI7
DQogICAgICAgICAgZGlzdGFuY2VzLnB1c2goZGlzdGFuY2UpOw0KICAgICAgfQ0KDQogICAg
ICByZXR1cm4gTWF0aC5taW4uYXBwbHkobnVsbCwgZGlzdGFuY2VzKTsNCg0KICB9DQoNCiAg
ZmluZFR3b0Nvbm5lY3RQb2ludCh0YW5rLCBtZXRhbCkgew0KICAgICAgaWYgKG1ldGFsID09
PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICByZXR1cm4gW107DQogICAgICB9DQogICAgICBs
ZXQgcG9pbnRzID0gW107DQogICAgICBsZXQgY2VudGVyT2ZNZXRhbCA9IHtYOm1ldGFsWzBd
K3RoaXMuTUVUQUxfV0lEVEgvMixZOm1ldGFsWzFdK3RoaXMuTUVUQUxfV0lEVEgvMn07DQog
ICAgICBmb3IobGV0IGk9MDtpPHRoaXMuc3ZOb1N0b3BEaXJlY3Rpb25zLmxlbmd0aDtpKysp
IHsNCiAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5zdk5vU3RvcERpcmVjdGlvbnNb
aV07DQogICAgICAgICAgbGV0IGNvcHlPZlRhbmsgPSB0aGlzLmNvcHlPZlRhbmsodGFuayk7
DQogICAgICAgICAgY29weU9mVGFuay5kaXJlY3Rpb24gPSBkaXJlY3Rpb247DQogICAgICAg
ICAgLy8gVE9ETyBTQ0og5Y+v5LyY5YyW5Li65LqM5YiG5rOV5p+l5om+IDIyPTE1MC83DQog
ICAgICAgICAgbGV0IGxhc3RJbWFnaW5hcnlUYW5rID0ge1g6MCwgWTowfTsNCiAgICAgICAg
ICBmb3IobGV0IHN0ZXA9MTtzdGVwPD0yMjtzdGVwKyspIHsNCiAgICAgICAgICAgICAgbGV0
IGltYWdpbmFyeVRhbmsgPSB0aGlzLmltYWdpbmVNb3ZlKHN0ZXAsIGNvcHlPZlRhbmssIHRy
dWUpOw0KICAgICAgICAgICAgICBpZiAoaW1hZ2luYXJ5VGFuay5YID09PSBsYXN0SW1hZ2lu
YXJ5VGFuay5YICYmIGltYWdpbmFyeVRhbmsuWSA9PT0gbGFzdEltYWdpbmFyeVRhbmsuWSkg
ew0KICAgICAgICAgICAgICAgICAgLy8g6YGH5Yiw6L6555WM77yM5YGc5q2i5q2k5pa55ZCR
5LiK55qE5a+75om+DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICBsYXN0SW1hZ2luYXJ5VGFuayA9IGltYWdpbmFyeVRhbms7DQog
ICAgICAgICAgICAgIGxldCBjZW50ZXJPZlRhbmsgPSB7WDppbWFnaW5hcnlUYW5rLlgrdGhp
cy5UQU5LX1dJRFRILzIsIFk6aW1hZ2luYXJ5VGFuay5ZK3RoaXMuVEFOS19XSURUSC8yfTsN
CiAgICAgICAgICAgICAgbGV0IGFic0R4ID0gTWF0aC5hYnMoY2VudGVyT2ZUYW5rLlgtY2Vu
dGVyT2ZNZXRhbC5YKTsNCiAgICAgICAgICAgICAgbGV0IGFic0R5ID0gTWF0aC5hYnMoY2Vu
dGVyT2ZUYW5rLlktY2VudGVyT2ZNZXRhbC5ZKTsNCiAgICAgICAgICAgICAgaWYgKHRoaXMu
aXNJbkNvbm5lY3RQb2ludEFyZWEoYWJzRHgsIGFic0R5KSkgew0KICAgICAgICAgICAgICAg
ICAgcG9pbnRzLnB1c2goaW1hZ2luYXJ5VGFuayk7DQogICAgICAgICAgICAgICAgICBicmVh
azsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVy
biBwb2ludHM7DQoNCiAgfQ0KDQogIC8vIOebruagh+eCueWvueS6juWOn+Wni+eCueaYr+WQ
puWPr+i+vu+8jOWmguaenOWPr+mAmui/h+S4gOasoei9rOWQkeWIsOi+vu+8jOWImeWPr+i+
vg0KICBpc1BvaW50UmVhY2hhYmxlKG9yaWdpblBvaW50LCB0YXJnZXRQb2ludCwgbWV0YWwp
IHsNCiAgICAgIGlmIChtZXRhbCA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgcmV0dXJu
IHRydWU7DQogICAgICB9DQogICAgICAvLyDmib7liLDkuKTkuKrlnablhYvlvaLmiJDnmoTm
raPmlrnlvaLkuIrnmoTlj6blpJbkuKTkuKrngrkNCiAgICAgIC8vIOWIhuWIq+S7jui/meS4
pOS4queCueWHuuWPkeWIsHRhbmsxLCB0YW5rMui/nue6v++8jOeci+eci+i/nue6v+W9ouaI
kOeahOmVv+aWueW9ouadoeaYr+WQpuS4jumanOeijeeJqeebuOeisOaSnu+8jOWmguaenOWt
mOWcqOS4jeebuOS6pOeahOaDheWGte+8jOWImeS4pOiAhei3neemu+WNs+S4umR4K2R5DQog
ICAgICBsZXQgdHdvT3RoZXJQb2ludHMgPSB0aGlzLmdldE90aGVyVHdvUG9pbnRzKG9yaWdp
blBvaW50LCB0YXJnZXRQb2ludCk7DQogICAgICBsZXQgcmVhY2hhYmxlID0gZmFsc2U7DQog
ICAgICBmb3IobGV0IGk9MDtpPHR3b090aGVyUG9pbnRzLmxlbmd0aDtpKyspIHsNCiAgICAg
ICAgICBsZXQgcG9pbnQgPSB0d29PdGhlclBvaW50c1tpXTsNCiAgICAgICAgICBsZXQgcmVj
dHMgPSB0aGlzLmdldFR3b1JlY3RzRnJvbVBvaW50KHBvaW50LCBvcmlnaW5Qb2ludCwgdGFy
Z2V0UG9pbnQpOw0KICAgICAgICAgIGxldCBjb2xsaWRlID0gZmFsc2U7DQogICAgICAgICAg
Zm9yKGxldCBqPTA7IGo8cmVjdHMubGVuZ3RoO2orKykgew0KICAgICAgICAgICAgICBsZXQg
cmVjdCA9IHJlY3RzW2pdOw0KICAgICAgICAgICAgICBpZiAodGhpcy5yZWN0Q29sbGlzaW9u
TWV0YWwocmVjdC54MSwgcmVjdC55MSwgcmVjdC54MiwgcmVjdC55MiwgbWV0YWwpKSB7DQog
ICAgICAgICAgICAgICAgICBjb2xsaWRlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgIGJy
ZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8g5b2T
5YmN54K55LiN6IO955So5L2c6L+e5o6l54K5DQogICAgICAgICAgaWYgKCFjb2xsaWRlKSB7
DQogICAgICAgICAgICAgIHJlYWNoYWJsZSA9IHRydWU7DQogICAgICAgICAgfQ0KICAgICAg
fQ0KDQogICAgICByZXR1cm4gcmVhY2hhYmxlOw0KDQogIH0NCg0KICBnZXRPdGhlclR3b1Bv
aW50cyh0MSwgdDIpIHsNCiAgICAgIGxldCBwMSA9IHtYOnQyLlgsIFk6dDEuWX07DQogICAg
ICBsZXQgcDIgPSB7WDp0MS5YLCBZOnQyLll9Ow0KICAgICAgcmV0dXJuIFtwMSwgcDJdOw0K
ICB9DQoNCiAgZ2V0VHdvUmVjdHNGcm9tUG9pbnQocG9pbnQsIHQxLCB0Mikgew0KICAgICAg
bGV0IHcgPSB0aGlzLlRBTktfV0lEVEg7DQogICAgICBsZXQgcmVjdDEsIHJlY3QyOw0KICAg
ICAgaWYgKHQxLlggPT09IHQyLlggfHwgdDEuWSA9PT0gdDIuWSkgew0KICAgICAgICAgIC8v
IOWOn+Wni+eCueS4juebruagh+eCueWcqOWQjOS4gOawtOW5s+e6v+aIluerluebtOe6v+S4
ig0KICAgICAgICAgIHJlY3QxID0ge3gxOnBvaW50LlgsIHkxOnBvaW50LlksIHgyOnBvaW50
LlgrdywgeTI6cG9pbnQuWSt3fTsNCiAgICAgICAgICAvLyDku47lsI/liLDlpKcNCiAgICAg
ICAgICBpZiAodDEuWSA+IHQyLlkgfHwgdDEuWCA+IHQyLlgpIHsNCiAgICAgICAgICAgICAg
cmVjdDIgPSB7eDE6dDIuWCwgeTE6dDIuWSwgeDI6dDEuWCt3LCB5Mjp0MS5ZK3d9Ow0KICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHJlY3QyID0ge3gxOnQxLlgsIHkxOnQx
LlksIHgyOnQyLlgrdywgeTI6dDIuWSt3fTsNCiAgICAgICAgICB9DQogICAgICB9IGVsc2Ug
ew0KICAgICAgICAgIGlmIChwb2ludC5YID09PSB0MS5YKSB7DQogICAgICAgICAgICAgIGlm
IChwb2ludC5ZIDwgdDEuWSkgew0KICAgICAgICAgICAgICAgICAgaWYgKHBvaW50LlggPiB0
Mi5YKSB7DQogICAgICAgICAgICAgICAgICAgICAgcmVjdDEgPSB7eDE6cG9pbnQuWCwgeTE6
cG9pbnQuWSwgeDI6dDEuWCt3LCB5Mjp0MS5ZK3d9Ow0KICAgICAgICAgICAgICAgICAgICAg
IHJlY3QyID0ge3gxOnQyLlgsIHkxOnQyLlksIHgyOnBvaW50LlgrdywgeTI6cG9pbnQuWSt3
fTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAg
cmVjdDEgPSB7eDE6cG9pbnQuWCwgeTE6cG9pbnQuWSwgeDI6dDEuWCt3LCB5Mjp0MS5ZK3d9
Ow0KICAgICAgICAgICAgICAgICAgICAgIHJlY3QyID0ge3gxOnBvaW50LlgsIHkxOnBvaW50
LlksIHgyOnQyLlgrdywgeTI6dDIuWSt3fTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGlmIChwb2ludC5YID4gdDIu
WCkgew0KICAgICAgICAgICAgICAgICAgICAgIHJlY3QxID0ge3gxOnQxLlgsIHkxOnQxLlks
IHgyOnBvaW50LlgrdywgeTI6cG9pbnQuWSt3fTsNCiAgICAgICAgICAgICAgICAgICAgICBy
ZWN0MiA9IHt4MTp0Mi5YLCB5MTp0Mi5ZLCB4Mjpwb2ludC5YK3csIHkyOnBvaW50Llkrd307
DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIHJl
Y3QxID0ge3gxOnQxLlgsIHkxOnQxLlksIHgyOnBvaW50LlgrdywgeTI6cG9pbnQuWSt3fTsN
CiAgICAgICAgICAgICAgICAgICAgICByZWN0MiA9IHt4MTpwb2ludC5YLCB5MTpwb2ludC5Z
LCB4Mjp0Mi5YK3csIHkyOnQyLlkrd307DQogICAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyBwb2ludC5Y
ID09PSBwb2ludC5YDQogICAgICAgICAgICAgIGlmIChwb2ludC5ZIDwgdDIuWSkgew0KICAg
ICAgICAgICAgICAgICAgaWYgKHBvaW50LlggPiB0MS5YKSB7DQogICAgICAgICAgICAgICAg
ICAgICAgcmVjdDEgPSB7eDE6dDEuWCwgeTE6dDEuWSwgeDI6cG9pbnQuWCt3LCB5Mjpwb2lu
dC5ZK3d9Ow0KICAgICAgICAgICAgICAgICAgICAgIHJlY3QyID0ge3gxOnBvaW50LlgsIHkx
OnBvaW50LlksIHgyOnQyLlgrdywgeTI6dDIuWSt3fTsNCiAgICAgICAgICAgICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgcmVjdDEgPSB7eDE6cG9pbnQuWCwgeTE6
cG9pbnQuWSwgeDI6dDIuWCt3LCB5Mjp0Mi5ZK3d9Ow0KICAgICAgICAgICAgICAgICAgICAg
IHJlY3QyID0ge3gxOnBvaW50LlgsIHkxOnBvaW50LlksIHgyOnQxLlgrdywgeTI6dDEuWSt3
fTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAg
ICAgICAgICAgICAgIGlmIChwb2ludC5YID4gdDEuWCkgew0KICAgICAgICAgICAgICAgICAg
ICAgIHJlY3QxID0ge3gxOnQxLlgsIHkxOnQxLlksIHgyOnBvaW50LlgrdywgeTI6cG9pbnQu
WSt3fTsNCiAgICAgICAgICAgICAgICAgICAgICByZWN0MiA9IHt4MTp0Mi5YLCB5MTp0Mi5Z
LCB4Mjpwb2ludC5YK3csIHkyOnBvaW50Llkrd307DQogICAgICAgICAgICAgICAgICB9IGVs
c2Ugew0KICAgICAgICAgICAgICAgICAgICAgIHJlY3QyID0ge3gxOnBvaW50LlgsIHkxOnBv
aW50LlksIHgyOnQxLlgrdywgeTI6dDEuWSt3fTsNCiAgICAgICAgICAgICAgICAgICAgICBy
ZWN0MSA9IHt4MTp0Mi5YLCB5MTp0Mi5ZLCB4Mjpwb2ludC5YK3csIHkyOnBvaW50Llkrd307
DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQog
ICAgICB9DQoNCiAgICAgIHJldHVybiBbcmVjdDEsIHJlY3QyXTsNCg0KICB9DQoNCiAgLy8g
5o6n5Yi256e75YqoICAg5Li+5L6L5a2Q77yaICDlkJHlt6bnp7vliqjvvJogdGhpcy5TVk1v
dmUodGhpcy5ESVJFQ1RJT04uTEVGVCkNCiAgU1ZNb3ZlKGRpcmVjdGlvbikgew0KICAgICAg
aWYgKHR5cGVvZiBkaXJlY3Rpb24gPT09IHVuZGVmaW5lZCkgcmV0dXJuOw0KICAgICAgdGhp
cy5zdk1vdmVFdi5rZXlDb2RlID0gdGhpcy5TVkdldERpcmVjdGlvbktleUNvZGUoZGlyZWN0
aW9uKTsNCiAgICAgIGRvY3VtZW50Lm9ua2V5ZG93bih0aGlzLnN2TW92ZUV2KTsNCiAgfQ0K
DQogIC8vIOW8gOeBqw0KICBTVkZpcmUoKSB7DQogICAgICBsZXQgbm93ID0gKG5ldyBEYXRl
KCkpLnZhbHVlT2YoKTsNCiAgICAgIGlmIChub3cgLSB0aGlzLmZpcmV0aW1lc3RhbXAgPj0g
dGhpcy5NSU5fRklSRV9JTlRFUlZBTCkgew0KICAgICAgICAgIHRoaXMuZmlyZXRpbWVzdGFt
cCA9IG5vdzsNCiAgICAgICAgICB0aGlzLnN2RmlyZUV2LmtleUNvZGUgPSB0aGlzLnN2VHlw
ZSA9PT0gIkEiID8gMzIgOiA4Ow0KICAgICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93bih0aGlz
LnN2RmlyZUV2KTsNCiAgICAgIH0NCiAgfQ0KDQogIC8vIOagueaNrueOqeWutui/lOWbnuat
o+ehrueahOaWueWQkWtleUNvZGUNCiAgU1ZHZXREaXJlY3Rpb25LZXlDb2RlKGRpcmVjdGlv
bikgew0KICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHsNCiAgICAgICAgICBjYXNlIHRoaXMu
RElSRUNUSU9OLlVQOg0KICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdlR5cGUgPT09ICJB
IiA/IDg3IDogMzg7DQogICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5ET1dOOg0KICAg
ICAgICAgICAgICByZXR1cm4gdGhpcy5zdlR5cGUgPT09ICJBIiA/IDgzIDogNDA7DQogICAg
ICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5MRUZUOg0KICAgICAgICAgICAgICByZXR1cm4g
dGhpcy5zdlR5cGUgPT09ICJBIiA/IDY1IDogMzc7DQogICAgICAgICAgY2FzZSB0aGlzLkRJ
UkVDVElPTi5SSUdIVDoNCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3ZUeXBlID09PSAi
QSIgPyA2OCA6IDM5Ow0KICAgICAgfQ0KICB9DQoNCiAgU1ZHZXREaXJlY3Rpb25TdHIoZGly
ZWN0aW9uKSB7DQogICAgICBzd2l0Y2ggKGRpcmVjdGlvbikgew0KICAgICAgICAgIGNhc2Ug
dGhpcy5ESVJFQ1RJT04uVVA6DQogICAgICAgICAgICAgIHJldHVybiAiVVAiOw0KICAgICAg
ICAgIGNhc2UgdGhpcy5ESVJFQ1RJT04uRE9XTjoNCiAgICAgICAgICAgICAgcmV0dXJuICJE
T1dOIjsNCiAgICAgICAgICBjYXNlIHRoaXMuRElSRUNUSU9OLkxFRlQ6DQogICAgICAgICAg
ICAgIHJldHVybiAiTEVGVCI7DQogICAgICAgICAgY2FzZSB0aGlzLkRJUkVDVElPTi5SSUdI
VDoNCiAgICAgICAgICAgICAgcmV0dXJuICJSSUdIVCI7DQogICAgICAgICAgZGVmYXVsdDoN
CiAgICAgICAgICAgICAgcmV0dXJuICJTVE9QIjsNCiAgICAgIH0NCiAgfQ0KDQogIGlzQ291
bnRlclN0cmlrZSgpIHsNCiAgICAgIHJldHVybiBhbWV0YWwubGVuZ3RoID4gMDsNCiAgfQ0K
DQogIHJlY3RDb2xsaXNpb25NZXRhbCh4MSwgeTEsIHgyLCB5MiwgbWV0YWwpIHsNCiAgICAg
IGlmIChtZXRhbCA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0K
ICAgICAgfQ0KICAgICAgbGV0IGR4ID0geDIteDE7DQogICAgICBsZXQgZHkgPSB5Mi15MTsN
CiAgICAgIC8v6Zqc56KN6Zi75oyhDQogICAgICBpZih4MT5tZXRhbFswXSAtIGR4ICYmIHgx
IDwgbWV0YWxbMF0gKyBtZXRhbFsyXSAmJiB5MSA+IG1ldGFsWzFdLWR5ICYmIHkxPG1ldGFs
WzFdICsgbWV0YWxbM10pIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAg
ICAgIHJldHVybiBmYWxzZTsNCiAgfQ0KDQogIGNvbGxpc2lvbk1ldGFsKHgseSxyKSB7DQog
ICAgICAvL+manOeijemYu+aMoQ0KICAgICAgY29uc3QgbWV0YWwgPSBhbWV0YWw7DQogICAg
ICBpZihtZXRhbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgZm9yKHZhciBpID0gMDtpPG1l
dGFsLmxlbmd0aDtpKyspIHsNCiAgICAgICAgICAgICAgaWYoeD5tZXRhbFtpXVswXSAtIHIg
JiYgeCA8IG1ldGFsW2ldWzBdICsgbWV0YWxbaV1bMl0gJiYgeSA+IG1ldGFsW2ldWzFdLXIg
JiYgeTxtZXRhbFtpXVsxXSArIG1ldGFsW2ldWzNdKQ0KICAgICAgICAgICAgICB7DQogICAg
ICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAg
IH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgfQ0KDQogIGxvZyguLi5kYXRh
KSB7DQogICAgICBpZiAodGhpcy5ERUJVRykgew0KICAgICAgICAgIGNvbnNvbGUubG9nKGRh
dGEuam9pbignICcpKTsNCg0KICAgICAgfQ0KICB9DQoNCiAgZXJyb3IoLi4uZGF0YSkgew0K
ICAgICAgaWYgKHRoaXMuREVCVUcpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGRhdGEu
am9pbignICcpKTsNCiAgICAgIH0NCiAgfQ0KDQogIHNldE5hbWUoKSB7DQogICAgICBkb2N1
bWVudC5nZXRFbGVtZW50QnlJZCgNCiAgICAgICAgICBgUGxheWVyJHt0aGlzLnR5cGUgPT09
ICJBIiA/IDEgOiAyfWJhck5hbWVgDQogICAgICAgICkudmFsdWUgPSAi6Zeq55S1Ig0KICAg
ICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoDQogICAgICBgUGxheWVyJHt0aGlzLnR5cGUg
PT09ICJBIiA/IDEgOiAyfU5hbWVgDQogICAgICApLnRleHRDb250ZW50ID0gIumXqueUtSIN
CiAgfQ0KDQogIC8vIFBsYXllckEvUGxheWVyQg0KfSkoIkIiKTs=
--B_3686584859_2020502391--

